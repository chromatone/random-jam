<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <title>Jam randomizer by Chromatone</title>
  <meta name="theme-color" content="black">
  <meta name="application-name" content="Jam randomizer">
  <meta name="author" content="Denis Starov">
  <meta name="creator" content="Chromatone">
  <meta name="description" content="Get unpredictable tempo and scale combinations for unique jams">
  <meta property="og:title" content="Chromatone Jam Randomizer">
  <meta property="og:site_name" content="Jam randomizer">
  <meta property="og:description" content="Get unpredictable tempo and scale combinations for unique jams">
  <meta property="og:image" content="./screen.png">
  <meta property="og:image:type" content="image/png">
  <meta property="og:image:alt"
    content="Jam randomizer - Get unpredictable tempo and scale combinations for unique jams">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:label1" content="Jam randomizer">
  <meta name="twitter:label2" content="Random Jam">
  <meta name="twitter:site" content="@davay42">
  <meta name="twitter:creator" content="@davay42">
  <meta name="twitter:image:type" content="image/png">
  <meta name="twitter:image" content="./screen.png">

  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-touch-fullscreen" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="Jam Randomizer">

  <link rel="icon" type="image/svg+xml" href="./logo.svg">
  <link rel="apple-touch-icon" href="./icon.png" sizes="512x512">

  <link rel="manifest" href="./manifest.json">

  <script async defer src="https://stats.chromatone.center/script.js" data-website-id="47263d8d-f9ff-4796-a6b7-447c4daf5e75"></script>
          
          <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('/sw.js')
          .then((registration) => {
            console.log('Service Worker registered with scope: ', registration.scope);
          })
          .catch((error) => {
            console.error('Service Worker registration failed: ', error);
          });
      });
    }
  </script>

  <script type="module" crossorigin>(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function wc(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const Pe={},Gs=[],vn=()=>{},Rm=()=>!1,uo=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Ac=t=>t.startsWith("onUpdate:"),ht=Object.assign,Tc=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},Dm=Object.prototype.hasOwnProperty,Se=(t,e)=>Dm.call(t,e),ue=Array.isArray,Hs=t=>ho(t)==="[object Map]",Xh=t=>ho(t)==="[object Set]",fe=t=>typeof t=="function",Je=t=>typeof t=="string",qn=t=>typeof t=="symbol",qe=t=>t!==null&&typeof t=="object",ef=t=>(qe(t)||fe(t))&&fe(t.then)&&fe(t.catch),tf=Object.prototype.toString,ho=t=>tf.call(t),Fm=t=>ho(t).slice(8,-1),nf=t=>ho(t)==="[object Object]",Mc=t=>Je(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Pr=wc(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),fo=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},Bm=/-(\w)/g,es=fo(t=>t.replace(Bm,(e,n)=>n?n.toUpperCase():"")),Vm=/\B([A-Z])/g,Es=fo(t=>t.replace(Vm,"-$1").toLowerCase()),sf=fo(t=>t.charAt(0).toUpperCase()+t.slice(1)),Xo=fo(t=>t?`on${sf(t)}`:""),Jn=(t,e)=>!Object.is(t,e),ea=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},rf=(t,e,n,s=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:s,value:n})},Lm=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let Yl;const po=()=>Yl||(Yl=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function it(t){if(ue(t)){const e={};for(let n=0;n<t.length;n++){const s=t[n],r=Je(s)?$m(s):it(s);if(r)for(const i in r)e[i]=r[i]}return e}else if(Je(t)||qe(t))return t}const Um=/;(?![^(]*\))/g,jm=/:([^]+)/,qm=/\/\*[^]*?\*\//g;function $m(t){const e={};return t.replace(qm,"").split(Um).forEach(n=>{if(n){const s=n.split(jm);s.length>1&&(e[s[0].trim()]=s[1].trim())}}),e}function Xr(t){let e="";if(Je(t))e=t;else if(ue(t))for(let n=0;n<t.length;n++){const s=Xr(t[n]);s&&(e+=s+" ")}else if(qe(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const Wm="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Gm=wc(Wm);function of(t){return!!t||t===""}const af=t=>!!(t&&t.__v_isRef===!0),Wt=t=>Je(t)?t:t==null?"":ue(t)||qe(t)&&(t.toString===tf||!fe(t.toString))?af(t)?Wt(t.value):JSON.stringify(t,cf,2):String(t),cf=(t,e)=>af(e)?cf(t,e.value):Hs(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[s,r],i)=>(n[ta(s,i)+" =>"]=r,n),{})}:Xh(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>ta(n))}:qn(e)?ta(e):qe(e)&&!ue(e)&&!nf(e)?String(e):e,ta=(t,e="")=>{var n;return qn(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Ct;class Hm{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Ct,!e&&Ct&&(this.index=(Ct.scopes||(Ct.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=Ct;try{return Ct=this,e()}finally{Ct=n}}}on(){Ct=this}off(){Ct=this.parent}stop(e){if(this._active){this._active=!1;let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(this.effects.length=0,n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0}}}function lf(){return Ct}function zm(t,e=!1){Ct&&Ct.cleanups.push(t)}let Oe;const na=new WeakSet;class uf{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Ct&&Ct.active&&Ct.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,na.has(this)&&(na.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||ff(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Kl(this),df(this);const e=Oe,n=rn;Oe=this,rn=!0;try{return this.fn()}finally{pf(this),Oe=e,rn=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Nc(e);this.deps=this.depsTail=void 0,Kl(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?na.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Ba(this)&&this.run()}get dirty(){return Ba(this)}}let hf=0,kr,Or;function ff(t,e=!1){if(t.flags|=8,e){t.next=Or,Or=t;return}t.next=kr,kr=t}function Sc(){hf++}function Ec(){if(--hf>0)return;if(Or){let e=Or;for(Or=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;kr;){let e=kr;for(kr=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(s){t||(t=s)}e=n}}if(t)throw t}function df(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function pf(t){let e,n=t.depsTail,s=n;for(;s;){const r=s.prevDep;s.version===-1?(s===n&&(n=r),Nc(s),Qm(s)):e=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=r}t.deps=e,t.depsTail=n}function Ba(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(mf(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function mf(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Wr))return;t.globalVersion=Wr;const e=t.dep;if(t.flags|=2,e.version>0&&!t.isSSR&&t.deps&&!Ba(t)){t.flags&=-3;return}const n=Oe,s=rn;Oe=t,rn=!0;try{df(t);const r=t.fn(t._value);(e.version===0||Jn(r,t._value))&&(t._value=r,e.version++)}catch(r){throw e.version++,r}finally{Oe=n,rn=s,pf(t),t.flags&=-3}}function Nc(t,e=!1){const{dep:n,prevSub:s,nextSub:r}=t;if(s&&(s.nextSub=r,t.prevSub=void 0),r&&(r.prevSub=s,t.nextSub=void 0),n.subs===t&&(n.subs=s,!s&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)Nc(i,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function Qm(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let rn=!0;const gf=[];function is(){gf.push(rn),rn=!1}function os(){const t=gf.pop();rn=t===void 0?!0:t}function Kl(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=Oe;Oe=void 0;try{e()}finally{Oe=n}}}let Wr=0;class Ym{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Cc{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!Oe||!rn||Oe===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==Oe)n=this.activeLink=new Ym(Oe,this),Oe.deps?(n.prevDep=Oe.depsTail,Oe.depsTail.nextDep=n,Oe.depsTail=n):Oe.deps=Oe.depsTail=n,_f(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const s=n.nextDep;s.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=s),n.prevDep=Oe.depsTail,n.nextDep=void 0,Oe.depsTail.nextDep=n,Oe.depsTail=n,Oe.deps===n&&(Oe.deps=s)}return n}trigger(e){this.version++,Wr++,this.notify(e)}notify(e){Sc();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{Ec()}}}function _f(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let s=e.deps;s;s=s.nextDep)_f(s)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const Va=new WeakMap,bs=Symbol(""),La=Symbol(""),Gr=Symbol("");function bt(t,e,n){if(rn&&Oe){let s=Va.get(t);s||Va.set(t,s=new Map);let r=s.get(n);r||(s.set(n,r=new Cc),r.map=s,r.key=n),r.track()}}function Fn(t,e,n,s,r,i){const o=Va.get(t);if(!o){Wr++;return}const a=c=>{c&&c.trigger()};if(Sc(),e==="clear")o.forEach(a);else{const c=ue(t),l=c&&Mc(n);if(c&&n==="length"){const u=Number(s);o.forEach((h,f)=>{(f==="length"||f===Gr||!qn(f)&&f>=u)&&a(h)})}else switch((n!==void 0||o.has(void 0))&&a(o.get(n)),l&&a(o.get(Gr)),e){case"add":c?l&&a(o.get("length")):(a(o.get(bs)),Hs(t)&&a(o.get(La)));break;case"delete":c||(a(o.get(bs)),Hs(t)&&a(o.get(La)));break;case"set":Hs(t)&&a(o.get(bs));break}}Ec()}function Os(t){const e=Me(t);return e===t?e:(bt(e,"iterate",Gr),Qt(t)?e:e.map(vt))}function mo(t){return bt(t=Me(t),"iterate",Gr),t}const Km={__proto__:null,[Symbol.iterator](){return sa(this,Symbol.iterator,vt)},concat(...t){return Os(this).concat(...t.map(e=>ue(e)?Os(e):e))},entries(){return sa(this,"entries",t=>(t[1]=vt(t[1]),t))},every(t,e){return Pn(this,"every",t,e,void 0,arguments)},filter(t,e){return Pn(this,"filter",t,e,n=>n.map(vt),arguments)},find(t,e){return Pn(this,"find",t,e,vt,arguments)},findIndex(t,e){return Pn(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return Pn(this,"findLast",t,e,vt,arguments)},findLastIndex(t,e){return Pn(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return Pn(this,"forEach",t,e,void 0,arguments)},includes(...t){return ra(this,"includes",t)},indexOf(...t){return ra(this,"indexOf",t)},join(t){return Os(this).join(t)},lastIndexOf(...t){return ra(this,"lastIndexOf",t)},map(t,e){return Pn(this,"map",t,e,void 0,arguments)},pop(){return vr(this,"pop")},push(...t){return vr(this,"push",t)},reduce(t,...e){return Zl(this,"reduce",t,e)},reduceRight(t,...e){return Zl(this,"reduceRight",t,e)},shift(){return vr(this,"shift")},some(t,e){return Pn(this,"some",t,e,void 0,arguments)},splice(...t){return vr(this,"splice",t)},toReversed(){return Os(this).toReversed()},toSorted(t){return Os(this).toSorted(t)},toSpliced(...t){return Os(this).toSpliced(...t)},unshift(...t){return vr(this,"unshift",t)},values(){return sa(this,"values",vt)}};function sa(t,e,n){const s=mo(t),r=s[e]();return s!==t&&!Qt(t)&&(r._next=r.next,r.next=()=>{const i=r._next();return i.value&&(i.value=n(i.value)),i}),r}const Zm=Array.prototype;function Pn(t,e,n,s,r,i){const o=mo(t),a=o!==t&&!Qt(t),c=o[e];if(c!==Zm[e]){const h=c.apply(t,i);return a?vt(h):h}let l=n;o!==t&&(a?l=function(h,f){return n.call(this,vt(h),f,t)}:n.length>2&&(l=function(h,f){return n.call(this,h,f,t)}));const u=c.call(o,l,s);return a&&r?r(u):u}function Zl(t,e,n,s){const r=mo(t);let i=n;return r!==t&&(Qt(t)?n.length>3&&(i=function(o,a,c){return n.call(this,o,a,c,t)}):i=function(o,a,c){return n.call(this,o,vt(a),c,t)}),r[e](i,...s)}function ra(t,e,n){const s=Me(t);bt(s,"iterate",Gr);const r=s[e](...n);return(r===-1||r===!1)&&Pc(n[0])?(n[0]=Me(n[0]),s[e](...n)):r}function vr(t,e,n=[]){is(),Sc();const s=Me(t)[e].apply(t,n);return Ec(),os(),s}const Jm=wc("__proto__,__v_isRef,__isVue"),yf=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(qn));function Xm(t){qn(t)||(t=String(t));const e=Me(this);return bt(e,"has",t),e.hasOwnProperty(t)}class bf{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,s){if(n==="__v_skip")return e.__v_skip;const r=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!r;if(n==="__v_isReadonly")return r;if(n==="__v_isShallow")return i;if(n==="__v_raw")return s===(r?i?lg:Tf:i?Af:wf).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(s)?e:void 0;const o=ue(e);if(!r){let c;if(o&&(c=Km[n]))return c;if(n==="hasOwnProperty")return Xm}const a=Reflect.get(e,n,ut(e)?e:s);return(qn(n)?yf.has(n):Jm(n))||(r||bt(e,"get",n),i)?a:ut(a)?o&&Mc(n)?a:a.value:qe(a)?r?go(a):He(a):a}}class vf extends bf{constructor(e=!1){super(!1,e)}set(e,n,s,r){let i=e[n];if(!this._isShallow){const c=ts(i);if(!Qt(s)&&!ts(s)&&(i=Me(i),s=Me(s)),!ue(e)&&ut(i)&&!ut(s))return c?!1:(i.value=s,!0)}const o=ue(e)&&Mc(n)?Number(n)<e.length:Se(e,n),a=Reflect.set(e,n,s,ut(e)?e:r);return e===Me(r)&&(o?Jn(s,i)&&Fn(e,"set",n,s):Fn(e,"add",n,s)),a}deleteProperty(e,n){const s=Se(e,n);e[n];const r=Reflect.deleteProperty(e,n);return r&&s&&Fn(e,"delete",n,void 0),r}has(e,n){const s=Reflect.has(e,n);return(!qn(n)||!yf.has(n))&&bt(e,"has",n),s}ownKeys(e){return bt(e,"iterate",ue(e)?"length":bs),Reflect.ownKeys(e)}}class eg extends bf{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const tg=new vf,ng=new eg,sg=new vf(!0);const Ua=t=>t,_i=t=>Reflect.getPrototypeOf(t);function rg(t,e,n){return function(...s){const r=this.__v_raw,i=Me(r),o=Hs(i),a=t==="entries"||t===Symbol.iterator&&o,c=t==="keys"&&o,l=r[t](...s),u=n?Ua:e?ja:vt;return!e&&bt(i,"iterate",c?La:bs),{next(){const{value:h,done:f}=l.next();return f?{value:h,done:f}:{value:a?[u(h[0]),u(h[1])]:u(h),done:f}},[Symbol.iterator](){return this}}}}function yi(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function ig(t,e){const n={get(r){const i=this.__v_raw,o=Me(i),a=Me(r);t||(Jn(r,a)&&bt(o,"get",r),bt(o,"get",a));const{has:c}=_i(o),l=e?Ua:t?ja:vt;if(c.call(o,r))return l(i.get(r));if(c.call(o,a))return l(i.get(a));i!==o&&i.get(r)},get size(){const r=this.__v_raw;return!t&&bt(Me(r),"iterate",bs),Reflect.get(r,"size",r)},has(r){const i=this.__v_raw,o=Me(i),a=Me(r);return t||(Jn(r,a)&&bt(o,"has",r),bt(o,"has",a)),r===a?i.has(r):i.has(r)||i.has(a)},forEach(r,i){const o=this,a=o.__v_raw,c=Me(a),l=e?Ua:t?ja:vt;return!t&&bt(c,"iterate",bs),a.forEach((u,h)=>r.call(i,l(u),l(h),o))}};return ht(n,t?{add:yi("add"),set:yi("set"),delete:yi("delete"),clear:yi("clear")}:{add(r){!e&&!Qt(r)&&!ts(r)&&(r=Me(r));const i=Me(this);return _i(i).has.call(i,r)||(i.add(r),Fn(i,"add",r,r)),this},set(r,i){!e&&!Qt(i)&&!ts(i)&&(i=Me(i));const o=Me(this),{has:a,get:c}=_i(o);let l=a.call(o,r);l||(r=Me(r),l=a.call(o,r));const u=c.call(o,r);return o.set(r,i),l?Jn(i,u)&&Fn(o,"set",r,i):Fn(o,"add",r,i),this},delete(r){const i=Me(this),{has:o,get:a}=_i(i);let c=o.call(i,r);c||(r=Me(r),c=o.call(i,r)),a&&a.call(i,r);const l=i.delete(r);return c&&Fn(i,"delete",r,void 0),l},clear(){const r=Me(this),i=r.size!==0,o=r.clear();return i&&Fn(r,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(r=>{n[r]=rg(r,t,e)}),n}function xc(t,e){const n=ig(t,e);return(s,r,i)=>r==="__v_isReactive"?!t:r==="__v_isReadonly"?t:r==="__v_raw"?s:Reflect.get(Se(n,r)&&r in s?n:s,r,i)}const og={get:xc(!1,!1)},ag={get:xc(!1,!0)},cg={get:xc(!0,!1)};const wf=new WeakMap,Af=new WeakMap,Tf=new WeakMap,lg=new WeakMap;function ug(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function hg(t){return t.__v_skip||!Object.isExtensible(t)?0:ug(Fm(t))}function He(t){return ts(t)?t:Ic(t,!1,tg,og,wf)}function Mn(t){return Ic(t,!1,sg,ag,Af)}function go(t){return Ic(t,!0,ng,cg,Tf)}function Ic(t,e,n,s,r){if(!qe(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=r.get(t);if(i)return i;const o=hg(t);if(o===0)return t;const a=new Proxy(t,o===2?s:n);return r.set(t,a),a}function zs(t){return ts(t)?zs(t.__v_raw):!!(t&&t.__v_isReactive)}function ts(t){return!!(t&&t.__v_isReadonly)}function Qt(t){return!!(t&&t.__v_isShallow)}function Pc(t){return t?!!t.__v_raw:!1}function Me(t){const e=t&&t.__v_raw;return e?Me(e):t}function Vs(t){return!Se(t,"__v_skip")&&Object.isExtensible(t)&&rf(t,"__v_skip",!0),t}const vt=t=>qe(t)?He(t):t,ja=t=>qe(t)?go(t):t;function ut(t){return t?t.__v_isRef===!0:!1}function Ze(t){return Sf(t,!1)}function Mf(t){return Sf(t,!0)}function Sf(t,e){return ut(t)?t:new fg(t,e)}class fg{constructor(e,n){this.dep=new Cc,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:Me(e),this._value=n?e:vt(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,s=this.__v_isShallow||Qt(e)||ts(e);e=s?e:Me(e),Jn(e,n)&&(this._rawValue=e,this._value=s?e:vt(e),this.dep.trigger())}}function Ne(t){return ut(t)?t.value:t}function dg(t){return fe(t)?t():Ne(t)}const pg={get:(t,e,n)=>e==="__v_raw"?t:Ne(Reflect.get(t,e,n)),set:(t,e,n,s)=>{const r=t[e];return ut(r)&&!ut(n)?(r.value=n,!0):Reflect.set(t,e,n,s)}};function Ef(t){return zs(t)?t:new Proxy(t,pg)}class mg{constructor(e,n,s){this.fn=e,this.setter=n,this._value=void 0,this.dep=new Cc(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Wr-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&Oe!==this)return ff(this,!0),!0}get value(){const e=this.dep.track();return mf(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function gg(t,e,n=!1){let s,r;return fe(t)?s=t:(s=t.get,r=t.set),new mg(s,r,n)}const bi={},Bi=new WeakMap;let ps;function _g(t,e=!1,n=ps){if(n){let s=Bi.get(n);s||Bi.set(n,s=[]),s.push(t)}}function yg(t,e,n=Pe){const{immediate:s,deep:r,once:i,scheduler:o,augmentJob:a,call:c}=n,l=b=>r?b:Qt(b)||r===!1||r===0?Bn(b,1):Bn(b);let u,h,f,d,p=!1,g=!1;if(ut(t)?(h=()=>t.value,p=Qt(t)):zs(t)?(h=()=>l(t),p=!0):ue(t)?(g=!0,p=t.some(b=>zs(b)||Qt(b)),h=()=>t.map(b=>{if(ut(b))return b.value;if(zs(b))return l(b);if(fe(b))return c?c(b,2):b()})):fe(t)?e?h=c?()=>c(t,2):t:h=()=>{if(f){is();try{f()}finally{os()}}const b=ps;ps=u;try{return c?c(t,3,[d]):t(d)}finally{ps=b}}:h=vn,e&&r){const b=h,y=r===!0?1/0:r;h=()=>Bn(b(),y)}const m=lf(),_=()=>{u.stop(),m&&m.active&&Tc(m.effects,u)};if(i&&e){const b=e;e=(...y)=>{b(...y),_()}}let w=g?new Array(t.length).fill(bi):bi;const A=b=>{if(!(!(u.flags&1)||!u.dirty&&!b))if(e){const y=u.run();if(r||p||(g?y.some((M,C)=>Jn(M,w[C])):Jn(y,w))){f&&f();const M=ps;ps=u;try{const C=[y,w===bi?void 0:g&&w[0]===bi?[]:w,d];c?c(e,3,C):e(...C),w=y}finally{ps=M}}}else u.run()};return a&&a(A),u=new uf(h),u.scheduler=o?()=>o(A,!1):A,d=b=>_g(b,!1,u),f=u.onStop=()=>{const b=Bi.get(u);if(b){if(c)c(b,4);else for(const y of b)y();Bi.delete(u)}},e?s?A(!0):w=u.run():o?o(A.bind(null,!0),!0):u.run(),_.pause=u.pause.bind(u),_.resume=u.resume.bind(u),_.stop=_,_}function Bn(t,e=1/0,n){if(e<=0||!qe(t)||t.__v_skip||(n=n||new Set,n.has(t)))return t;if(n.add(t),e--,ut(t))Bn(t.value,e,n);else if(ue(t))for(let s=0;s<t.length;s++)Bn(t[s],e,n);else if(Xh(t)||Hs(t))t.forEach(s=>{Bn(s,e,n)});else if(nf(t)){for(const s in t)Bn(t[s],e,n);for(const s of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,s)&&Bn(t[s],e,n)}return t}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function ei(t,e,n,s){try{return s?t(...s):t()}catch(r){_o(r,e,n)}}function wn(t,e,n,s){if(fe(t)){const r=ei(t,e,n,s);return r&&ef(r)&&r.catch(i=>{_o(i,e,n)}),r}if(ue(t)){const r=[];for(let i=0;i<t.length;i++)r.push(wn(t[i],e,n,s));return r}}function _o(t,e,n,s=!0){const r=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||Pe;if(e){let a=e.parent;const c=e.proxy,l=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const u=a.ec;if(u){for(let h=0;h<u.length;h++)if(u[h](t,c,l)===!1)return}a=a.parent}if(i){is(),ei(i,null,10,[t,c,l]),os();return}}bg(t,n,r,s,o)}function bg(t,e,n,s=!0,r=!1){if(r)throw t;console.error(t)}const xt=[];let gn=-1;const Qs=[];let Yn=null,Ls=0;const Nf=Promise.resolve();let Vi=null;function gs(t){const e=Vi||Nf;return t?e.then(this?t.bind(this):t):e}function vg(t){let e=gn+1,n=xt.length;for(;e<n;){const s=e+n>>>1,r=xt[s],i=Hr(r);i<t||i===t&&r.flags&2?e=s+1:n=s}return e}function kc(t){if(!(t.flags&1)){const e=Hr(t),n=xt[xt.length-1];!n||!(t.flags&2)&&e>=Hr(n)?xt.push(t):xt.splice(vg(e),0,t),t.flags|=1,Cf()}}function Cf(){Vi||(Vi=Nf.then(If))}function wg(t){ue(t)?Qs.push(...t):Yn&&t.id===-1?Yn.splice(Ls+1,0,t):t.flags&1||(Qs.push(t),t.flags|=1),Cf()}function Jl(t,e,n=gn+1){for(;n<xt.length;n++){const s=xt[n];if(s&&s.flags&2){if(t&&s.id!==t.uid)continue;xt.splice(n,1),n--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function xf(t){if(Qs.length){const e=[...new Set(Qs)].sort((n,s)=>Hr(n)-Hr(s));if(Qs.length=0,Yn){Yn.push(...e);return}for(Yn=e,Ls=0;Ls<Yn.length;Ls++){const n=Yn[Ls];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}Yn=null,Ls=0}}const Hr=t=>t.id==null?t.flags&2?-1:1/0:t.id;function If(t){try{for(gn=0;gn<xt.length;gn++){const e=xt[gn];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),ei(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;gn<xt.length;gn++){const e=xt[gn];e&&(e.flags&=-2)}gn=-1,xt.length=0,xf(),Vi=null,(xt.length||Qs.length)&&If()}}let lt=null,Pf=null;function Li(t){const e=lt;return lt=t,Pf=t&&t.type.__scopeId||null,e}function Ag(t,e=lt,n){if(!e||t._n)return t;const s=(...r)=>{s._d&&au(-1);const i=Li(e);let o;try{o=t(...r)}finally{Li(i),s._d&&au(1)}return o};return s._n=!0,s._c=!0,s._d=!0,s}function Xl(t,e){if(lt===null)return t;const n=wo(lt),s=t.dirs||(t.dirs=[]);for(let r=0;r<e.length;r++){let[i,o,a,c=Pe]=e[r];i&&(fe(i)&&(i={mounted:i,updated:i}),i.deep&&Bn(o),s.push({dir:i,instance:n,value:o,oldValue:void 0,arg:a,modifiers:c}))}return t}function us(t,e,n,s){const r=t.dirs,i=e&&e.dirs;for(let o=0;o<r.length;o++){const a=r[o];i&&(a.oldValue=i[o].value);let c=a.dir[s];c&&(is(),wn(c,n,8,[t.el,a,t,e]),os())}}const Tg=Symbol("_vte"),Mg=t=>t.__isTeleport;function Oc(t,e){t.shapeFlag&6&&t.component?(t.transition=e,Oc(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function kf(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function Ui(t,e,n,s,r=!1){if(ue(t)){t.forEach((p,g)=>Ui(p,e&&(ue(e)?e[g]:e),n,s,r));return}if(Ys(s)&&!r){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&Ui(t,e,n,s.component.subTree);return}const i=s.shapeFlag&4?wo(s.component):s.el,o=r?null:i,{i:a,r:c}=t,l=e&&e.r,u=a.refs===Pe?a.refs={}:a.refs,h=a.setupState,f=Me(h),d=h===Pe?()=>!1:p=>Se(f,p);if(l!=null&&l!==c&&(Je(l)?(u[l]=null,d(l)&&(h[l]=null)):ut(l)&&(l.value=null)),fe(c))ei(c,a,12,[o,u]);else{const p=Je(c),g=ut(c);if(p||g){const m=()=>{if(t.f){const _=p?d(c)?h[c]:u[c]:c.value;r?ue(_)&&Tc(_,i):ue(_)?_.includes(i)||_.push(i):p?(u[c]=[i],d(c)&&(h[c]=u[c])):(c.value=[i],t.k&&(u[t.k]=c.value))}else p?(u[c]=o,d(c)&&(h[c]=o)):g&&(c.value=o,t.k&&(u[t.k]=o))};o?(m.id=-1,jt(m,n)):m()}}}po().requestIdleCallback;po().cancelIdleCallback;const Ys=t=>!!t.type.__asyncLoader,Of=t=>t.type.__isKeepAlive;function Sg(t,e){Rf(t,"a",e)}function Eg(t,e){Rf(t,"da",e)}function Rf(t,e,n=wt){const s=t.__wdc||(t.__wdc=()=>{let r=n;for(;r;){if(r.isDeactivated)return;r=r.parent}return t()});if(yo(e,s,n),n){let r=n.parent;for(;r&&r.parent;)Of(r.parent.vnode)&&Ng(s,e,n,r),r=r.parent}}function Ng(t,e,n,s){const r=yo(e,t,s,!0);Df(()=>{Tc(s[e],r)},n)}function yo(t,e,n=wt,s=!1){if(n){const r=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...o)=>{is();const a=ni(n),c=wn(e,n,t,o);return a(),os(),c});return s?r.unshift(i):r.push(i),i}}const $n=t=>(e,n=wt)=>{(!Qr||t==="sp")&&yo(t,(...s)=>e(...s),n)},Cg=$n("bm"),ti=$n("m"),xg=$n("bu"),Ig=$n("u"),Pg=$n("bum"),Df=$n("um"),kg=$n("sp"),Og=$n("rtg"),Rg=$n("rtc");function Dg(t,e=wt){yo("ec",t,e)}const Fg=Symbol.for("v-ndc");function ms(t,e,n,s){let r;const i=n,o=ue(t);if(o||Je(t)){const a=o&&zs(t);let c=!1;a&&(c=!Qt(t),t=mo(t)),r=new Array(t.length);for(let l=0,u=t.length;l<u;l++)r[l]=e(c?vt(t[l]):t[l],l,void 0,i)}else if(typeof t=="number"){r=new Array(t);for(let a=0;a<t;a++)r[a]=e(a+1,a,void 0,i)}else if(qe(t))if(t[Symbol.iterator])r=Array.from(t,(a,c)=>e(a,c,void 0,i));else{const a=Object.keys(t);r=new Array(a.length);for(let c=0,l=a.length;c<l;c++){const u=a[c];r[c]=e(t[u],u,c,i)}}else r=[];return r}function Bg(t,e,n={},s,r){if(lt.ce||lt.parent&&Ys(lt.parent)&&lt.parent.ce)return Xe(),Ha(tt,null,[on("slot",n,s&&s())],64);let i=t[e];i&&i._c&&(i._d=!1),Xe();const o=i&&Ff(i(n)),a=n.key||o&&o.key,c=Ha(tt,{key:(a&&!qn(a)?a:`_${e}`)+(!o&&s?"_fb":"")},o||(s?s():[]),o&&t._===1?64:-2);return i&&i._c&&(i._d=!0),c}function Ff(t){return t.some(e=>Bc(e)?!(e.type===ns||e.type===tt&&!Ff(e.children)):!0)?t:null}const qa=t=>t?sd(t)?wo(t):qa(t.parent):null,Rr=ht(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>qa(t.parent),$root:t=>qa(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>Rc(t),$forceUpdate:t=>t.f||(t.f=()=>{kc(t.update)}),$nextTick:t=>t.n||(t.n=gs.bind(t.proxy)),$watch:t=>o0.bind(t)}),ia=(t,e)=>t!==Pe&&!t.__isScriptSetup&&Se(t,e),Vg={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:s,data:r,props:i,accessCache:o,type:a,appContext:c}=t;let l;if(e[0]!=="$"){const d=o[e];if(d!==void 0)switch(d){case 1:return s[e];case 2:return r[e];case 4:return n[e];case 3:return i[e]}else{if(ia(s,e))return o[e]=1,s[e];if(r!==Pe&&Se(r,e))return o[e]=2,r[e];if((l=t.propsOptions[0])&&Se(l,e))return o[e]=3,i[e];if(n!==Pe&&Se(n,e))return o[e]=4,n[e];$a&&(o[e]=0)}}const u=Rr[e];let h,f;if(u)return e==="$attrs"&&bt(t.attrs,"get",""),u(t);if((h=a.__cssModules)&&(h=h[e]))return h;if(n!==Pe&&Se(n,e))return o[e]=4,n[e];if(f=c.config.globalProperties,Se(f,e))return f[e]},set({_:t},e,n){const{data:s,setupState:r,ctx:i}=t;return ia(r,e)?(r[e]=n,!0):s!==Pe&&Se(s,e)?(s[e]=n,!0):Se(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:s,appContext:r,propsOptions:i}},o){let a;return!!n[o]||t!==Pe&&Se(t,o)||ia(e,o)||(a=i[0])&&Se(a,o)||Se(s,o)||Se(Rr,o)||Se(r.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:Se(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function eu(t){return ue(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let $a=!0;function Lg(t){const e=Rc(t),n=t.proxy,s=t.ctx;$a=!1,e.beforeCreate&&tu(e.beforeCreate,t,"bc");const{data:r,computed:i,methods:o,watch:a,provide:c,inject:l,created:u,beforeMount:h,mounted:f,beforeUpdate:d,updated:p,activated:g,deactivated:m,beforeDestroy:_,beforeUnmount:w,destroyed:A,unmounted:b,render:y,renderTracked:M,renderTriggered:C,errorCaptured:E,serverPrefetch:B,expose:x,inheritAttrs:O,components:k,directives:G,filters:Q}=e;if(l&&Ug(l,s,null),o)for(const W in o){const K=o[W];fe(K)&&(s[W]=K.bind(n))}if(r){const W=r.call(n,n);qe(W)&&(t.data=He(W))}if($a=!0,i)for(const W in i){const K=i[W],Z=fe(K)?K.bind(n,n):fe(K.get)?K.get.bind(n,n):vn,ae=!fe(K)&&fe(K.set)?K.set.bind(n):vn,ne=pe({get:Z,set:ae});Object.defineProperty(s,W,{enumerable:!0,configurable:!0,get:()=>ne.value,set:de=>ne.value=de})}if(a)for(const W in a)Bf(a[W],s,n,W);if(c){const W=fe(c)?c.call(n):c;Reflect.ownKeys(W).forEach(K=>{Hg(K,W[K])})}u&&tu(u,t,"c");function H(W,K){ue(K)?K.forEach(Z=>W(Z.bind(n))):K&&W(K.bind(n))}if(H(Cg,h),H(ti,f),H(xg,d),H(Ig,p),H(Sg,g),H(Eg,m),H(Dg,E),H(Rg,M),H(Og,C),H(Pg,w),H(Df,b),H(kg,B),ue(x))if(x.length){const W=t.exposed||(t.exposed={});x.forEach(K=>{Object.defineProperty(W,K,{get:()=>n[K],set:Z=>n[K]=Z})})}else t.exposed||(t.exposed={});y&&t.render===vn&&(t.render=y),O!=null&&(t.inheritAttrs=O),k&&(t.components=k),G&&(t.directives=G),B&&kf(t)}function Ug(t,e,n=vn){ue(t)&&(t=Wa(t));for(const s in t){const r=t[s];let i;qe(r)?"default"in r?i=Ii(r.from||s,r.default,!0):i=Ii(r.from||s):i=Ii(r),ut(i)?Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[s]=i}}function tu(t,e,n){wn(ue(t)?t.map(s=>s.bind(e.proxy)):t.bind(e.proxy),e,n)}function Bf(t,e,n,s){let r=s.includes(".")?Kf(n,s):()=>n[s];if(Je(t)){const i=e[t];fe(i)&&et(r,i)}else if(fe(t))et(r,t.bind(n));else if(qe(t))if(ue(t))t.forEach(i=>Bf(i,e,n,s));else{const i=fe(t.handler)?t.handler.bind(n):e[t.handler];fe(i)&&et(r,i,t)}}function Rc(t){const e=t.type,{mixins:n,extends:s}=e,{mixins:r,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,a=i.get(e);let c;return a?c=a:!r.length&&!n&&!s?c=e:(c={},r.length&&r.forEach(l=>ji(c,l,o,!0)),ji(c,e,o)),qe(e)&&i.set(e,c),c}function ji(t,e,n,s=!1){const{mixins:r,extends:i}=e;i&&ji(t,i,n,!0),r&&r.forEach(o=>ji(t,o,n,!0));for(const o in e)if(!(s&&o==="expose")){const a=jg[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const jg={data:nu,props:su,emits:su,methods:Ir,computed:Ir,beforeCreate:Nt,created:Nt,beforeMount:Nt,mounted:Nt,beforeUpdate:Nt,updated:Nt,beforeDestroy:Nt,beforeUnmount:Nt,destroyed:Nt,unmounted:Nt,activated:Nt,deactivated:Nt,errorCaptured:Nt,serverPrefetch:Nt,components:Ir,directives:Ir,watch:$g,provide:nu,inject:qg};function nu(t,e){return e?t?function(){return ht(fe(t)?t.call(this,this):t,fe(e)?e.call(this,this):e)}:e:t}function qg(t,e){return Ir(Wa(t),Wa(e))}function Wa(t){if(ue(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Nt(t,e){return t?[...new Set([].concat(t,e))]:e}function Ir(t,e){return t?ht(Object.create(null),t,e):e}function su(t,e){return t?ue(t)&&ue(e)?[...new Set([...t,...e])]:ht(Object.create(null),eu(t),eu(e??{})):e}function $g(t,e){if(!t)return e;if(!e)return t;const n=ht(Object.create(null),t);for(const s in e)n[s]=Nt(t[s],e[s]);return n}function Vf(){return{app:null,config:{isNativeTag:Rm,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Wg=0;function Gg(t,e){return function(s,r=null){fe(s)||(s=ht({},s)),r!=null&&!qe(r)&&(r=null);const i=Vf(),o=new WeakSet,a=[];let c=!1;const l=i.app={_uid:Wg++,_component:s,_props:r,_container:null,_context:i,_instance:null,version:E0,get config(){return i.config},set config(u){},use(u,...h){return o.has(u)||(u&&fe(u.install)?(o.add(u),u.install(l,...h)):fe(u)&&(o.add(u),u(l,...h))),l},mixin(u){return i.mixins.includes(u)||i.mixins.push(u),l},component(u,h){return h?(i.components[u]=h,l):i.components[u]},directive(u,h){return h?(i.directives[u]=h,l):i.directives[u]},mount(u,h,f){if(!c){const d=l._ceVNode||on(s,r);return d.appContext=i,f===!0?f="svg":f===!1&&(f=void 0),h&&e?e(d,u):t(d,u,f),c=!0,l._container=u,u.__vue_app__=l,wo(d.component)}},onUnmount(u){a.push(u)},unmount(){c&&(wn(a,l._instance,16),t(null,l._container),delete l._container.__vue_app__)},provide(u,h){return i.provides[u]=h,l},runWithContext(u){const h=Ks;Ks=l;try{return u()}finally{Ks=h}}};return l}}let Ks=null;function Hg(t,e){if(wt){let n=wt.provides;const s=wt.parent&&wt.parent.provides;s===n&&(n=wt.provides=Object.create(s)),n[t]=e}}function Ii(t,e,n=!1){const s=wt||lt;if(s||Ks){const r=Ks?Ks._context.provides:s?s.parent==null?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(r&&t in r)return r[t];if(arguments.length>1)return n&&fe(e)?e.call(s&&s.proxy):e}}const Lf={},Uf=()=>Object.create(Lf),jf=t=>Object.getPrototypeOf(t)===Lf;function zg(t,e,n,s=!1){const r={},i=Uf();t.propsDefaults=Object.create(null),qf(t,e,r,i);for(const o in t.propsOptions[0])o in r||(r[o]=void 0);n?t.props=s?r:Mn(r):t.type.props?t.props=r:t.props=i,t.attrs=i}function Qg(t,e,n,s){const{props:r,attrs:i,vnode:{patchFlag:o}}=t,a=Me(r),[c]=t.propsOptions;let l=!1;if((s||o>0)&&!(o&16)){if(o&8){const u=t.vnode.dynamicProps;for(let h=0;h<u.length;h++){let f=u[h];if(bo(t.emitsOptions,f))continue;const d=e[f];if(c)if(Se(i,f))d!==i[f]&&(i[f]=d,l=!0);else{const p=es(f);r[p]=Ga(c,a,p,d,t,!1)}else d!==i[f]&&(i[f]=d,l=!0)}}}else{qf(t,e,r,i)&&(l=!0);let u;for(const h in a)(!e||!Se(e,h)&&((u=Es(h))===h||!Se(e,u)))&&(c?n&&(n[h]!==void 0||n[u]!==void 0)&&(r[h]=Ga(c,a,h,void 0,t,!0)):delete r[h]);if(i!==a)for(const h in i)(!e||!Se(e,h))&&(delete i[h],l=!0)}l&&Fn(t.attrs,"set","")}function qf(t,e,n,s){const[r,i]=t.propsOptions;let o=!1,a;if(e)for(let c in e){if(Pr(c))continue;const l=e[c];let u;r&&Se(r,u=es(c))?!i||!i.includes(u)?n[u]=l:(a||(a={}))[u]=l:bo(t.emitsOptions,c)||(!(c in s)||l!==s[c])&&(s[c]=l,o=!0)}if(i){const c=Me(n),l=a||Pe;for(let u=0;u<i.length;u++){const h=i[u];n[h]=Ga(r,c,h,l[h],t,!Se(l,h))}}return o}function Ga(t,e,n,s,r,i){const o=t[n];if(o!=null){const a=Se(o,"default");if(a&&s===void 0){const c=o.default;if(o.type!==Function&&!o.skipFactory&&fe(c)){const{propsDefaults:l}=r;if(n in l)s=l[n];else{const u=ni(r);s=l[n]=c.call(null,e),u()}}else s=c;r.ce&&r.ce._setProp(n,s)}o[0]&&(i&&!a?s=!1:o[1]&&(s===""||s===Es(n))&&(s=!0))}return s}const Yg=new WeakMap;function $f(t,e,n=!1){const s=n?Yg:e.propsCache,r=s.get(t);if(r)return r;const i=t.props,o={},a=[];let c=!1;if(!fe(t)){const u=h=>{c=!0;const[f,d]=$f(h,e,!0);ht(o,f),d&&a.push(...d)};!n&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!i&&!c)return qe(t)&&s.set(t,Gs),Gs;if(ue(i))for(let u=0;u<i.length;u++){const h=es(i[u]);ru(h)&&(o[h]=Pe)}else if(i)for(const u in i){const h=es(u);if(ru(h)){const f=i[u],d=o[h]=ue(f)||fe(f)?{type:f}:ht({},f),p=d.type;let g=!1,m=!0;if(ue(p))for(let _=0;_<p.length;++_){const w=p[_],A=fe(w)&&w.name;if(A==="Boolean"){g=!0;break}else A==="String"&&(m=!1)}else g=fe(p)&&p.name==="Boolean";d[0]=g,d[1]=m,(g||Se(d,"default"))&&a.push(h)}}const l=[o,a];return qe(t)&&s.set(t,l),l}function ru(t){return t[0]!=="$"&&!Pr(t)}const Wf=t=>t[0]==="_"||t==="$stable",Dc=t=>ue(t)?t.map(_n):[_n(t)],Kg=(t,e,n)=>{if(e._n)return e;const s=Ag((...r)=>Dc(e(...r)),n);return s._c=!1,s},Gf=(t,e,n)=>{const s=t._ctx;for(const r in t){if(Wf(r))continue;const i=t[r];if(fe(i))e[r]=Kg(r,i,s);else if(i!=null){const o=Dc(i);e[r]=()=>o}}},Hf=(t,e)=>{const n=Dc(e);t.slots.default=()=>n},zf=(t,e,n)=>{for(const s in e)(n||s!=="_")&&(t[s]=e[s])},Zg=(t,e,n)=>{const s=t.slots=Uf();if(t.vnode.shapeFlag&32){const r=e._;r?(zf(s,e,n),n&&rf(s,"_",r,!0)):Gf(e,s)}else e&&Hf(t,e)},Jg=(t,e,n)=>{const{vnode:s,slots:r}=t;let i=!0,o=Pe;if(s.shapeFlag&32){const a=e._;a?n&&a===1?i=!1:zf(r,e,n):(i=!e.$stable,Gf(e,r)),o=e}else e&&(Hf(t,e),o={default:1});if(i)for(const a in r)!Wf(a)&&o[a]==null&&delete r[a]},jt=d0;function Xg(t){return e0(t)}function e0(t,e){const n=po();n.__VUE__=!0;const{insert:s,remove:r,patchProp:i,createElement:o,createText:a,createComment:c,setText:l,setElementText:u,parentNode:h,nextSibling:f,setScopeId:d=vn,insertStaticContent:p}=t,g=(v,S,T,I=null,R=null,D=null,V=void 0,L=null,q=!!S.dynamicChildren)=>{if(v===S)return;v&&!wr(v,S)&&(I=Qe(v),de(v,R,D,!0),v=null),S.patchFlag===-2&&(q=!1,S.dynamicChildren=null);const{type:U,ref:te,shapeFlag:Y}=S;switch(U){case vo:m(v,S,T,I);break;case ns:_(v,S,T,I);break;case ca:v==null&&w(S,T,I,V);break;case tt:k(v,S,T,I,R,D,V,L,q);break;default:Y&1?y(v,S,T,I,R,D,V,L,q):Y&6?G(v,S,T,I,R,D,V,L,q):(Y&64||Y&128)&&U.process(v,S,T,I,R,D,V,L,q,Bt)}te!=null&&R&&Ui(te,v&&v.ref,D,S||v,!S)},m=(v,S,T,I)=>{if(v==null)s(S.el=a(S.children),T,I);else{const R=S.el=v.el;S.children!==v.children&&l(R,S.children)}},_=(v,S,T,I)=>{v==null?s(S.el=c(S.children||""),T,I):S.el=v.el},w=(v,S,T,I)=>{[v.el,v.anchor]=p(v.children,S,T,I,v.el,v.anchor)},A=({el:v,anchor:S},T,I)=>{let R;for(;v&&v!==S;)R=f(v),s(v,T,I),v=R;s(S,T,I)},b=({el:v,anchor:S})=>{let T;for(;v&&v!==S;)T=f(v),r(v),v=T;r(S)},y=(v,S,T,I,R,D,V,L,q)=>{S.type==="svg"?V="svg":S.type==="math"&&(V="mathml"),v==null?M(S,T,I,R,D,V,L,q):B(v,S,R,D,V,L,q)},M=(v,S,T,I,R,D,V,L)=>{let q,U;const{props:te,shapeFlag:Y,transition:X,dirs:ce}=v;if(q=v.el=o(v.type,D,te&&te.is,te),Y&8?u(q,v.children):Y&16&&E(v.children,q,null,I,R,oa(v,D),V,L),ce&&us(v,null,I,"created"),C(q,v,v.scopeId,V,I),te){for(const ke in te)ke!=="value"&&!Pr(ke)&&i(q,ke,null,te[ke],D,I);"value"in te&&i(q,"value",null,te.value,D),(U=te.onVnodeBeforeMount)&&mn(U,I,v)}ce&&us(v,null,I,"beforeMount");const ve=t0(R,X);ve&&X.beforeEnter(q),s(q,S,T),((U=te&&te.onVnodeMounted)||ve||ce)&&jt(()=>{U&&mn(U,I,v),ve&&X.enter(q),ce&&us(v,null,I,"mounted")},R)},C=(v,S,T,I,R)=>{if(T&&d(v,T),I)for(let D=0;D<I.length;D++)d(v,I[D]);if(R){let D=R.subTree;if(S===D||Jf(D.type)&&(D.ssContent===S||D.ssFallback===S)){const V=R.vnode;C(v,V,V.scopeId,V.slotScopeIds,R.parent)}}},E=(v,S,T,I,R,D,V,L,q=0)=>{for(let U=q;U<v.length;U++){const te=v[U]=L?Kn(v[U]):_n(v[U]);g(null,te,S,T,I,R,D,V,L)}},B=(v,S,T,I,R,D,V)=>{const L=S.el=v.el;let{patchFlag:q,dynamicChildren:U,dirs:te}=S;q|=v.patchFlag&16;const Y=v.props||Pe,X=S.props||Pe;let ce;if(T&&hs(T,!1),(ce=X.onVnodeBeforeUpdate)&&mn(ce,T,S,v),te&&us(S,v,T,"beforeUpdate"),T&&hs(T,!0),(Y.innerHTML&&X.innerHTML==null||Y.textContent&&X.textContent==null)&&u(L,""),U?x(v.dynamicChildren,U,L,T,I,oa(S,R),D):V||K(v,S,L,null,T,I,oa(S,R),D,!1),q>0){if(q&16)O(L,Y,X,T,R);else if(q&2&&Y.class!==X.class&&i(L,"class",null,X.class,R),q&4&&i(L,"style",Y.style,X.style,R),q&8){const ve=S.dynamicProps;for(let ke=0;ke<ve.length;ke++){const Ee=ve[ke],Vt=Y[Ee],mt=X[Ee];(mt!==Vt||Ee==="value")&&i(L,Ee,Vt,mt,R,T)}}q&1&&v.children!==S.children&&u(L,S.children)}else!V&&U==null&&O(L,Y,X,T,R);((ce=X.onVnodeUpdated)||te)&&jt(()=>{ce&&mn(ce,T,S,v),te&&us(S,v,T,"updated")},I)},x=(v,S,T,I,R,D,V)=>{for(let L=0;L<S.length;L++){const q=v[L],U=S[L],te=q.el&&(q.type===tt||!wr(q,U)||q.shapeFlag&70)?h(q.el):T;g(q,U,te,null,I,R,D,V,!0)}},O=(v,S,T,I,R)=>{if(S!==T){if(S!==Pe)for(const D in S)!Pr(D)&&!(D in T)&&i(v,D,S[D],null,R,I);for(const D in T){if(Pr(D))continue;const V=T[D],L=S[D];V!==L&&D!=="value"&&i(v,D,L,V,R,I)}"value"in T&&i(v,"value",S.value,T.value,R)}},k=(v,S,T,I,R,D,V,L,q)=>{const U=S.el=v?v.el:a(""),te=S.anchor=v?v.anchor:a("");let{patchFlag:Y,dynamicChildren:X,slotScopeIds:ce}=S;ce&&(L=L?L.concat(ce):ce),v==null?(s(U,T,I),s(te,T,I),E(S.children||[],T,te,R,D,V,L,q)):Y>0&&Y&64&&X&&v.dynamicChildren?(x(v.dynamicChildren,X,T,R,D,V,L),(S.key!=null||R&&S===R.subTree)&&Qf(v,S,!0)):K(v,S,T,te,R,D,V,L,q)},G=(v,S,T,I,R,D,V,L,q)=>{S.slotScopeIds=L,v==null?S.shapeFlag&512?R.ctx.activate(S,T,I,V,q):Q(S,T,I,R,D,V,q):ee(v,S,q)},Q=(v,S,T,I,R,D,V)=>{const L=v.component=v0(v,I,R);if(Of(v)&&(L.ctx.renderer=Bt),w0(L,!1,V),L.asyncDep){if(R&&R.registerDep(L,H,V),!v.el){const q=L.subTree=on(ns);_(null,q,S,T)}}else H(L,v,S,T,R,D,V)},ee=(v,S,T)=>{const I=S.component=v.component;if(h0(v,S,T))if(I.asyncDep&&!I.asyncResolved){W(I,S,T);return}else I.next=S,I.update();else S.el=v.el,I.vnode=S},H=(v,S,T,I,R,D,V)=>{const L=()=>{if(v.isMounted){let{next:Y,bu:X,u:ce,parent:ve,vnode:ke}=v;{const Lt=Yf(v);if(Lt){Y&&(Y.el=ke.el,W(v,Y,V)),Lt.asyncDep.then(()=>{v.isUnmounted||L()});return}}let Ee=Y,Vt;hs(v,!1),Y?(Y.el=ke.el,W(v,Y,V)):Y=ke,X&&ea(X),(Vt=Y.props&&Y.props.onVnodeBeforeUpdate)&&mn(Vt,ve,Y,ke),hs(v,!0);const mt=aa(v),Zt=v.subTree;v.subTree=mt,g(Zt,mt,h(Zt.el),Qe(Zt),v,R,D),Y.el=mt.el,Ee===null&&f0(v,mt.el),ce&&jt(ce,R),(Vt=Y.props&&Y.props.onVnodeUpdated)&&jt(()=>mn(Vt,ve,Y,ke),R)}else{let Y;const{el:X,props:ce}=S,{bm:ve,m:ke,parent:Ee,root:Vt,type:mt}=v,Zt=Ys(S);if(hs(v,!1),ve&&ea(ve),!Zt&&(Y=ce&&ce.onVnodeBeforeMount)&&mn(Y,Ee,S),hs(v,!0),X&&In){const Lt=()=>{v.subTree=aa(v),In(X,v.subTree,v,R,null)};Zt&&mt.__asyncHydrate?mt.__asyncHydrate(X,v,Lt):Lt()}else{Vt.ce&&Vt.ce._injectChildStyle(mt);const Lt=v.subTree=aa(v);g(null,Lt,T,I,v,R,D),S.el=Lt.el}if(ke&&jt(ke,R),!Zt&&(Y=ce&&ce.onVnodeMounted)){const Lt=S;jt(()=>mn(Y,Ee,Lt),R)}(S.shapeFlag&256||Ee&&Ys(Ee.vnode)&&Ee.vnode.shapeFlag&256)&&v.a&&jt(v.a,R),v.isMounted=!0,S=T=I=null}};v.scope.on();const q=v.effect=new uf(L);v.scope.off();const U=v.update=q.run.bind(q),te=v.job=q.runIfDirty.bind(q);te.i=v,te.id=v.uid,q.scheduler=()=>kc(te),hs(v,!0),U()},W=(v,S,T)=>{S.component=v;const I=v.vnode.props;v.vnode=S,v.next=null,Qg(v,S.props,I,T),Jg(v,S.children,T),is(),Jl(v),os()},K=(v,S,T,I,R,D,V,L,q=!1)=>{const U=v&&v.children,te=v?v.shapeFlag:0,Y=S.children,{patchFlag:X,shapeFlag:ce}=S;if(X>0){if(X&128){ae(U,Y,T,I,R,D,V,L,q);return}else if(X&256){Z(U,Y,T,I,R,D,V,L,q);return}}ce&8?(te&16&&Te(U,R,D),Y!==U&&u(T,Y)):te&16?ce&16?ae(U,Y,T,I,R,D,V,L,q):Te(U,R,D,!0):(te&8&&u(T,""),ce&16&&E(Y,T,I,R,D,V,L,q))},Z=(v,S,T,I,R,D,V,L,q)=>{v=v||Gs,S=S||Gs;const U=v.length,te=S.length,Y=Math.min(U,te);let X;for(X=0;X<Y;X++){const ce=S[X]=q?Kn(S[X]):_n(S[X]);g(v[X],ce,T,null,R,D,V,L,q)}U>te?Te(v,R,D,!0,!1,Y):E(S,T,I,R,D,V,L,q,Y)},ae=(v,S,T,I,R,D,V,L,q)=>{let U=0;const te=S.length;let Y=v.length-1,X=te-1;for(;U<=Y&&U<=X;){const ce=v[U],ve=S[U]=q?Kn(S[U]):_n(S[U]);if(wr(ce,ve))g(ce,ve,T,null,R,D,V,L,q);else break;U++}for(;U<=Y&&U<=X;){const ce=v[Y],ve=S[X]=q?Kn(S[X]):_n(S[X]);if(wr(ce,ve))g(ce,ve,T,null,R,D,V,L,q);else break;Y--,X--}if(U>Y){if(U<=X){const ce=X+1,ve=ce<te?S[ce].el:I;for(;U<=X;)g(null,S[U]=q?Kn(S[U]):_n(S[U]),T,ve,R,D,V,L,q),U++}}else if(U>X)for(;U<=Y;)de(v[U],R,D,!0),U++;else{const ce=U,ve=U,ke=new Map;for(U=ve;U<=X;U++){const Ut=S[U]=q?Kn(S[U]):_n(S[U]);Ut.key!=null&&ke.set(Ut.key,U)}let Ee,Vt=0;const mt=X-ve+1;let Zt=!1,Lt=0;const br=new Array(mt);for(U=0;U<mt;U++)br[U]=0;for(U=ce;U<=Y;U++){const Ut=v[U];if(Vt>=mt){de(Ut,R,D,!0);continue}let pn;if(Ut.key!=null)pn=ke.get(Ut.key);else for(Ee=ve;Ee<=X;Ee++)if(br[Ee-ve]===0&&wr(Ut,S[Ee])){pn=Ee;break}pn===void 0?de(Ut,R,D,!0):(br[pn-ve]=U+1,pn>=Lt?Lt=pn:Zt=!0,g(Ut,S[pn],T,null,R,D,V,L,q),Vt++)}const zl=Zt?n0(br):Gs;for(Ee=zl.length-1,U=mt-1;U>=0;U--){const Ut=ve+U,pn=S[Ut],Ql=Ut+1<te?S[Ut+1].el:I;br[U]===0?g(null,pn,T,Ql,R,D,V,L,q):Zt&&(Ee<0||U!==zl[Ee]?ne(pn,T,Ql,2):Ee--)}}},ne=(v,S,T,I,R=null)=>{const{el:D,type:V,transition:L,children:q,shapeFlag:U}=v;if(U&6){ne(v.component.subTree,S,T,I);return}if(U&128){v.suspense.move(S,T,I);return}if(U&64){V.move(v,S,T,Bt);return}if(V===tt){s(D,S,T);for(let Y=0;Y<q.length;Y++)ne(q[Y],S,T,I);s(v.anchor,S,T);return}if(V===ca){A(v,S,T);return}if(I!==2&&U&1&&L)if(I===0)L.beforeEnter(D),s(D,S,T),jt(()=>L.enter(D),R);else{const{leave:Y,delayLeave:X,afterLeave:ce}=L,ve=()=>s(D,S,T),ke=()=>{Y(D,()=>{ve(),ce&&ce()})};X?X(D,ve,ke):ke()}else s(D,S,T)},de=(v,S,T,I=!1,R=!1)=>{const{type:D,props:V,ref:L,children:q,dynamicChildren:U,shapeFlag:te,patchFlag:Y,dirs:X,cacheIndex:ce}=v;if(Y===-2&&(R=!1),L!=null&&Ui(L,null,T,v,!0),ce!=null&&(S.renderCache[ce]=void 0),te&256){S.ctx.deactivate(v);return}const ve=te&1&&X,ke=!Ys(v);let Ee;if(ke&&(Ee=V&&V.onVnodeBeforeUnmount)&&mn(Ee,S,v),te&6)ge(v.component,T,I);else{if(te&128){v.suspense.unmount(T,I);return}ve&&us(v,null,S,"beforeUnmount"),te&64?v.type.remove(v,S,T,Bt,I):U&&!U.hasOnce&&(D!==tt||Y>0&&Y&64)?Te(U,S,T,!1,!0):(D===tt&&Y&384||!R&&te&16)&&Te(q,S,T),I&&pt(v)}(ke&&(Ee=V&&V.onVnodeUnmounted)||ve)&&jt(()=>{Ee&&mn(Ee,S,v),ve&&us(v,null,S,"unmounted")},T)},pt=v=>{const{type:S,el:T,anchor:I,transition:R}=v;if(S===tt){Et(T,I);return}if(S===ca){b(v);return}const D=()=>{r(T),R&&!R.persisted&&R.afterLeave&&R.afterLeave()};if(v.shapeFlag&1&&R&&!R.persisted){const{leave:V,delayLeave:L}=R,q=()=>V(T,D);L?L(v.el,D,q):q()}else D()},Et=(v,S)=>{let T;for(;v!==S;)T=f(v),r(v),v=T;r(S)},ge=(v,S,T)=>{const{bum:I,scope:R,job:D,subTree:V,um:L,m:q,a:U}=v;iu(q),iu(U),I&&ea(I),R.stop(),D&&(D.flags|=8,de(V,v,S,T)),L&&jt(L,S),jt(()=>{v.isUnmounted=!0},S),S&&S.pendingBranch&&!S.isUnmounted&&v.asyncDep&&!v.asyncResolved&&v.suspenseId===S.pendingId&&(S.deps--,S.deps===0&&S.resolve())},Te=(v,S,T,I=!1,R=!1,D=0)=>{for(let V=D;V<v.length;V++)de(v[V],S,T,I,R)},Qe=v=>{if(v.shapeFlag&6)return Qe(v.component.subTree);if(v.shapeFlag&128)return v.suspense.next();const S=f(v.anchor||v.el),T=S&&S[Tg];return T?f(T):S};let J=!1;const dn=(v,S,T)=>{v==null?S._vnode&&de(S._vnode,null,null,!0):g(S._vnode||null,v,S,null,null,null,T),S._vnode=v,J||(J=!0,Jl(),xf(),J=!1)},Bt={p:g,um:de,m:ne,r:pt,mt:Q,mc:E,pc:K,pbc:x,n:Qe,o:t};let xn,In;return{render:dn,hydrate:xn,createApp:Gg(dn,xn)}}function oa({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function hs({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function t0(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Qf(t,e,n=!1){const s=t.children,r=e.children;if(ue(s)&&ue(r))for(let i=0;i<s.length;i++){const o=s[i];let a=r[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=r[i]=Kn(r[i]),a.el=o.el),!n&&a.patchFlag!==-2&&Qf(o,a)),a.type===vo&&(a.el=o.el)}}function n0(t){const e=t.slice(),n=[0];let s,r,i,o,a;const c=t.length;for(s=0;s<c;s++){const l=t[s];if(l!==0){if(r=n[n.length-1],t[r]<l){e[s]=r,n.push(s);continue}for(i=0,o=n.length-1;i<o;)a=i+o>>1,t[n[a]]<l?i=a+1:o=a;l<t[n[i]]&&(i>0&&(e[s]=n[i-1]),n[i]=s)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=e[o];return n}function Yf(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Yf(e)}function iu(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const s0=Symbol.for("v-scx"),r0=()=>Ii(s0);function i0(t,e){return Fc(t,null,e)}function et(t,e,n){return Fc(t,e,n)}function Fc(t,e,n=Pe){const{immediate:s,deep:r,flush:i,once:o}=n,a=ht({},n),c=e&&s||!e&&i!=="post";let l;if(Qr){if(i==="sync"){const d=r0();l=d.__watcherHandles||(d.__watcherHandles=[])}else if(!c){const d=()=>{};return d.stop=vn,d.resume=vn,d.pause=vn,d}}const u=wt;a.call=(d,p,g)=>wn(d,u,p,g);let h=!1;i==="post"?a.scheduler=d=>{jt(d,u&&u.suspense)}:i!=="sync"&&(h=!0,a.scheduler=(d,p)=>{p?d():kc(d)}),a.augmentJob=d=>{e&&(d.flags|=4),h&&(d.flags|=2,u&&(d.id=u.uid,d.i=u))};const f=yg(t,e,a);return Qr&&(l?l.push(f):c&&f()),f}function o0(t,e,n){const s=this.proxy,r=Je(t)?t.includes(".")?Kf(s,t):()=>s[t]:t.bind(s,s);let i;fe(e)?i=e:(i=e.handler,n=e);const o=ni(this),a=Fc(r,i.bind(s),n);return o(),a}function Kf(t,e){const n=e.split(".");return()=>{let s=t;for(let r=0;r<n.length&&s;r++)s=s[n[r]];return s}}const a0=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${es(e)}Modifiers`]||t[`${Es(e)}Modifiers`];function c0(t,e,...n){if(t.isUnmounted)return;const s=t.vnode.props||Pe;let r=n;const i=e.startsWith("update:"),o=i&&a0(s,e.slice(7));o&&(o.trim&&(r=n.map(u=>Je(u)?u.trim():u)),o.number&&(r=n.map(Lm)));let a,c=s[a=Xo(e)]||s[a=Xo(es(e))];!c&&i&&(c=s[a=Xo(Es(e))]),c&&wn(c,t,6,r);const l=s[a+"Once"];if(l){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,wn(l,t,6,r)}}function Zf(t,e,n=!1){const s=e.emitsCache,r=s.get(t);if(r!==void 0)return r;const i=t.emits;let o={},a=!1;if(!fe(t)){const c=l=>{const u=Zf(l,e,!0);u&&(a=!0,ht(o,u))};!n&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}return!i&&!a?(qe(t)&&s.set(t,null),null):(ue(i)?i.forEach(c=>o[c]=null):ht(o,i),qe(t)&&s.set(t,o),o)}function bo(t,e){return!t||!uo(e)?!1:(e=e.slice(2).replace(/Once$/,""),Se(t,e[0].toLowerCase()+e.slice(1))||Se(t,Es(e))||Se(t,e))}function aa(t){const{type:e,vnode:n,proxy:s,withProxy:r,propsOptions:[i],slots:o,attrs:a,emit:c,render:l,renderCache:u,props:h,data:f,setupState:d,ctx:p,inheritAttrs:g}=t,m=Li(t);let _,w;try{if(n.shapeFlag&4){const b=r||s,y=b;_=_n(l.call(y,b,u,h,d,f,p)),w=a}else{const b=e;_=_n(b.length>1?b(h,{attrs:a,slots:o,emit:c}):b(h,null)),w=e.props?a:l0(a)}}catch(b){Dr.length=0,_o(b,t,1),_=on(ns)}let A=_;if(w&&g!==!1){const b=Object.keys(w),{shapeFlag:y}=A;b.length&&y&7&&(i&&b.some(Ac)&&(w=u0(w,i)),A=sr(A,w,!1,!0))}return n.dirs&&(A=sr(A,null,!1,!0),A.dirs=A.dirs?A.dirs.concat(n.dirs):n.dirs),n.transition&&Oc(A,n.transition),_=A,Li(m),_}const l0=t=>{let e;for(const n in t)(n==="class"||n==="style"||uo(n))&&((e||(e={}))[n]=t[n]);return e},u0=(t,e)=>{const n={};for(const s in t)(!Ac(s)||!(s.slice(9)in e))&&(n[s]=t[s]);return n};function h0(t,e,n){const{props:s,children:r,component:i}=t,{props:o,children:a,patchFlag:c}=e,l=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return s?ou(s,o,l):!!o;if(c&8){const u=e.dynamicProps;for(let h=0;h<u.length;h++){const f=u[h];if(o[f]!==s[f]&&!bo(l,f))return!0}}}else return(r||a)&&(!a||!a.$stable)?!0:s===o?!1:s?o?ou(s,o,l):!0:!!o;return!1}function ou(t,e,n){const s=Object.keys(e);if(s.length!==Object.keys(t).length)return!0;for(let r=0;r<s.length;r++){const i=s[r];if(e[i]!==t[i]&&!bo(n,i))return!0}return!1}function f0({vnode:t,parent:e},n){for(;e;){const s=e.subTree;if(s.suspense&&s.suspense.activeBranch===t&&(s.el=t.el),s===t)(t=e.vnode).el=n,e=e.parent;else break}}const Jf=t=>t.__isSuspense;function d0(t,e){e&&e.pendingBranch?ue(t)?e.effects.push(...t):e.effects.push(t):wg(t)}const tt=Symbol.for("v-fgt"),vo=Symbol.for("v-txt"),ns=Symbol.for("v-cmt"),ca=Symbol.for("v-stc"),Dr=[];let qt=null;function Xe(t=!1){Dr.push(qt=t?null:[])}function p0(){Dr.pop(),qt=Dr[Dr.length-1]||null}let zr=1;function au(t,e=!1){zr+=t,t<0&&qt&&e&&(qt.hasOnce=!0)}function Xf(t){return t.dynamicChildren=zr>0?qt||Gs:null,p0(),zr>0&&qt&&qt.push(t),t}function _t(t,e,n,s,r,i){return Xf(oe(t,e,n,s,r,i,!0))}function Ha(t,e,n,s,r){return Xf(on(t,e,n,s,r,!0))}function Bc(t){return t?t.__v_isVNode===!0:!1}function wr(t,e){return t.type===e.type&&t.key===e.key}const ed=({key:t})=>t??null,Pi=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?Je(t)||ut(t)||fe(t)?{i:lt,r:t,k:e,f:!!n}:t:null);function oe(t,e=null,n=null,s=0,r=null,i=t===tt?0:1,o=!1,a=!1){const c={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&ed(e),ref:e&&Pi(e),scopeId:Pf,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:s,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:lt};return a?(Vc(c,n),i&128&&t.normalize(c)):n&&(c.shapeFlag|=Je(n)?8:16),zr>0&&!o&&qt&&(c.patchFlag>0||i&6)&&c.patchFlag!==32&&qt.push(c),c}const on=m0;function m0(t,e=null,n=null,s=0,r=null,i=!1){if((!t||t===Fg)&&(t=ns),Bc(t)){const a=sr(t,e,!0);return n&&Vc(a,n),zr>0&&!i&&qt&&(a.shapeFlag&6?qt[qt.indexOf(t)]=a:qt.push(a)),a.patchFlag=-2,a}if(S0(t)&&(t=t.__vccOpts),e){e=g0(e);let{class:a,style:c}=e;a&&!Je(a)&&(e.class=Xr(a)),qe(c)&&(Pc(c)&&!ue(c)&&(c=ht({},c)),e.style=it(c))}const o=Je(t)?1:Jf(t)?128:Mg(t)?64:qe(t)?4:fe(t)?2:0;return oe(t,e,n,s,r,o,i,!0)}function g0(t){return t?Pc(t)||jf(t)?ht({},t):t:null}function sr(t,e,n=!1,s=!1){const{props:r,ref:i,patchFlag:o,children:a,transition:c}=t,l=e?_0(r||{},e):r,u={__v_isVNode:!0,__v_skip:!0,type:t.type,props:l,key:l&&ed(l),ref:e&&e.ref?n&&i?ue(i)?i.concat(Pi(e)):[i,Pi(e)]:Pi(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==tt?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:c,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&sr(t.ssContent),ssFallback:t.ssFallback&&sr(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return c&&s&&Oc(u,c.clone(u)),u}function td(t=" ",e=0){return on(vo,null,t,e)}function ki(t="",e=!1){return e?(Xe(),Ha(ns,null,t)):on(ns,null,t)}function _n(t){return t==null||typeof t=="boolean"?on(ns):ue(t)?on(tt,null,t.slice()):Bc(t)?Kn(t):on(vo,null,String(t))}function Kn(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:sr(t)}function Vc(t,e){let n=0;const{shapeFlag:s}=t;if(e==null)e=null;else if(ue(e))n=16;else if(typeof e=="object")if(s&65){const r=e.default;r&&(r._c&&(r._d=!1),Vc(t,r()),r._c&&(r._d=!0));return}else{n=32;const r=e._;!r&&!jf(e)?e._ctx=lt:r===3&&lt&&(lt.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else fe(e)?(e={default:e,_ctx:lt},n=32):(e=String(e),s&64?(n=16,e=[td(e)]):n=8);t.children=e,t.shapeFlag|=n}function _0(...t){const e={};for(let n=0;n<t.length;n++){const s=t[n];for(const r in s)if(r==="class")e.class!==s.class&&(e.class=Xr([e.class,s.class]));else if(r==="style")e.style=it([e.style,s.style]);else if(uo(r)){const i=e[r],o=s[r];o&&i!==o&&!(ue(i)&&i.includes(o))&&(e[r]=i?[].concat(i,o):o)}else r!==""&&(e[r]=s[r])}return e}function mn(t,e,n,s=null){wn(t,e,7,[n,s])}const y0=Vf();let b0=0;function v0(t,e,n){const s=t.type,r=(e?e.appContext:t.appContext)||y0,i={uid:b0++,vnode:t,type:s,parent:e,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Hm(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(r.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:$f(s,r),emitsOptions:Zf(s,r),emit:null,emitted:null,propsDefaults:Pe,inheritAttrs:s.inheritAttrs,ctx:Pe,data:Pe,props:Pe,attrs:Pe,slots:Pe,refs:Pe,setupState:Pe,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=c0.bind(null,i),t.ce&&t.ce(i),i}let wt=null;const nd=()=>wt||lt;let qi,za;{const t=po(),e=(n,s)=>{let r;return(r=t[n])||(r=t[n]=[]),r.push(s),i=>{r.length>1?r.forEach(o=>o(i)):r[0](i)}};qi=e("__VUE_INSTANCE_SETTERS__",n=>wt=n),za=e("__VUE_SSR_SETTERS__",n=>Qr=n)}const ni=t=>{const e=wt;return qi(t),t.scope.on(),()=>{t.scope.off(),qi(e)}},cu=()=>{wt&&wt.scope.off(),qi(null)};function sd(t){return t.vnode.shapeFlag&4}let Qr=!1;function w0(t,e=!1,n=!1){e&&za(e);const{props:s,children:r}=t.vnode,i=sd(t);zg(t,s,i,e),Zg(t,r,n);const o=i?A0(t,e):void 0;return e&&za(!1),o}function A0(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,Vg);const{setup:s}=n;if(s){is();const r=t.setupContext=s.length>1?M0(t):null,i=ni(t),o=ei(s,t,0,[t.props,r]),a=ef(o);if(os(),i(),(a||t.sp)&&!Ys(t)&&kf(t),a){if(o.then(cu,cu),e)return o.then(c=>{lu(t,c,e)}).catch(c=>{_o(c,t,0)});t.asyncDep=o}else lu(t,o,e)}else rd(t,e)}function lu(t,e,n){fe(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:qe(e)&&(t.setupState=Ef(e)),rd(t,n)}let uu;function rd(t,e,n){const s=t.type;if(!t.render){if(!e&&uu&&!s.render){const r=s.template||Rc(t).template;if(r){const{isCustomElement:i,compilerOptions:o}=t.appContext.config,{delimiters:a,compilerOptions:c}=s,l=ht(ht({isCustomElement:i,delimiters:a},o),c);s.render=uu(r,l)}}t.render=s.render||vn}{const r=ni(t);is();try{Lg(t)}finally{os(),r()}}}const T0={get(t,e){return bt(t,"get",""),t[e]}};function M0(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,T0),slots:t.slots,emit:t.emit,expose:e}}function wo(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(Ef(Vs(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in Rr)return Rr[n](t)},has(e,n){return n in e||n in Rr}})):t.proxy}function S0(t){return fe(t)&&"__vccOpts"in t}const pe=(t,e)=>gg(t,e,Qr),E0="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Qa;const hu=typeof window<"u"&&window.trustedTypes;if(hu)try{Qa=hu.createPolicy("vue",{createHTML:t=>t})}catch{}const id=Qa?t=>Qa.createHTML(t):t=>t,N0="http://www.w3.org/2000/svg",C0="http://www.w3.org/1998/Math/MathML",Rn=typeof document<"u"?document:null,fu=Rn&&Rn.createElement("template"),x0={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,s)=>{const r=e==="svg"?Rn.createElementNS(N0,t):e==="mathml"?Rn.createElementNS(C0,t):n?Rn.createElement(t,{is:n}):Rn.createElement(t);return t==="select"&&s&&s.multiple!=null&&r.setAttribute("multiple",s.multiple),r},createText:t=>Rn.createTextNode(t),createComment:t=>Rn.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Rn.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,s,r,i){const o=n?n.previousSibling:e.lastChild;if(r&&(r===i||r.nextSibling))for(;e.insertBefore(r.cloneNode(!0),n),!(r===i||!(r=r.nextSibling)););else{fu.innerHTML=id(s==="svg"?`<svg>${t}</svg>`:s==="mathml"?`<math>${t}</math>`:t);const a=fu.content;if(s==="svg"||s==="mathml"){const c=a.firstChild;for(;c.firstChild;)a.appendChild(c.firstChild);a.removeChild(c)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},I0=Symbol("_vtc");function P0(t,e,n){const s=t[I0];s&&(e=(e?[e,...s]:[...s]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const $i=Symbol("_vod"),od=Symbol("_vsh"),du={beforeMount(t,{value:e},{transition:n}){t[$i]=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):Ar(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:s}){!e!=!n&&(s?e?(s.beforeEnter(t),Ar(t,!0),s.enter(t)):s.leave(t,()=>{Ar(t,!1)}):Ar(t,e))},beforeUnmount(t,{value:e}){Ar(t,e)}};function Ar(t,e){t.style.display=e?t[$i]:"none",t[od]=!e}const k0=Symbol(""),O0=/(^|;)\s*display\s*:/;function R0(t,e,n){const s=t.style,r=Je(n);let i=!1;if(n&&!r){if(e)if(Je(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&Oi(s,a,"")}else for(const o in e)n[o]==null&&Oi(s,o,"");for(const o in n)o==="display"&&(i=!0),Oi(s,o,n[o])}else if(r){if(e!==n){const o=s[k0];o&&(n+=";"+o),s.cssText=n,i=O0.test(n)}}else e&&t.removeAttribute("style");$i in t&&(t[$i]=i?s.display:"",t[od]&&(s.display="none"))}const pu=/\s*!important$/;function Oi(t,e,n){if(ue(n))n.forEach(s=>Oi(t,e,s));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const s=D0(t,e);pu.test(n)?t.setProperty(Es(s),n.replace(pu,""),"important"):t[s]=n}}const mu=["Webkit","Moz","ms"],la={};function D0(t,e){const n=la[e];if(n)return n;let s=es(e);if(s!=="filter"&&s in t)return la[e]=s;s=sf(s);for(let r=0;r<mu.length;r++){const i=mu[r]+s;if(i in t)return la[e]=i}return e}const gu="http://www.w3.org/1999/xlink";function _u(t,e,n,s,r,i=Gm(e)){s&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(gu,e.slice(6,e.length)):t.setAttributeNS(gu,e,n):n==null||i&&!of(n)?t.removeAttribute(e):t.setAttribute(e,i?"":qn(n)?String(n):n)}function yu(t,e,n,s,r){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?id(n):n);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const a=i==="OPTION"?t.getAttribute("value")||"":t.value,c=n==null?t.type==="checkbox"?"on":"":String(n);(a!==c||!("_value"in t))&&(t.value=c),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const a=typeof t[e];a==="boolean"?n=of(n):n==null&&a==="string"?(n="",o=!0):a==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(r||e)}function F0(t,e,n,s){t.addEventListener(e,n,s)}function B0(t,e,n,s){t.removeEventListener(e,n,s)}const bu=Symbol("_vei");function V0(t,e,n,s,r=null){const i=t[bu]||(t[bu]={}),o=i[e];if(s&&o)o.value=s;else{const[a,c]=L0(e);if(s){const l=i[e]=q0(s,r);F0(t,a,l,c)}else o&&(B0(t,a,o,c),i[e]=void 0)}}const vu=/(?:Once|Passive|Capture)$/;function L0(t){let e;if(vu.test(t)){e={};let s;for(;s=t.match(vu);)t=t.slice(0,t.length-s[0].length),e[s[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Es(t.slice(2)),e]}let ua=0;const U0=Promise.resolve(),j0=()=>ua||(U0.then(()=>ua=0),ua=Date.now());function q0(t,e){const n=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=n.attached)return;wn($0(s,n.value),e,5,[s])};return n.value=t,n.attached=j0(),n}function $0(t,e){if(ue(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(s=>r=>!r._stopped&&s&&s(r))}else return e}const wu=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,W0=(t,e,n,s,r,i)=>{const o=r==="svg";e==="class"?P0(t,s,o):e==="style"?R0(t,n,s):uo(e)?Ac(e)||V0(t,e,n,s,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):G0(t,e,s,o))?(yu(t,e,s),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&_u(t,e,s,o,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!Je(s))?yu(t,es(e),s,i,e):(e==="true-value"?t._trueValue=s:e==="false-value"&&(t._falseValue=s),_u(t,e,s,o))};function G0(t,e,n,s){if(s)return!!(e==="innerHTML"||e==="textContent"||e in t&&wu(e)&&fe(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const r=t.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return wu(e)&&Je(n)?!1:e in t}const H0=ht({patchProp:W0},x0);let Au;function z0(){return Au||(Au=Xg(H0))}const Q0=(...t)=>{const e=z0().createApp(...t),{mount:n}=e;return e.mount=s=>{const r=K0(s);if(!r)return;const i=e._component;!fe(i)&&!i.render&&!i.template&&(i.template=r.innerHTML),r.nodeType===1&&(r.textContent="");const o=n(r,!1,Y0(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},e};function Y0(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function K0(t){return Je(t)?document.querySelector(t):t}const ad="15.0.4",Tu=(t,e,n)=>({endTime:e,insertTime:n,type:"exponentialRampToValue",value:t}),Mu=(t,e,n)=>({endTime:e,insertTime:n,type:"linearRampToValue",value:t}),Ya=(t,e)=>({startTime:e,type:"setValue",value:t}),cd=(t,e,n)=>({duration:n,startTime:e,type:"setValueCurve",values:t}),ld=(t,e,{startTime:n,target:s,timeConstant:r})=>s+(e-s)*Math.exp((n-t)/r),js=t=>t.type==="exponentialRampToValue",Wi=t=>t.type==="linearRampToValue",Zn=t=>js(t)||Wi(t),Lc=t=>t.type==="setValue",Dn=t=>t.type==="setValueCurve",Gi=(t,e,n,s)=>{const r=t[e];return r===void 0?s:Zn(r)||Lc(r)?r.value:Dn(r)?r.values[r.values.length-1]:ld(n,Gi(t,e-1,r.startTime,s),r)},Su=(t,e,n,s,r)=>n===void 0?[s.insertTime,r]:Zn(n)?[n.endTime,n.value]:Lc(n)?[n.startTime,n.value]:Dn(n)?[n.startTime+n.duration,n.values[n.values.length-1]]:[n.startTime,Gi(t,e-1,n.startTime,r)],Ka=t=>t.type==="cancelAndHold",Za=t=>t.type==="cancelScheduledValues",zn=t=>Ka(t)||Za(t)?t.cancelTime:js(t)||Wi(t)?t.endTime:t.startTime,Eu=(t,e,n,{endTime:s,value:r})=>n===r?r:0<n&&0<r||n<0&&r<0?n*(r/n)**((t-e)/(s-e)):0,Nu=(t,e,n,{endTime:s,value:r})=>n+(t-e)/(s-e)*(r-n),Z0=(t,e)=>{const n=Math.floor(e),s=Math.ceil(e);return n===s?t[n]:(1-(e-n))*t[n]+(1-(s-e))*t[s]},J0=(t,{duration:e,startTime:n,values:s})=>{const r=(t-n)/e*(s.length-1);return Z0(s,r)},vi=t=>t.type==="setTarget";class X0{constructor(e){this._automationEvents=[],this._currenTime=0,this._defaultValue=e}[Symbol.iterator](){return this._automationEvents[Symbol.iterator]()}add(e){const n=zn(e);if(Ka(e)||Za(e)){const s=this._automationEvents.findIndex(i=>Za(e)&&Dn(i)?i.startTime+i.duration>=n:zn(i)>=n),r=this._automationEvents[s];if(s!==-1&&(this._automationEvents=this._automationEvents.slice(0,s)),Ka(e)){const i=this._automationEvents[this._automationEvents.length-1];if(r!==void 0&&Zn(r)){if(i!==void 0&&vi(i))throw new Error("The internal list is malformed.");const o=i===void 0?r.insertTime:Dn(i)?i.startTime+i.duration:zn(i),a=i===void 0?this._defaultValue:Dn(i)?i.values[i.values.length-1]:i.value,c=js(r)?Eu(n,o,a,r):Nu(n,o,a,r),l=js(r)?Tu(c,n,this._currenTime):Mu(c,n,this._currenTime);this._automationEvents.push(l)}if(i!==void 0&&vi(i)&&this._automationEvents.push(Ya(this.getValue(n),n)),i!==void 0&&Dn(i)&&i.startTime+i.duration>n){const o=n-i.startTime,a=(i.values.length-1)/i.duration,c=Math.max(2,1+Math.ceil(o*a)),l=o/(c-1)*a,u=i.values.slice(0,c);if(l<1)for(let h=1;h<c;h+=1){const f=l*h%1;u[h]=i.values[h-1]*(1-f)+i.values[h]*f}this._automationEvents[this._automationEvents.length-1]=cd(u,i.startTime,o)}}}else{const s=this._automationEvents.findIndex(o=>zn(o)>n),r=s===-1?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[s-1];if(r!==void 0&&Dn(r)&&zn(r)+r.duration>n)return!1;const i=js(e)?Tu(e.value,e.endTime,this._currenTime):Wi(e)?Mu(e.value,n,this._currenTime):e;if(s===-1)this._automationEvents.push(i);else{if(Dn(e)&&n+e.duration>zn(this._automationEvents[s]))return!1;this._automationEvents.splice(s,0,i)}}return!0}flush(e){const n=this._automationEvents.findIndex(s=>zn(s)>e);if(n>1){const s=this._automationEvents.slice(n-1),r=s[0];vi(r)&&s.unshift(Ya(Gi(this._automationEvents,n-2,r.startTime,this._defaultValue),r.startTime)),this._automationEvents=s}}getValue(e){if(this._automationEvents.length===0)return this._defaultValue;const n=this._automationEvents.findIndex(o=>zn(o)>e),s=this._automationEvents[n],r=(n===-1?this._automationEvents.length:n)-1,i=this._automationEvents[r];if(i!==void 0&&vi(i)&&(s===void 0||!Zn(s)||s.insertTime>e))return ld(e,Gi(this._automationEvents,r-1,i.startTime,this._defaultValue),i);if(i!==void 0&&Lc(i)&&(s===void 0||!Zn(s)))return i.value;if(i!==void 0&&Dn(i)&&(s===void 0||!Zn(s)||i.startTime+i.duration>e))return e<i.startTime+i.duration?J0(e,i):i.values[i.values.length-1];if(i!==void 0&&Zn(i)&&(s===void 0||!Zn(s)))return i.value;if(s!==void 0&&js(s)){const[o,a]=Su(this._automationEvents,r,i,s,this._defaultValue);return Eu(e,o,a,s)}if(s!==void 0&&Wi(s)){const[o,a]=Su(this._automationEvents,r,i,s,this._defaultValue);return Nu(e,o,a,s)}return this._defaultValue}}const e_=t=>({cancelTime:t,type:"cancelAndHold"}),t_=t=>({cancelTime:t,type:"cancelScheduledValues"}),n_=(t,e)=>({endTime:e,type:"exponentialRampToValue",value:t}),s_=(t,e)=>({endTime:e,type:"linearRampToValue",value:t}),r_=(t,e,n)=>({startTime:e,target:t,timeConstant:n,type:"setTarget"}),i_=()=>new DOMException("","AbortError"),o_=t=>(e,n,[s,r,i],o)=>{t(e[r],[n,s,i],a=>a[0]===n&&a[1]===s,o)},a_=t=>(e,n,s)=>{const r=[];for(let i=0;i<s.numberOfInputs;i+=1)r.push(new Set);t.set(e,{activeInputs:r,outputs:new Set,passiveInputs:new WeakMap,renderer:n})},c_=t=>(e,n)=>{t.set(e,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:n})},rr=new WeakSet,ud=new WeakMap,Uc=new WeakMap,hd=new WeakMap,jc=new WeakMap,Ao=new WeakMap,fd=new WeakMap,Ja=new WeakMap,Xa=new WeakMap,ec=new WeakMap,dd={construct(){return dd}},l_=t=>{try{const e=new Proxy(t,dd);new e}catch{return!1}return!0},Cu=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,xu=(t,e)=>{const n=[];let s=t.replace(/^[\s]+/,""),r=s.match(Cu);for(;r!==null;){const i=r[1].slice(1,-1),o=r[0].replace(/([\s]+)?;?$/,"").replace(i,new URL(i,e).toString());n.push(o),s=s.slice(r[0].length).replace(/^[\s]+/,""),r=s.match(Cu)}return[n.join(";"),s]},Iu=t=>{if(t!==void 0&&!Array.isArray(t))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},Pu=t=>{if(!l_(t))throw new TypeError("The given value for processorCtor should be a constructor.");if(t.prototype===null||typeof t.prototype!="object")throw new TypeError("The given value for processorCtor should have a prototype.")},u_=(t,e,n,s,r,i,o,a,c,l,u,h,f)=>{let d=0;return(p,g,m={credentials:"omit"})=>{const _=u.get(p);if(_!==void 0&&_.has(g))return Promise.resolve();const w=l.get(p);if(w!==void 0){const y=w.get(g);if(y!==void 0)return y}const A=i(p),b=A.audioWorklet===void 0?r(g).then(([y,M])=>{const[C,E]=xu(y,M),B=`${C};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${E}
})})(window,'_AWGS')`;return n(B)}).then(()=>{const y=f._AWGS.pop();if(y===void 0)throw new SyntaxError;s(A.currentTime,A.sampleRate,()=>y(class{},void 0,(M,C)=>{if(M.trim()==="")throw e();const E=Xa.get(A);if(E!==void 0){if(E.has(M))throw e();Pu(C),Iu(C.parameterDescriptors),E.set(M,C)}else Pu(C),Iu(C.parameterDescriptors),Xa.set(A,new Map([[M,C]]))},A.sampleRate,void 0,void 0))}):Promise.all([r(g),Promise.resolve(t(h,h))]).then(([[y,M],C])=>{const E=d+1;d=E;const[B,x]=xu(y,M),Q=`${B};((AudioWorkletProcessor,registerProcessor)=>{${x}
})(${C?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${C?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${C?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${E}',class extends AudioWorkletProcessor{process(){return !1}})`,ee=new Blob([Q],{type:"application/javascript; charset=utf-8"}),H=URL.createObjectURL(ee);return A.audioWorklet.addModule(H,m).then(()=>{if(a(A))return A;const W=o(A);return W.audioWorklet.addModule(H,m).then(()=>W)}).then(W=>{if(c===null)throw new SyntaxError;try{new c(W,`__sac${E}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL(H))});return w===void 0?l.set(p,new Map([[g,b]])):w.set(g,b),b.then(()=>{const y=u.get(p);y===void 0?u.set(p,new Set([g])):y.add(g)}).finally(()=>{const y=l.get(p);y!==void 0&&y.delete(g)}),b}},cn=(t,e)=>{const n=t.get(e);if(n===void 0)throw new Error("A value with the given key could not be found.");return n},To=(t,e)=>{const n=Array.from(t).filter(e);if(n.length>1)throw Error("More than one element was found.");if(n.length===0)throw Error("No element was found.");const[s]=n;return t.delete(s),s},pd=(t,e,n,s)=>{const r=cn(t,e),i=To(r,o=>o[0]===n&&o[1]===s);return r.size===0&&t.delete(e),i},si=t=>cn(fd,t),ir=t=>{if(rr.has(t))throw new Error("The AudioNode is already stored.");rr.add(t),si(t).forEach(e=>e(!0))},md=t=>"port"in t,ri=t=>{if(!rr.has(t))throw new Error("The AudioNode is not stored.");rr.delete(t),si(t).forEach(e=>e(!1))},tc=(t,e)=>{!md(t)&&e.every(n=>n.size===0)&&ri(t)},h_=(t,e,n,s,r,i,o,a,c,l,u,h,f)=>{const d=new WeakMap;return(p,g,m,_,w)=>{const{activeInputs:A,passiveInputs:b}=i(g),{outputs:y}=i(p),M=a(p),C=E=>{const B=c(g),x=c(p);if(E){const O=pd(b,p,m,_);t(A,p,O,!1),!w&&!h(p)&&n(x,B,m,_),f(g)&&ir(g)}else{const O=s(A,p,m,_);e(b,_,O,!1),!w&&!h(p)&&r(x,B,m,_);const k=o(g);if(k===0)u(g)&&tc(g,A);else{const G=d.get(g);G!==void 0&&clearTimeout(G),d.set(g,setTimeout(()=>{u(g)&&tc(g,A)},k*1e3))}}};return l(y,[g,m,_],E=>E[0]===g&&E[1]===m&&E[2]===_,!0)?(M.add(C),u(p)?t(A,p,[m,_,C],!0):e(b,_,[p,m,C],!0),!0):!1}},f_=t=>(e,n,[s,r,i],o)=>{const a=e.get(s);a===void 0?e.set(s,new Set([[r,n,i]])):t(a,[r,n,i],c=>c[0]===r&&c[1]===n,o)},d_=t=>(e,n)=>{const s=t(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});n.connect(s).connect(e.destination);const r=()=>{n.removeEventListener("ended",r),n.disconnect(s),s.disconnect()};n.addEventListener("ended",r)},p_=t=>(e,n)=>{t(e).add(n)},m_={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},g_=(t,e,n,s,r,i)=>class extends t{constructor(a,c){const l=r(a),u={...m_,...c},h=s(l,u),f=i(l)?e():null;super(a,!1,h,f),this._nativeAnalyserNode=h}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(a){this._nativeAnalyserNode.fftSize=a}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(a){const c=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=a,!(a>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=c,n()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(a){const c=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=a,!(this._nativeAnalyserNode.maxDecibels>a))throw this._nativeAnalyserNode.minDecibels=c,n()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(a){this._nativeAnalyserNode.smoothingTimeConstant=a}getByteFrequencyData(a){this._nativeAnalyserNode.getByteFrequencyData(a)}getByteTimeDomainData(a){this._nativeAnalyserNode.getByteTimeDomainData(a)}getFloatFrequencyData(a){this._nativeAnalyserNode.getFloatFrequencyData(a)}getFloatTimeDomainData(a){this._nativeAnalyserNode.getFloatTimeDomainData(a)}},St=(t,e)=>t.context===e,__=(t,e,n)=>()=>{const s=new WeakMap,r=async(i,o)=>{let a=e(i);if(!St(a,o)){const l={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,fftSize:a.fftSize,maxDecibels:a.maxDecibels,minDecibels:a.minDecibels,smoothingTimeConstant:a.smoothingTimeConstant};a=t(o,l)}return s.set(o,a),await n(i,o,a),a};return{render(i,o){const a=s.get(o);return a!==void 0?Promise.resolve(a):r(i,o)}}},Hi=t=>{try{t.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},Sn=()=>new DOMException("","IndexSizeError"),qc=t=>{t.getChannelData=(e=>n=>{try{return e.call(t,n)}catch(s){throw s.code===12?Sn():s}})(t.getChannelData)},y_={numberOfChannels:1},b_=(t,e,n,s,r,i,o,a)=>{let c=null;return class gd{constructor(u){if(r===null)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:h,numberOfChannels:f,sampleRate:d}={...y_,...u};c===null&&(c=new r(1,1,44100));const p=s!==null&&e(i,i)?new s({length:h,numberOfChannels:f,sampleRate:d}):c.createBuffer(f,h,d);if(p.numberOfChannels===0)throw n();return typeof p.copyFromChannel!="function"?(o(p),qc(p)):e(Hi,()=>Hi(p))||a(p),t.add(p),p}static[Symbol.hasInstance](u){return u!==null&&typeof u=="object"&&Object.getPrototypeOf(u)===gd.prototype||t.has(u)}}},Dt=-34028234663852886e22,It=-Dt,Ln=t=>rr.has(t),v_={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},w_=(t,e,n,s,r,i,o,a)=>class extends t{constructor(l,u){const h=i(l),f={...v_,...u},d=r(h,f),p=o(h),g=p?e():null;super(l,!1,d,g),this._audioBufferSourceNodeRenderer=g,this._isBufferNullified=!1,this._isBufferSet=f.buffer!==null,this._nativeAudioBufferSourceNode=d,this._onended=null,this._playbackRate=n(this,p,d.playbackRate,It,Dt)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(l){if(this._nativeAudioBufferSourceNode.buffer=l,l!==null){if(this._isBufferSet)throw s();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(l){this._nativeAudioBufferSourceNode.loop=l}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(l){this._nativeAudioBufferSourceNode.loopEnd=l}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(l){this._nativeAudioBufferSourceNode.loopStart=l}get onended(){return this._onended}set onended(l){const u=typeof l=="function"?a(this,l):null;this._nativeAudioBufferSourceNode.onended=u;const h=this._nativeAudioBufferSourceNode.onended;this._onended=h!==null&&h===u?l:h}get playbackRate(){return this._playbackRate}start(l=0,u=0,h){if(this._nativeAudioBufferSourceNode.start(l,u,h),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.start=h===void 0?[l,u]:[l,u,h]),this.context.state!=="closed"){ir(this);const f=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",f),Ln(this)&&ri(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",f)}}stop(l=0){this._nativeAudioBufferSourceNode.stop(l),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.stop=l)}},A_=(t,e,n,s,r)=>()=>{const i=new WeakMap;let o=null,a=null;const c=async(l,u)=>{let h=n(l);const f=St(h,u);if(!f){const d={buffer:h.buffer,channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,loop:h.loop,loopEnd:h.loopEnd,loopStart:h.loopStart,playbackRate:h.playbackRate.value};h=e(u,d),o!==null&&h.start(...o),a!==null&&h.stop(a)}return i.set(u,h),f?await t(u,l.playbackRate,h.playbackRate):await s(u,l.playbackRate,h.playbackRate),await r(l,u,h),h};return{set start(l){o=l},set stop(l){a=l},render(l,u){const h=i.get(u);return h!==void 0?Promise.resolve(h):c(l,u)}}},T_=t=>"playbackRate"in t,M_=t=>"frequency"in t&&"gain"in t,S_=t=>"offset"in t,E_=t=>!("frequency"in t)&&"gain"in t,N_=t=>"detune"in t&&"frequency"in t&&!("gain"in t),C_=t=>"pan"in t,kt=t=>cn(ud,t),ii=t=>cn(hd,t),nc=(t,e)=>{const{activeInputs:n}=kt(t);n.forEach(r=>r.forEach(([i])=>{e.includes(t)||nc(i,[...e,t])}));const s=T_(t)?[t.playbackRate]:md(t)?Array.from(t.parameters.values()):M_(t)?[t.Q,t.detune,t.frequency,t.gain]:S_(t)?[t.offset]:E_(t)?[t.gain]:N_(t)?[t.detune,t.frequency]:C_(t)?[t.pan]:[];for(const r of s){const i=ii(r);i!==void 0&&i.activeInputs.forEach(([o])=>nc(o,e))}Ln(t)&&ri(t)},_d=t=>{nc(t.destination,[])},x_=t=>t===void 0||typeof t=="number"||typeof t=="string"&&(t==="balanced"||t==="interactive"||t==="playback"),I_=(t,e,n,s,r,i,o,a,c)=>class extends t{constructor(u={}){if(c===null)throw new Error("Missing the native AudioContext constructor.");let h;try{h=new c(u)}catch(p){throw p.code===12&&p.message==="sampleRate is not in range"?n():p}if(h===null)throw s();if(!x_(u.latencyHint))throw new TypeError(`The provided value '${u.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(u.sampleRate!==void 0&&h.sampleRate!==u.sampleRate)throw n();super(h,2);const{latencyHint:f}=u,{sampleRate:d}=h;if(this._baseLatency=typeof h.baseLatency=="number"?h.baseLatency:f==="balanced"?512/d:f==="interactive"||f===void 0?256/d:f==="playback"?1024/d:Math.max(2,Math.min(128,Math.round(f*d/128)))*128/d,this._nativeAudioContext=h,c.name==="webkitAudioContext"?(this._nativeGainNode=h.createGain(),this._nativeOscillatorNode=h.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(h.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,h.state==="running"){this._state="suspended";const p=()=>{this._state==="suspended"&&(this._state=null),h.removeEventListener("statechange",p)};h.addEventListener("statechange",p)}}get baseLatency(){return this._baseLatency}get state(){return this._state!==null?this._state:this._nativeAudioContext.state}close(){return this.state==="closed"?this._nativeAudioContext.close().then(()=>{throw e()}):(this._state==="suspended"&&(this._state=null),this._nativeAudioContext.close().then(()=>{this._nativeGainNode!==null&&this._nativeOscillatorNode!==null&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),_d(this)}))}createMediaElementSource(u){return new r(this,{mediaElement:u})}createMediaStreamDestination(){return new i(this)}createMediaStreamSource(u){return new o(this,{mediaStream:u})}createMediaStreamTrackSource(u){return new a(this,{mediaStreamTrack:u})}resume(){return this._state==="suspended"?new Promise((u,h)=>{const f=()=>{this._nativeAudioContext.removeEventListener("statechange",f),this._nativeAudioContext.state==="running"?u():this.resume().then(u,h)};this._nativeAudioContext.addEventListener("statechange",f)}):this._nativeAudioContext.resume().catch(u=>{throw u===void 0||u.code===15?e():u})}suspend(){return this._nativeAudioContext.suspend().catch(u=>{throw u===void 0?e():u})}},P_=(t,e,n,s,r,i,o,a)=>class extends t{constructor(l,u){const h=i(l),f=o(h),d=r(h,u,f),p=f?e(a):null;super(l,!1,d,p),this._isNodeOfNativeOfflineAudioContext=f,this._nativeAudioDestinationNode=d}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(l){if(this._isNodeOfNativeOfflineAudioContext)throw s();if(l>this._nativeAudioDestinationNode.maxChannelCount)throw n();this._nativeAudioDestinationNode.channelCount=l}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(l){if(this._isNodeOfNativeOfflineAudioContext)throw s();this._nativeAudioDestinationNode.channelCountMode=l}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}},k_=t=>{const e=new WeakMap,n=async(s,r)=>{const i=r.destination;return e.set(r,i),await t(s,r,i),i};return{render(s,r){const i=e.get(r);return i!==void 0?Promise.resolve(i):n(s,r)}}},O_=(t,e,n,s,r,i,o,a)=>(c,l)=>{const u=l.listener,h=()=>{const y=new Float32Array(1),M=e(l,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),C=o(l);let E=!1,B=[0,0,-1,0,1,0],x=[0,0,0];const O=()=>{if(E)return;E=!0;const ee=s(l,256,9,0);ee.onaudioprocess=({inputBuffer:H})=>{const W=[i(H,y,0),i(H,y,1),i(H,y,2),i(H,y,3),i(H,y,4),i(H,y,5)];W.some((Z,ae)=>Z!==B[ae])&&(u.setOrientation(...W),B=W);const K=[i(H,y,6),i(H,y,7),i(H,y,8)];K.some((Z,ae)=>Z!==x[ae])&&(u.setPosition(...K),x=K)},M.connect(ee)},k=ee=>H=>{H!==B[ee]&&(B[ee]=H,u.setOrientation(...B))},G=ee=>H=>{H!==x[ee]&&(x[ee]=H,u.setPosition(...x))},Q=(ee,H,W)=>{const K=n(l,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:H});K.connect(M,0,ee),K.start(),Object.defineProperty(K.offset,"defaultValue",{get(){return H}});const Z=t({context:c},C,K.offset,It,Dt);return a(Z,"value",ae=>()=>ae.call(Z),ae=>ne=>{try{ae.call(Z,ne)}catch(de){if(de.code!==9)throw de}O(),C&&W(ne)}),Z.cancelAndHoldAtTime=(ae=>C?()=>{throw r()}:(...ne)=>{const de=ae.apply(Z,ne);return O(),de})(Z.cancelAndHoldAtTime),Z.cancelScheduledValues=(ae=>C?()=>{throw r()}:(...ne)=>{const de=ae.apply(Z,ne);return O(),de})(Z.cancelScheduledValues),Z.exponentialRampToValueAtTime=(ae=>C?()=>{throw r()}:(...ne)=>{const de=ae.apply(Z,ne);return O(),de})(Z.exponentialRampToValueAtTime),Z.linearRampToValueAtTime=(ae=>C?()=>{throw r()}:(...ne)=>{const de=ae.apply(Z,ne);return O(),de})(Z.linearRampToValueAtTime),Z.setTargetAtTime=(ae=>C?()=>{throw r()}:(...ne)=>{const de=ae.apply(Z,ne);return O(),de})(Z.setTargetAtTime),Z.setValueAtTime=(ae=>C?()=>{throw r()}:(...ne)=>{const de=ae.apply(Z,ne);return O(),de})(Z.setValueAtTime),Z.setValueCurveAtTime=(ae=>C?()=>{throw r()}:(...ne)=>{const de=ae.apply(Z,ne);return O(),de})(Z.setValueCurveAtTime),Z};return{forwardX:Q(0,0,k(0)),forwardY:Q(1,0,k(1)),forwardZ:Q(2,-1,k(2)),positionX:Q(6,0,G(0)),positionY:Q(7,0,G(1)),positionZ:Q(8,0,G(2)),upX:Q(3,0,k(3)),upY:Q(4,1,k(4)),upZ:Q(5,0,k(5))}},{forwardX:f,forwardY:d,forwardZ:p,positionX:g,positionY:m,positionZ:_,upX:w,upY:A,upZ:b}=u.forwardX===void 0?h():u;return{get forwardX(){return f},get forwardY(){return d},get forwardZ(){return p},get positionX(){return g},get positionY(){return m},get positionZ(){return _},get upX(){return w},get upY(){return A},get upZ(){return b}}},zi=t=>"context"in t,oi=t=>zi(t[0]),Ns=(t,e,n,s)=>{for(const r of t)if(n(r)){if(s)return!1;throw Error("The set contains at least one similar element.")}return t.add(e),!0},ku=(t,e,[n,s],r)=>{Ns(t,[e,n,s],i=>i[0]===e&&i[1]===n,r)},Ou=(t,[e,n,s],r)=>{const i=t.get(e);i===void 0?t.set(e,new Set([[n,s]])):Ns(i,[n,s],o=>o[0]===n,r)},dr=t=>"inputs"in t,Qi=(t,e,n,s)=>{if(dr(e)){const r=e.inputs[s];return t.connect(r,n,0),[r,n,0]}return t.connect(e,n,s),[e,n,s]},yd=(t,e,n)=>{for(const s of t)if(s[0]===e&&s[1]===n)return t.delete(s),s;return null},R_=(t,e,n)=>To(t,s=>s[0]===e&&s[1]===n),bd=(t,e)=>{if(!si(t).delete(e))throw new Error("Missing the expected event listener.")},vd=(t,e,n)=>{const s=cn(t,e),r=To(s,i=>i[0]===n);return s.size===0&&t.delete(e),r},Yi=(t,e,n,s)=>{dr(e)?t.disconnect(e.inputs[s],n,0):t.disconnect(e,n,s)},Be=t=>cn(Uc,t),Yr=t=>cn(jc,t),As=t=>Ja.has(t),Ri=t=>!rr.has(t),Ru=(t,e)=>new Promise(n=>{if(e!==null)n(!0);else{const s=t.createScriptProcessor(256,1,1),r=t.createGain(),i=t.createBuffer(1,2,44100),o=i.getChannelData(0);o[0]=1,o[1]=1;const a=t.createBufferSource();a.buffer=i,a.loop=!0,a.connect(s).connect(t.destination),a.connect(r),a.disconnect(r),s.onaudioprocess=c=>{const l=c.inputBuffer.getChannelData(0);Array.prototype.some.call(l,u=>u===1)?n(!0):n(!1),a.stop(),s.onaudioprocess=null,a.disconnect(s),s.disconnect(t.destination)},a.start()}}),ha=(t,e)=>{const n=new Map;for(const s of t)for(const r of s){const i=n.get(r);n.set(r,i===void 0?1:i+1)}n.forEach((s,r)=>e(r,s))},Ki=t=>"context"in t,D_=t=>{const e=new Map;t.connect=(n=>(s,r=0,i=0)=>{const o=Ki(s)?n(s,r,i):n(s,r),a=e.get(s);return a===void 0?e.set(s,[{input:i,output:r}]):a.every(c=>c.input!==i||c.output!==r)&&a.push({input:i,output:r}),o})(t.connect.bind(t)),t.disconnect=(n=>(s,r,i)=>{if(n.apply(t),s===void 0)e.clear();else if(typeof s=="number")for(const[o,a]of e){const c=a.filter(l=>l.output!==s);c.length===0?e.delete(o):e.set(o,c)}else if(e.has(s))if(r===void 0)e.delete(s);else{const o=e.get(s);if(o!==void 0){const a=o.filter(c=>c.output!==r&&(c.input!==i||i===void 0));a.length===0?e.delete(s):e.set(s,a)}}for(const[o,a]of e)a.forEach(c=>{Ki(o)?t.connect(o,c.output,c.input):t.connect(o,c.output)})})(t.disconnect)},F_=(t,e,n,s)=>{const{activeInputs:r,passiveInputs:i}=ii(e),{outputs:o}=kt(t),a=si(t),c=l=>{const u=Be(t),h=Yr(e);if(l){const f=vd(i,t,n);ku(r,t,f,!1),!s&&!As(t)&&u.connect(h,n)}else{const f=R_(r,t,n);Ou(i,f,!1),!s&&!As(t)&&u.disconnect(h,n)}};return Ns(o,[e,n],l=>l[0]===e&&l[1]===n,!0)?(a.add(c),Ln(t)?ku(r,t,[n,c],!0):Ou(i,[t,n,c],!0),!0):!1},B_=(t,e,n,s)=>{const{activeInputs:r,passiveInputs:i}=kt(e),o=yd(r[s],t,n);return o===null?[pd(i,t,n,s)[2],!1]:[o[2],!0]},V_=(t,e,n)=>{const{activeInputs:s,passiveInputs:r}=ii(e),i=yd(s,t,n);return i===null?[vd(r,t,n)[1],!1]:[i[2],!0]},$c=(t,e,n,s,r)=>{const[i,o]=B_(t,n,s,r);if(i!==null&&(bd(t,i),o&&!e&&!As(t)&&Yi(Be(t),Be(n),s,r)),Ln(n)){const{activeInputs:a}=kt(n);tc(n,a)}},Wc=(t,e,n,s)=>{const[r,i]=V_(t,n,s);r!==null&&(bd(t,r),i&&!e&&!As(t)&&Be(t).disconnect(Yr(n),s))},L_=(t,e)=>{const n=kt(t),s=[];for(const r of n.outputs)oi(r)?$c(t,e,...r):Wc(t,e,...r),s.push(r[0]);return n.outputs.clear(),s},U_=(t,e,n)=>{const s=kt(t),r=[];for(const i of s.outputs)i[1]===n&&(oi(i)?$c(t,e,...i):Wc(t,e,...i),r.push(i[0]),s.outputs.delete(i));return r},j_=(t,e,n,s,r)=>{const i=kt(t);return Array.from(i.outputs).filter(o=>o[0]===n&&(s===void 0||o[1]===s)&&(r===void 0||o[2]===r)).map(o=>(oi(o)?$c(t,e,...o):Wc(t,e,...o),i.outputs.delete(o),o[0]))},q_=(t,e,n,s,r,i,o,a,c,l,u,h,f,d,p,g)=>class extends l{constructor(_,w,A,b){super(A),this._context=_,this._nativeAudioNode=A;const y=u(_);h(y)&&n(Ru,()=>Ru(y,g))!==!0&&D_(A),Uc.set(this,A),fd.set(this,new Set),_.state!=="closed"&&w&&ir(this),t(this,b,A)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(_){this._nativeAudioNode.channelCount=_}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(_){this._nativeAudioNode.channelCountMode=_}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(_){this._nativeAudioNode.channelInterpretation=_}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(_,w=0,A=0){if(w<0||w>=this._nativeAudioNode.numberOfOutputs)throw r();const b=u(this._context),y=p(b);if(f(_)||d(_))throw i();if(zi(_)){const E=Be(_);try{const x=Qi(this._nativeAudioNode,E,w,A),O=Ri(this);(y||O)&&this._nativeAudioNode.disconnect(...x),this.context.state!=="closed"&&!O&&Ri(_)&&ir(_)}catch(x){throw x.code===12?i():x}if(e(this,_,w,A,y)){const x=c([this],_);ha(x,s(y))}return _}const M=Yr(_);if(M.name==="playbackRate"&&M.maxValue===1024)throw o();try{this._nativeAudioNode.connect(M,w),(y||Ri(this))&&this._nativeAudioNode.disconnect(M,w)}catch(E){throw E.code===12?i():E}if(F_(this,_,w,y)){const E=c([this],_);ha(E,s(y))}}disconnect(_,w,A){let b;const y=u(this._context),M=p(y);if(_===void 0)b=L_(this,M);else if(typeof _=="number"){if(_<0||_>=this.numberOfOutputs)throw r();b=U_(this,M,_)}else{if(w!==void 0&&(w<0||w>=this.numberOfOutputs)||zi(_)&&A!==void 0&&(A<0||A>=_.numberOfInputs))throw r();if(b=j_(this,M,_,w,A),b.length===0)throw i()}for(const C of b){const E=c([this],C);ha(E,a)}}},$_=(t,e,n,s,r,i,o,a,c,l,u,h,f)=>(d,p,g,m=null,_=null)=>{const w=g.value,A=new X0(w),b=p?s(A):null,y={get defaultValue(){return w},get maxValue(){return m===null?g.maxValue:m},get minValue(){return _===null?g.minValue:_},get value(){return g.value},set value(M){g.value=M,y.setValueAtTime(M,d.context.currentTime)},cancelAndHoldAtTime(M){if(typeof g.cancelAndHoldAtTime=="function")b===null&&A.flush(d.context.currentTime),A.add(r(M)),g.cancelAndHoldAtTime(M);else{const C=Array.from(A).pop();b===null&&A.flush(d.context.currentTime),A.add(r(M));const E=Array.from(A).pop();g.cancelScheduledValues(M),C!==E&&E!==void 0&&(E.type==="exponentialRampToValue"?g.exponentialRampToValueAtTime(E.value,E.endTime):E.type==="linearRampToValue"?g.linearRampToValueAtTime(E.value,E.endTime):E.type==="setValue"?g.setValueAtTime(E.value,E.startTime):E.type==="setValueCurve"&&g.setValueCurveAtTime(E.values,E.startTime,E.duration))}return y},cancelScheduledValues(M){return b===null&&A.flush(d.context.currentTime),A.add(i(M)),g.cancelScheduledValues(M),y},exponentialRampToValueAtTime(M,C){if(M===0)throw new RangeError;if(!Number.isFinite(C)||C<0)throw new RangeError;const E=d.context.currentTime;return b===null&&A.flush(E),Array.from(A).length===0&&(A.add(l(w,E)),g.setValueAtTime(w,E)),A.add(o(M,C)),g.exponentialRampToValueAtTime(M,C),y},linearRampToValueAtTime(M,C){const E=d.context.currentTime;return b===null&&A.flush(E),Array.from(A).length===0&&(A.add(l(w,E)),g.setValueAtTime(w,E)),A.add(a(M,C)),g.linearRampToValueAtTime(M,C),y},setTargetAtTime(M,C,E){return b===null&&A.flush(d.context.currentTime),A.add(c(M,C,E)),g.setTargetAtTime(M,C,E),y},setValueAtTime(M,C){return b===null&&A.flush(d.context.currentTime),A.add(l(M,C)),g.setValueAtTime(M,C),y},setValueCurveAtTime(M,C,E){const B=M instanceof Float32Array?M:new Float32Array(M);if(h!==null&&h.name==="webkitAudioContext"){const x=C+E,O=d.context.sampleRate,k=Math.ceil(C*O),G=Math.floor(x*O),Q=G-k,ee=new Float32Array(Q);for(let W=0;W<Q;W+=1){const K=(B.length-1)/E*((k+W)/O-C),Z=Math.floor(K),ae=Math.ceil(K);ee[W]=Z===ae?B[Z]:(1-(K-Z))*B[Z]+(1-(ae-K))*B[ae]}b===null&&A.flush(d.context.currentTime),A.add(u(ee,C,E)),g.setValueCurveAtTime(ee,C,E);const H=G/O;H<x&&f(y,ee[ee.length-1],H),f(y,B[B.length-1],x)}else b===null&&A.flush(d.context.currentTime),A.add(u(B,C,E)),g.setValueCurveAtTime(B,C,E);return y}};return n.set(y,g),e.set(y,d),t(y,b),y},W_=t=>({replay(e){for(const n of t)if(n.type==="exponentialRampToValue"){const{endTime:s,value:r}=n;e.exponentialRampToValueAtTime(r,s)}else if(n.type==="linearRampToValue"){const{endTime:s,value:r}=n;e.linearRampToValueAtTime(r,s)}else if(n.type==="setTarget"){const{startTime:s,target:r,timeConstant:i}=n;e.setTargetAtTime(r,s,i)}else if(n.type==="setValue"){const{startTime:s,value:r}=n;e.setValueAtTime(r,s)}else if(n.type==="setValueCurve"){const{duration:s,startTime:r,values:i}=n;e.setValueCurveAtTime(i,r,s)}else throw new Error("Can't apply an unknown automation.")}});class wd{constructor(e){this._map=new Map(e)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(e,n=null){return this._map.forEach((s,r)=>e.call(n,s,r,this))}get(e){return this._map.get(e)}has(e){return this._map.has(e)}keys(){return this._map.keys()}values(){return this._map.values()}}const G_={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}},H_=(t,e,n,s,r,i,o,a,c,l,u,h,f,d)=>class extends e{constructor(g,m,_){var w;const A=a(g),b=c(A),y=u({...G_,..._});f(y);const M=Xa.get(A),C=M==null?void 0:M.get(m),E=b||A.state!=="closed"?A:(w=o(A))!==null&&w!==void 0?w:A,B=r(E,b?null:g.baseLatency,l,m,C,y),x=b?s(m,y,C):null;super(g,!0,B,x);const O=[];B.parameters.forEach((G,Q)=>{const ee=n(this,b,G);O.push([Q,ee])}),this._nativeAudioWorkletNode=B,this._onprocessorerror=null,this._parameters=new wd(O),b&&t(A,this);const{activeInputs:k}=i(this);h(B,k)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(g){const m=typeof g=="function"?d(this,g):null;this._nativeAudioWorkletNode.onprocessorerror=m;const _=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=_!==null&&_===m?g:_}get parameters(){return this._parameters===null?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}};function Zi(t,e,n,s,r){if(typeof t.copyFromChannel=="function")e[n].byteLength===0&&(e[n]=new Float32Array(128)),t.copyFromChannel(e[n],s,r);else{const i=t.getChannelData(s);if(e[n].byteLength===0)e[n]=i.slice(r,r+128);else{const o=new Float32Array(i.buffer,r*Float32Array.BYTES_PER_ELEMENT,128);e[n].set(o)}}}const Ad=(t,e,n,s,r)=>{typeof t.copyToChannel=="function"?e[n].byteLength!==0&&t.copyToChannel(e[n],s,r):e[n].byteLength!==0&&t.getChannelData(s).set(e[n],r)},Ji=(t,e)=>{const n=[];for(let s=0;s<t;s+=1){const r=[],i=typeof e=="number"?e:e[s];for(let o=0;o<i;o+=1)r.push(new Float32Array(128));n.push(r)}return n},z_=(t,e)=>{const n=cn(ec,t),s=Be(e);return cn(n,s)},Q_=async(t,e,n,s,r,i,o)=>{const a=e===null?Math.ceil(t.context.length/128)*128:e.length,c=s.channelCount*s.numberOfInputs,l=r.reduce((m,_)=>m+_,0),u=l===0?null:n.createBuffer(l,a,n.sampleRate);if(i===void 0)throw new Error("Missing the processor constructor.");const h=kt(t),f=await z_(n,t),d=Ji(s.numberOfInputs,s.channelCount),p=Ji(s.numberOfOutputs,r),g=Array.from(t.parameters.keys()).reduce((m,_)=>({...m,[_]:new Float32Array(128)}),{});for(let m=0;m<a;m+=128){if(s.numberOfInputs>0&&e!==null)for(let _=0;_<s.numberOfInputs;_+=1)for(let w=0;w<s.channelCount;w+=1)Zi(e,d[_],w,w,m);i.parameterDescriptors!==void 0&&e!==null&&i.parameterDescriptors.forEach(({name:_},w)=>{Zi(e,g,_,c+w,m)});for(let _=0;_<s.numberOfInputs;_+=1)for(let w=0;w<r[_];w+=1)p[_][w].byteLength===0&&(p[_][w]=new Float32Array(128));try{const _=d.map((A,b)=>h.activeInputs[b].size===0?[]:A),w=o(m/n.sampleRate,n.sampleRate,()=>f.process(_,p,g));if(u!==null)for(let A=0,b=0;A<s.numberOfOutputs;A+=1){for(let y=0;y<r[A];y+=1)Ad(u,p[A],y,b+y,m);b+=r[A]}if(!w)break}catch(_){t.dispatchEvent(new ErrorEvent("processorerror",{colno:_.colno,filename:_.filename,lineno:_.lineno,message:_.message}));break}}return u},Y_=(t,e,n,s,r,i,o,a,c,l,u,h,f,d,p,g)=>(m,_,w)=>{const A=new WeakMap;let b=null;const y=async(M,C)=>{let E=u(M),B=null;const x=St(E,C),O=Array.isArray(_.outputChannelCount)?_.outputChannelCount:Array.from(_.outputChannelCount);if(h===null){const k=O.reduce((H,W)=>H+W,0),G=r(C,{channelCount:Math.max(1,k),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,k)}),Q=[];for(let H=0;H<M.numberOfOutputs;H+=1)Q.push(s(C,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:O[H]}));const ee=o(C,{channelCount:_.channelCount,channelCountMode:_.channelCountMode,channelInterpretation:_.channelInterpretation,gain:1});ee.connect=e.bind(null,Q),ee.disconnect=c.bind(null,Q),B=[G,Q,ee]}else x||(E=new h(C,m));if(A.set(C,B===null?E:B[2]),B!==null){if(b===null){if(w===void 0)throw new Error("Missing the processor constructor.");if(f===null)throw new Error("Missing the native OfflineAudioContext constructor.");const W=M.channelCount*M.numberOfInputs,K=w.parameterDescriptors===void 0?0:w.parameterDescriptors.length,Z=W+K;b=Q_(M,Z===0?null:await(async()=>{const ne=new f(Z,Math.ceil(M.context.length/128)*128,C.sampleRate),de=[],pt=[];for(let Te=0;Te<_.numberOfInputs;Te+=1)de.push(o(ne,{channelCount:_.channelCount,channelCountMode:_.channelCountMode,channelInterpretation:_.channelInterpretation,gain:1})),pt.push(r(ne,{channelCount:_.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:_.channelCount}));const Et=await Promise.all(Array.from(M.parameters.values()).map(async Te=>{const Qe=i(ne,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:Te.value});return await d(ne,Te,Qe.offset),Qe})),ge=s(ne,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,W+K)});for(let Te=0;Te<_.numberOfInputs;Te+=1){de[Te].connect(pt[Te]);for(let Qe=0;Qe<_.channelCount;Qe+=1)pt[Te].connect(ge,Qe,Te*_.channelCount+Qe)}for(const[Te,Qe]of Et.entries())Qe.connect(ge,0,W+Te),Qe.start(0);return ge.connect(ne.destination),await Promise.all(de.map(Te=>p(M,ne,Te))),g(ne)})(),C,_,O,w,l)}const k=await b,G=n(C,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[Q,ee,H]=B;k!==null&&(G.buffer=k,G.start(0)),G.connect(Q);for(let W=0,K=0;W<M.numberOfOutputs;W+=1){const Z=ee[W];for(let ae=0;ae<O[W];ae+=1)Q.connect(Z,K+ae,ae);K+=O[W]}return H}if(x)for(const[k,G]of M.parameters.entries())await t(C,G,E.parameters.get(k));else for(const[k,G]of M.parameters.entries())await d(C,G,E.parameters.get(k));return await p(M,C,E),E};return{render(M,C){a(C,M);const E=A.get(C);return E!==void 0?Promise.resolve(E):y(M,C)}}},K_=(t,e,n,s,r,i,o,a,c,l,u,h,f,d,p,g,m,_,w,A)=>class extends p{constructor(y,M){super(y,M),this._nativeContext=y,this._audioWorklet=t===void 0?void 0:{addModule:(C,E)=>t(this,C,E)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new e(this)}createBiquadFilter(){return new r(this)}createBuffer(y,M,C){return new n({length:M,numberOfChannels:y,sampleRate:C})}createBufferSource(){return new s(this)}createChannelMerger(y=6){return new i(this,{numberOfInputs:y})}createChannelSplitter(y=6){return new o(this,{numberOfOutputs:y})}createConstantSource(){return new a(this)}createConvolver(){return new c(this)}createDelay(y=1){return new u(this,{maxDelayTime:y})}createDynamicsCompressor(){return new h(this)}createGain(){return new f(this)}createIIRFilter(y,M){return new d(this,{feedback:M,feedforward:y})}createOscillator(){return new g(this)}createPanner(){return new m(this)}createPeriodicWave(y,M,C={disableNormalization:!1}){return new _(this,{...C,imag:M,real:y})}createStereoPanner(){return new w(this)}createWaveShaper(){return new A(this)}decodeAudioData(y,M,C){return l(this._nativeContext,y).then(E=>(typeof M=="function"&&M(E),E),E=>{throw typeof C=="function"&&C(E),E})}},Z_={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},J_=(t,e,n,s,r,i,o,a)=>class extends t{constructor(l,u){const h=i(l),f={...Z_,...u},d=r(h,f),p=o(h),g=p?n():null;super(l,!1,d,g),this._Q=e(this,p,d.Q,It,Dt),this._detune=e(this,p,d.detune,1200*Math.log2(It),-1200*Math.log2(It)),this._frequency=e(this,p,d.frequency,l.sampleRate/2,0),this._gain=e(this,p,d.gain,40*Math.log10(It),Dt),this._nativeBiquadFilterNode=d,a(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(l){this._nativeBiquadFilterNode.type=l}getFrequencyResponse(l,u,h){try{this._nativeBiquadFilterNode.getFrequencyResponse(l,u,h)}catch(f){throw f.code===11?s():f}if(l.length!==u.length||u.length!==h.length)throw s()}},X_=(t,e,n,s,r)=>()=>{const i=new WeakMap,o=async(a,c)=>{let l=n(a);const u=St(l,c);if(!u){const h={Q:l.Q.value,channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,detune:l.detune.value,frequency:l.frequency.value,gain:l.gain.value,type:l.type};l=e(c,h)}return i.set(c,l),u?(await t(c,a.Q,l.Q),await t(c,a.detune,l.detune),await t(c,a.frequency,l.frequency),await t(c,a.gain,l.gain)):(await s(c,a.Q,l.Q),await s(c,a.detune,l.detune),await s(c,a.frequency,l.frequency),await s(c,a.gain,l.gain)),await r(a,c,l),l};return{render(a,c){const l=i.get(c);return l!==void 0?Promise.resolve(l):o(a,c)}}},ey=(t,e)=>(n,s)=>{const r=e.get(n);if(r!==void 0)return r;const i=t.get(n);if(i!==void 0)return i;try{const o=s();return o instanceof Promise?(t.set(n,o),o.catch(()=>!1).then(a=>(t.delete(n),e.set(n,a),a))):(e.set(n,o),o)}catch{return e.set(n,!1),!1}},ty={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},ny=(t,e,n,s,r)=>class extends t{constructor(o,a){const c=s(o),l={...ty,...a},u=n(c,l),h=r(c)?e():null;super(o,!1,u,h)}},sy=(t,e,n)=>()=>{const s=new WeakMap,r=async(i,o)=>{let a=e(i);if(!St(a,o)){const l={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,numberOfInputs:a.numberOfInputs};a=t(o,l)}return s.set(o,a),await n(i,o,a),a};return{render(i,o){const a=s.get(o);return a!==void 0?Promise.resolve(a):r(i,o)}}},ry={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},iy=(t,e,n,s,r,i)=>class extends t{constructor(a,c){const l=s(a),u=i({...ry,...c}),h=n(l,u),f=r(l)?e():null;super(a,!1,h,f)}},oy=(t,e,n)=>()=>{const s=new WeakMap,r=async(i,o)=>{let a=e(i);if(!St(a,o)){const l={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,numberOfOutputs:a.numberOfOutputs};a=t(o,l)}return s.set(o,a),await n(i,o,a),a};return{render(i,o){const a=s.get(o);return a!==void 0?Promise.resolve(a):r(i,o)}}},ay=t=>(e,n,s)=>t(n,e,s),cy=t=>(e,n,s=0,r=0)=>{const i=e[s];if(i===void 0)throw t();return Ki(n)?i.connect(n,0,r):i.connect(n,0)},ly=t=>(e,n)=>{const s=t(e,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),r=e.createBuffer(1,2,44100);return s.buffer=r,s.loop=!0,s.connect(n),s.start(),()=>{s.stop(),s.disconnect(n)}},uy={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},hy=(t,e,n,s,r,i,o)=>class extends t{constructor(c,l){const u=r(c),h={...uy,...l},f=s(u,h),d=i(u),p=d?n():null;super(c,!1,f,p),this._constantSourceNodeRenderer=p,this._nativeConstantSourceNode=f,this._offset=e(this,d,f.offset,It,Dt),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(c){const l=typeof c=="function"?o(this,c):null;this._nativeConstantSourceNode.onended=l;const u=this._nativeConstantSourceNode.onended;this._onended=u!==null&&u===l?c:u}start(c=0){if(this._nativeConstantSourceNode.start(c),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.start=c),this.context.state!=="closed"){ir(this);const l=()=>{this._nativeConstantSourceNode.removeEventListener("ended",l),Ln(this)&&ri(this)};this._nativeConstantSourceNode.addEventListener("ended",l)}}stop(c=0){this._nativeConstantSourceNode.stop(c),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.stop=c)}},fy=(t,e,n,s,r)=>()=>{const i=new WeakMap;let o=null,a=null;const c=async(l,u)=>{let h=n(l);const f=St(h,u);if(!f){const d={channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,offset:h.offset.value};h=e(u,d),o!==null&&h.start(o),a!==null&&h.stop(a)}return i.set(u,h),f?await t(u,l.offset,h.offset):await s(u,l.offset,h.offset),await r(l,u,h),h};return{set start(l){o=l},set stop(l){a=l},render(l,u){const h=i.get(u);return h!==void 0?Promise.resolve(h):c(l,u)}}},dy=t=>e=>(t[0]=e,t[0]),py={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},my=(t,e,n,s,r,i)=>class extends t{constructor(a,c){const l=s(a),u={...py,...c},h=n(l,u),d=r(l)?e():null;super(a,!1,h,d),this._isBufferNullified=!1,this._nativeConvolverNode=h,u.buffer!==null&&i(this,u.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(a){if(this._nativeConvolverNode.buffer=a,a===null&&this._nativeConvolverNode.buffer!==null){const c=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=c.createBuffer(1,1,c.sampleRate),this._isBufferNullified=!0,i(this,0)}else this._isBufferNullified=!1,i(this,this._nativeConvolverNode.buffer===null?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(a){this._nativeConvolverNode.normalize=a}},gy=(t,e,n)=>()=>{const s=new WeakMap,r=async(i,o)=>{let a=e(i);if(!St(a,o)){const l={buffer:a.buffer,channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,disableNormalization:!a.normalize};a=t(o,l)}return s.set(o,a),dr(a)?await n(i,o,a.inputs[0]):await n(i,o,a),a};return{render(i,o){const a=s.get(o);return a!==void 0?Promise.resolve(a):r(i,o)}}},_y=(t,e)=>(n,s,r)=>{if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new e(n,s,r)}catch(i){throw i.name==="SyntaxError"?t():i}},yy=()=>new DOMException("","DataCloneError"),Du=t=>{const{port1:e,port2:n}=new MessageChannel;return new Promise(s=>{const r=()=>{n.onmessage=null,e.close(),n.close(),s()};n.onmessage=()=>r();try{e.postMessage(t,[t])}catch{}finally{r()}})},by=(t,e,n,s,r,i,o,a,c,l,u)=>(h,f)=>{const d=o(h)?h:i(h);if(r.has(f)){const p=n();return Promise.reject(p)}try{r.add(f)}catch{}return e(c,()=>c(d))?d.decodeAudioData(f).then(p=>(Du(f).catch(()=>{}),e(a,()=>a(p))||u(p),t.add(p),p)):new Promise((p,g)=>{const m=async()=>{try{await Du(f)}catch{}},_=w=>{g(w),m()};try{d.decodeAudioData(f,w=>{typeof w.copyFromChannel!="function"&&(l(w),qc(w)),t.add(w),m().then(()=>p(w))},w=>{_(w===null?s():w)})}catch(w){_(w)}})},vy=(t,e,n,s,r,i,o,a)=>(c,l)=>{const u=e.get(c);if(u===void 0)throw new Error("Missing the expected cycle count.");const h=i(c.context),f=a(h);if(u===l){if(e.delete(c),!f&&o(c)){const d=s(c),{outputs:p}=n(c);for(const g of p)if(oi(g)){const m=s(g[0]);t(d,m,g[1],g[2])}else{const m=r(g[0]);d.connect(m,g[1])}}}else e.set(c,u-l)},wy={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},Ay=(t,e,n,s,r,i,o)=>class extends t{constructor(c,l){const u=r(c),h={...wy,...l},f=s(u,h),d=i(u),p=d?n(h.maxDelayTime):null;super(c,!1,f,p),this._delayTime=e(this,d,f.delayTime),o(this,h.maxDelayTime)}get delayTime(){return this._delayTime}},Ty=(t,e,n,s,r)=>i=>{const o=new WeakMap,a=async(c,l)=>{let u=n(c);const h=St(u,l);if(!h){const f={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,delayTime:u.delayTime.value,maxDelayTime:i};u=e(l,f)}return o.set(l,u),h?await t(l,c.delayTime,u.delayTime):await s(l,c.delayTime,u.delayTime),await r(c,l,u),u};return{render(c,l){const u=o.get(l);return u!==void 0?Promise.resolve(u):a(c,l)}}},My=t=>(e,n,s,r)=>t(e[r],i=>i[0]===n&&i[1]===s),Sy=t=>(e,n)=>{t(e).delete(n)},Ey=t=>"delayTime"in t,Ny=(t,e,n)=>function s(r,i){const o=zi(i)?i:n(t,i);if(Ey(o))return[];if(r[0]===o)return[r];if(r.includes(o))return[];const{outputs:a}=e(o);return Array.from(a).map(c=>s([...r,o],c[0])).reduce((c,l)=>c.concat(l),[])},wi=(t,e,n)=>{const s=e[n];if(s===void 0)throw t();return s},Cy=t=>(e,n=void 0,s=void 0,r=0)=>n===void 0?e.forEach(i=>i.disconnect()):typeof n=="number"?wi(t,e,n).disconnect():Ki(n)?s===void 0?e.forEach(i=>i.disconnect(n)):r===void 0?wi(t,e,s).disconnect(n,0):wi(t,e,s).disconnect(n,0,r):s===void 0?e.forEach(i=>i.disconnect(n)):wi(t,e,s).disconnect(n,0),xy={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},Iy=(t,e,n,s,r,i,o,a)=>class extends t{constructor(l,u){const h=i(l),f={...xy,...u},d=s(h,f),p=o(h),g=p?n():null;super(l,!1,d,g),this._attack=e(this,p,d.attack),this._knee=e(this,p,d.knee),this._nativeDynamicsCompressorNode=d,this._ratio=e(this,p,d.ratio),this._release=e(this,p,d.release),this._threshold=e(this,p,d.threshold),a(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(l){const u=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=l,l>2)throw this._nativeDynamicsCompressorNode.channelCount=u,r()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(l){const u=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=l,l==="max")throw this._nativeDynamicsCompressorNode.channelCountMode=u,r()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return typeof this._nativeDynamicsCompressorNode.reduction.value=="number"?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}},Py=(t,e,n,s,r)=>()=>{const i=new WeakMap,o=async(a,c)=>{let l=n(a);const u=St(l,c);if(!u){const h={attack:l.attack.value,channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,knee:l.knee.value,ratio:l.ratio.value,release:l.release.value,threshold:l.threshold.value};l=e(c,h)}return i.set(c,l),u?(await t(c,a.attack,l.attack),await t(c,a.knee,l.knee),await t(c,a.ratio,l.ratio),await t(c,a.release,l.release),await t(c,a.threshold,l.threshold)):(await s(c,a.attack,l.attack),await s(c,a.knee,l.knee),await s(c,a.ratio,l.ratio),await s(c,a.release,l.release),await s(c,a.threshold,l.threshold)),await r(a,c,l),l};return{render(a,c){const l=i.get(c);return l!==void 0?Promise.resolve(l):o(a,c)}}},ky=()=>new DOMException("","EncodingError"),Oy=t=>e=>new Promise((n,s)=>{if(t===null){s(new SyntaxError);return}const r=t.document.head;if(r===null)s(new SyntaxError);else{const i=t.document.createElement("script"),o=new Blob([e],{type:"application/javascript"}),a=URL.createObjectURL(o),c=t.onerror,l=()=>{t.onerror=c,URL.revokeObjectURL(a)};t.onerror=(u,h,f,d,p)=>{if(h===a||h===t.location.href&&f===1&&d===1)return l(),s(p),!1;if(c!==null)return c(u,h,f,d,p)},i.onerror=()=>{l(),s(new SyntaxError)},i.onload=()=>{l(),n()},i.src=a,i.type="module",r.appendChild(i)}}),Ry=t=>class{constructor(n){this._nativeEventTarget=n,this._listeners=new WeakMap}addEventListener(n,s,r){if(s!==null){let i=this._listeners.get(s);i===void 0&&(i=t(this,s),typeof s=="function"&&this._listeners.set(s,i)),this._nativeEventTarget.addEventListener(n,i,r)}}dispatchEvent(n){return this._nativeEventTarget.dispatchEvent(n)}removeEventListener(n,s,r){const i=s===null?void 0:this._listeners.get(s);this._nativeEventTarget.removeEventListener(n,i===void 0?null:i,r)}},Dy=t=>(e,n,s)=>{Object.defineProperties(t,{currentFrame:{configurable:!0,get(){return Math.round(e*n)}},currentTime:{configurable:!0,get(){return e}}});try{return s()}finally{t!==null&&(delete t.currentFrame,delete t.currentTime)}},Fy=t=>async e=>{try{const n=await fetch(e);if(n.ok)return[await n.text(),n.url]}catch{}throw t()},By={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},Vy=(t,e,n,s,r,i)=>class extends t{constructor(a,c){const l=r(a),u={...By,...c},h=s(l,u),f=i(l),d=f?n():null;super(a,!1,h,d),this._gain=e(this,f,h.gain,It,Dt)}get gain(){return this._gain}},Ly=(t,e,n,s,r)=>()=>{const i=new WeakMap,o=async(a,c)=>{let l=n(a);const u=St(l,c);if(!u){const h={channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,gain:l.gain.value};l=e(c,h)}return i.set(c,l),u?await t(c,a.gain,l.gain):await s(c,a.gain,l.gain),await r(a,c,l),l};return{render(a,c){const l=i.get(c);return l!==void 0?Promise.resolve(l):o(a,c)}}},Uy=(t,e)=>n=>e(t,n),jy=t=>e=>{const n=t(e);if(n.renderer===null)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return n.renderer},qy=t=>e=>{var n;return(n=t.get(e))!==null&&n!==void 0?n:0},$y=t=>e=>{const n=t(e);if(n.renderer===null)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return n.renderer},Wy=t=>e=>t.get(e),at=()=>new DOMException("","InvalidStateError"),Gy=t=>e=>{const n=t.get(e);if(n===void 0)throw at();return n},Hy=(t,e)=>n=>{let s=t.get(n);if(s!==void 0)return s;if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");return s=new e(1,1,44100),t.set(n,s),s},zy=t=>e=>{const n=t.get(e);if(n===void 0)throw new Error("The context has no set of AudioWorkletNodes.");return n},Mo=()=>new DOMException("","InvalidAccessError"),Qy=t=>{t.getFrequencyResponse=(e=>(n,s,r)=>{if(n.length!==s.length||s.length!==r.length)throw Mo();return e.call(t,n,s,r)})(t.getFrequencyResponse)},Yy={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},Ky=(t,e,n,s,r,i)=>class extends t{constructor(a,c){const l=s(a),u=r(l),h={...Yy,...c},f=e(l,u?null:a.baseLatency,h),d=u?n(h.feedback,h.feedforward):null;super(a,!1,f,d),Qy(f),this._nativeIIRFilterNode=f,i(this,1)}getFrequencyResponse(a,c,l){return this._nativeIIRFilterNode.getFrequencyResponse(a,c,l)}},Td=(t,e,n,s,r,i,o,a,c,l,u)=>{const h=l.length;let f=a;for(let d=0;d<h;d+=1){let p=n[0]*l[d];for(let g=1;g<r;g+=1){const m=f-g&c-1;p+=n[g]*i[m],p-=t[g]*o[m]}for(let g=r;g<s;g+=1)p+=n[g]*i[f-g&c-1];for(let g=r;g<e;g+=1)p-=t[g]*o[f-g&c-1];i[f]=l[d],o[f]=p,f=f+1&c-1,u[d]=p}return f},Zy=(t,e,n,s)=>{const r=n instanceof Float64Array?n:new Float64Array(n),i=s instanceof Float64Array?s:new Float64Array(s),o=r.length,a=i.length,c=Math.min(o,a);if(r[0]!==1){for(let p=0;p<o;p+=1)i[p]/=r[0];for(let p=1;p<a;p+=1)r[p]/=r[0]}const l=32,u=new Float32Array(l),h=new Float32Array(l),f=e.createBuffer(t.numberOfChannels,t.length,t.sampleRate),d=t.numberOfChannels;for(let p=0;p<d;p+=1){const g=t.getChannelData(p),m=f.getChannelData(p);u.fill(0),h.fill(0),Td(r,o,i,a,c,u,h,0,l,g,m)}return f},Jy=(t,e,n,s,r)=>(i,o)=>{const a=new WeakMap;let c=null;const l=async(u,h)=>{let f=null,d=e(u);const p=St(d,h);if(h.createIIRFilter===void 0?f=t(h,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):p||(d=h.createIIRFilter(o,i)),a.set(h,f===null?d:f),f!==null){if(c===null){if(n===null)throw new Error("Missing the native OfflineAudioContext constructor.");const m=new n(u.context.destination.channelCount,u.context.length,h.sampleRate);c=(async()=>{await s(u,m,m.destination);const _=await r(m);return Zy(_,h,i,o)})()}const g=await c;return f.buffer=g,f.start(0),f}return await s(u,h,d),d};return{render(u,h){const f=a.get(h);return f!==void 0?Promise.resolve(f):l(u,h)}}},Xy=(t,e,n,s,r,i)=>o=>(a,c)=>{const l=t.get(a);if(l===void 0){if(!o&&i(a)){const u=s(a),{outputs:h}=n(a);for(const f of h)if(oi(f)){const d=s(f[0]);e(u,d,f[1],f[2])}else{const d=r(f[0]);u.disconnect(d,f[1])}}t.set(a,c)}else t.set(a,l+c)},eb=(t,e)=>n=>{const s=t.get(n);return e(s)||e(n)},tb=(t,e)=>n=>t.has(n)||e(n),nb=(t,e)=>n=>t.has(n)||e(n),sb=(t,e)=>n=>{const s=t.get(n);return e(s)||e(n)},rb=t=>e=>t!==null&&e instanceof t,ib=t=>e=>t!==null&&typeof t.AudioNode=="function"&&e instanceof t.AudioNode,ob=t=>e=>t!==null&&typeof t.AudioParam=="function"&&e instanceof t.AudioParam,ab=(t,e)=>n=>t(n)||e(n),cb=t=>e=>t!==null&&e instanceof t,lb=t=>t!==null&&t.isSecureContext,ub=(t,e,n,s)=>class extends t{constructor(i,o){const a=n(i),c=e(a,o);if(s(a))throw TypeError();super(i,!0,c,null),this._nativeMediaElementAudioSourceNode=c}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}},hb={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},fb=(t,e,n,s)=>class extends t{constructor(i,o){const a=n(i);if(s(a))throw new TypeError;const c={...hb,...o},l=e(a,c);super(i,!1,l,null),this._nativeMediaStreamAudioDestinationNode=l}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}},db=(t,e,n,s)=>class extends t{constructor(i,o){const a=n(i),c=e(a,o);if(s(a))throw new TypeError;super(i,!0,c,null),this._nativeMediaStreamAudioSourceNode=c}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}},pb=(t,e,n)=>class extends t{constructor(r,i){const o=n(r),a=e(o,i);super(r,!0,a,null)}},mb=(t,e,n,s,r,i)=>class extends n{constructor(a,c){super(a),this._nativeContext=a,Ao.set(this,a),s(a)&&r.set(a,new Set),this._destination=new t(this,c),this._listener=e(this,a),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(a){const c=typeof a=="function"?i(this,a):null;this._nativeContext.onstatechange=c;const l=this._nativeContext.onstatechange;this._onstatechange=l!==null&&l===c?a:l}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}},Kr=t=>{const e=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const n=t.decodeAudioData(e.buffer,()=>{});return n===void 0?!1:(n.catch(()=>{}),!0)}catch{}return!1},gb=(t,e)=>(n,s,r)=>{const i=new Set;return n.connect=(o=>(a,c=0,l=0)=>{const u=i.size===0;if(e(a))return o.call(n,a,c,l),t(i,[a,c,l],h=>h[0]===a&&h[1]===c&&h[2]===l,!0),u&&s(),a;o.call(n,a,c),t(i,[a,c],h=>h[0]===a&&h[1]===c,!0),u&&s()})(n.connect),n.disconnect=(o=>(a,c,l)=>{const u=i.size>0;if(a===void 0)o.apply(n),i.clear();else if(typeof a=="number"){o.call(n,a);for(const f of i)f[1]===a&&i.delete(f)}else{e(a)?o.call(n,a,c,l):o.call(n,a,c);for(const f of i)f[0]===a&&(c===void 0||f[1]===c)&&(l===void 0||f[2]===l)&&i.delete(f)}const h=i.size===0;u&&h&&r()})(n.disconnect),n},Le=(t,e,n)=>{const s=e[n];s!==void 0&&s!==t[n]&&(t[n]=s)},nt=(t,e)=>{Le(t,e,"channelCount"),Le(t,e,"channelCountMode"),Le(t,e,"channelInterpretation")},Fu=t=>typeof t.getFloatTimeDomainData=="function",_b=t=>{t.getFloatTimeDomainData=e=>{const n=new Uint8Array(e.length);t.getByteTimeDomainData(n);const s=Math.max(n.length,t.fftSize);for(let r=0;r<s;r+=1)e[r]=(n[r]-128)*.0078125;return e}},yb=(t,e)=>(n,s)=>{const r=n.createAnalyser();if(nt(r,s),!(s.maxDecibels>s.minDecibels))throw e();return Le(r,s,"fftSize"),Le(r,s,"maxDecibels"),Le(r,s,"minDecibels"),Le(r,s,"smoothingTimeConstant"),t(Fu,()=>Fu(r))||_b(r),r},bb=t=>t===null?null:t.hasOwnProperty("AudioBuffer")?t.AudioBuffer:null,We=(t,e,n)=>{const s=e[n];s!==void 0&&s!==t[n].value&&(t[n].value=s)},vb=t=>{t.start=(e=>{let n=!1;return(s=0,r=0,i)=>{if(n)throw at();e.call(t,s,r,i),n=!0}})(t.start)},Gc=t=>{t.start=(e=>(n=0,s=0,r)=>{if(typeof r=="number"&&r<0||s<0||n<0)throw new RangeError("The parameters can't be negative.");e.call(t,n,s,r)})(t.start)},Hc=t=>{t.stop=(e=>(n=0)=>{if(n<0)throw new RangeError("The parameter can't be negative.");e.call(t,n)})(t.stop)},wb=(t,e,n,s,r,i,o,a,c,l,u)=>(h,f)=>{const d=h.createBufferSource();return nt(d,f),We(d,f,"playbackRate"),Le(d,f,"buffer"),Le(d,f,"loop"),Le(d,f,"loopEnd"),Le(d,f,"loopStart"),e(n,()=>n(h))||vb(d),e(s,()=>s(h))||c(d),e(r,()=>r(h))||l(d,h),e(i,()=>i(h))||Gc(d),e(o,()=>o(h))||u(d,h),e(a,()=>a(h))||Hc(d),t(h,d),d},Ab=t=>t===null?null:t.hasOwnProperty("AudioContext")?t.AudioContext:t.hasOwnProperty("webkitAudioContext")?t.webkitAudioContext:null,Tb=(t,e)=>(n,s,r)=>{const i=n.destination;if(i.channelCount!==s)try{i.channelCount=s}catch{}r&&i.channelCountMode!=="explicit"&&(i.channelCountMode="explicit"),i.maxChannelCount===0&&Object.defineProperty(i,"maxChannelCount",{value:s});const o=t(n,{channelCount:s,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation,gain:1});return e(o,"channelCount",a=>()=>a.call(o),a=>c=>{a.call(o,c);try{i.channelCount=c}catch(l){if(c>i.maxChannelCount)throw l}}),e(o,"channelCountMode",a=>()=>a.call(o),a=>c=>{a.call(o,c),i.channelCountMode=c}),e(o,"channelInterpretation",a=>()=>a.call(o),a=>c=>{a.call(o,c),i.channelInterpretation=c}),Object.defineProperty(o,"maxChannelCount",{get:()=>i.maxChannelCount}),o.connect(i),o},Mb=t=>t===null?null:t.hasOwnProperty("AudioWorkletNode")?t.AudioWorkletNode:null,Sb=t=>{const{port1:e}=new MessageChannel;try{e.postMessage(t)}finally{e.close()}},Eb=(t,e,n,s,r)=>(i,o,a,c,l,u)=>{if(a!==null)try{const h=new a(i,c,u),f=new Map;let d=null;if(Object.defineProperties(h,{channelCount:{get:()=>u.channelCount,set:()=>{throw t()}},channelCountMode:{get:()=>"explicit",set:()=>{throw t()}},onprocessorerror:{get:()=>d,set:p=>{typeof d=="function"&&h.removeEventListener("processorerror",d),d=typeof p=="function"?p:null,typeof d=="function"&&h.addEventListener("processorerror",d)}}}),h.addEventListener=(p=>(...g)=>{if(g[0]==="processorerror"){const m=typeof g[1]=="function"?g[1]:typeof g[1]=="object"&&g[1]!==null&&typeof g[1].handleEvent=="function"?g[1].handleEvent:null;if(m!==null){const _=f.get(g[1]);_!==void 0?g[1]=_:(g[1]=w=>{w.type==="error"?(Object.defineProperties(w,{type:{value:"processorerror"}}),m(w)):m(new ErrorEvent(g[0],{...w}))},f.set(m,g[1]))}}return p.call(h,"error",g[1],g[2]),p.call(h,...g)})(h.addEventListener),h.removeEventListener=(p=>(...g)=>{if(g[0]==="processorerror"){const m=f.get(g[1]);m!==void 0&&(f.delete(g[1]),g[1]=m)}return p.call(h,"error",g[1],g[2]),p.call(h,g[0],g[1],g[2])})(h.removeEventListener),u.numberOfOutputs!==0){const p=n(i,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return h.connect(p).connect(i.destination),r(h,()=>p.disconnect(),()=>p.connect(i.destination))}return h}catch(h){throw h.code===11?s():h}if(l===void 0)throw s();return Sb(u),e(i,o,l,u)},Md=(t,e)=>t===null?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(t*e))))),Nb=t=>new Promise((e,n)=>{const{port1:s,port2:r}=new MessageChannel;s.onmessage=({data:i})=>{s.close(),r.close(),e(i)},s.onmessageerror=({data:i})=>{s.close(),r.close(),n(i)},r.postMessage(t)}),Cb=async(t,e)=>{const n=await Nb(e);return new t(n)},xb=(t,e,n,s)=>{let r=ec.get(t);r===void 0&&(r=new WeakMap,ec.set(t,r));const i=Cb(n,s);return r.set(e,i),i},Ib=(t,e,n,s,r,i,o,a,c,l,u,h,f)=>(d,p,g,m)=>{if(m.numberOfInputs===0&&m.numberOfOutputs===0)throw c();const _=Array.isArray(m.outputChannelCount)?m.outputChannelCount:Array.from(m.outputChannelCount);if(_.some(T=>T<1))throw c();if(_.length!==m.numberOfOutputs)throw e();if(m.channelCountMode!=="explicit")throw c();const w=m.channelCount*m.numberOfInputs,A=_.reduce((T,I)=>T+I,0),b=g.parameterDescriptors===void 0?0:g.parameterDescriptors.length;if(w+b>6||A>6)throw c();const y=new MessageChannel,M=[],C=[];for(let T=0;T<m.numberOfInputs;T+=1)M.push(o(d,{channelCount:m.channelCount,channelCountMode:m.channelCountMode,channelInterpretation:m.channelInterpretation,gain:1})),C.push(r(d,{channelCount:m.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:m.channelCount}));const E=[];if(g.parameterDescriptors!==void 0)for(const{defaultValue:T,maxValue:I,minValue:R,name:D}of g.parameterDescriptors){const V=i(d,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:m.parameterData[D]!==void 0?m.parameterData[D]:T===void 0?0:T});Object.defineProperties(V.offset,{defaultValue:{get:()=>T===void 0?0:T},maxValue:{get:()=>I===void 0?It:I},minValue:{get:()=>R===void 0?Dt:R}}),E.push(V)}const B=s(d,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,w+b)}),x=Md(p,d.sampleRate),O=a(d,x,w+b,Math.max(1,A)),k=r(d,{channelCount:Math.max(1,A),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,A)}),G=[];for(let T=0;T<m.numberOfOutputs;T+=1)G.push(s(d,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:_[T]}));for(let T=0;T<m.numberOfInputs;T+=1){M[T].connect(C[T]);for(let I=0;I<m.channelCount;I+=1)C[T].connect(B,I,T*m.channelCount+I)}const Q=new wd(g.parameterDescriptors===void 0?[]:g.parameterDescriptors.map(({name:T},I)=>{const R=E[I];return R.connect(B,0,w+I),R.start(0),[T,R.offset]}));B.connect(O);let ee=m.channelInterpretation,H=null;const W=m.numberOfOutputs===0?[O]:G,K={get bufferSize(){return x},get channelCount(){return m.channelCount},set channelCount(T){throw n()},get channelCountMode(){return m.channelCountMode},set channelCountMode(T){throw n()},get channelInterpretation(){return ee},set channelInterpretation(T){for(const I of M)I.channelInterpretation=T;ee=T},get context(){return O.context},get inputs(){return M},get numberOfInputs(){return m.numberOfInputs},get numberOfOutputs(){return m.numberOfOutputs},get onprocessorerror(){return H},set onprocessorerror(T){typeof H=="function"&&K.removeEventListener("processorerror",H),H=typeof T=="function"?T:null,typeof H=="function"&&K.addEventListener("processorerror",H)},get parameters(){return Q},get port(){return y.port2},addEventListener(...T){return O.addEventListener(T[0],T[1],T[2])},connect:t.bind(null,W),disconnect:l.bind(null,W),dispatchEvent(...T){return O.dispatchEvent(T[0])},removeEventListener(...T){return O.removeEventListener(T[0],T[1],T[2])}},Z=new Map;y.port1.addEventListener=(T=>(...I)=>{if(I[0]==="message"){const R=typeof I[1]=="function"?I[1]:typeof I[1]=="object"&&I[1]!==null&&typeof I[1].handleEvent=="function"?I[1].handleEvent:null;if(R!==null){const D=Z.get(I[1]);D!==void 0?I[1]=D:(I[1]=V=>{u(d.currentTime,d.sampleRate,()=>R(V))},Z.set(R,I[1]))}}return T.call(y.port1,I[0],I[1],I[2])})(y.port1.addEventListener),y.port1.removeEventListener=(T=>(...I)=>{if(I[0]==="message"){const R=Z.get(I[1]);R!==void 0&&(Z.delete(I[1]),I[1]=R)}return T.call(y.port1,I[0],I[1],I[2])})(y.port1.removeEventListener);let ae=null;Object.defineProperty(y.port1,"onmessage",{get:()=>ae,set:T=>{typeof ae=="function"&&y.port1.removeEventListener("message",ae),ae=typeof T=="function"?T:null,typeof ae=="function"&&(y.port1.addEventListener("message",ae),y.port1.start())}}),g.prototype.port=y.port1;let ne=null;xb(d,K,g,m).then(T=>ne=T);const pt=Ji(m.numberOfInputs,m.channelCount),Et=Ji(m.numberOfOutputs,_),ge=g.parameterDescriptors===void 0?[]:g.parameterDescriptors.reduce((T,{name:I})=>({...T,[I]:new Float32Array(128)}),{});let Te=!0;const Qe=()=>{m.numberOfOutputs>0&&O.disconnect(k);for(let T=0,I=0;T<m.numberOfOutputs;T+=1){const R=G[T];for(let D=0;D<_[T];D+=1)k.disconnect(R,I+D,D);I+=_[T]}},J=new Map;O.onaudioprocess=({inputBuffer:T,outputBuffer:I})=>{if(ne!==null){const R=h(K);for(let D=0;D<x;D+=128){for(let V=0;V<m.numberOfInputs;V+=1)for(let L=0;L<m.channelCount;L+=1)Zi(T,pt[V],L,L,D);g.parameterDescriptors!==void 0&&g.parameterDescriptors.forEach(({name:V},L)=>{Zi(T,ge,V,w+L,D)});for(let V=0;V<m.numberOfInputs;V+=1)for(let L=0;L<_[V];L+=1)Et[V][L].byteLength===0&&(Et[V][L]=new Float32Array(128));try{const V=pt.map((q,U)=>{if(R[U].size>0)return J.set(U,x/128),q;const Y=J.get(U);return Y===void 0?[]:(q.every(X=>X.every(ce=>ce===0))&&(Y===1?J.delete(U):J.set(U,Y-1)),q)});Te=u(d.currentTime+D/d.sampleRate,d.sampleRate,()=>ne.process(V,Et,ge));for(let q=0,U=0;q<m.numberOfOutputs;q+=1){for(let te=0;te<_[q];te+=1)Ad(I,Et[q],te,U+te,D);U+=_[q]}}catch(V){Te=!1,K.dispatchEvent(new ErrorEvent("processorerror",{colno:V.colno,filename:V.filename,lineno:V.lineno,message:V.message}))}if(!Te){for(let V=0;V<m.numberOfInputs;V+=1){M[V].disconnect(C[V]);for(let L=0;L<m.channelCount;L+=1)C[D].disconnect(B,L,V*m.channelCount+L)}if(g.parameterDescriptors!==void 0){const V=g.parameterDescriptors.length;for(let L=0;L<V;L+=1){const q=E[L];q.disconnect(B,0,w+L),q.stop()}}B.disconnect(O),O.onaudioprocess=null,dn?Qe():In();break}}}};let dn=!1;const Bt=o(d,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),xn=()=>O.connect(Bt).connect(d.destination),In=()=>{O.disconnect(Bt),Bt.disconnect()},v=()=>{if(Te){In(),m.numberOfOutputs>0&&O.connect(k);for(let T=0,I=0;T<m.numberOfOutputs;T+=1){const R=G[T];for(let D=0;D<_[T];D+=1)k.connect(R,I+D,D);I+=_[T]}}dn=!0},S=()=>{Te&&(xn(),Qe()),dn=!1};return xn(),f(K,v,S)},Sd=(t,e)=>{const n=t.createBiquadFilter();return nt(n,e),We(n,e,"Q"),We(n,e,"detune"),We(n,e,"frequency"),We(n,e,"gain"),Le(n,e,"type"),n},Pb=(t,e)=>(n,s)=>{const r=n.createChannelMerger(s.numberOfInputs);return t!==null&&t.name==="webkitAudioContext"&&e(n,r),nt(r,s),r},kb=t=>{const e=t.numberOfOutputs;Object.defineProperty(t,"channelCount",{get:()=>e,set:n=>{if(n!==e)throw at()}}),Object.defineProperty(t,"channelCountMode",{get:()=>"explicit",set:n=>{if(n!=="explicit")throw at()}}),Object.defineProperty(t,"channelInterpretation",{get:()=>"discrete",set:n=>{if(n!=="discrete")throw at()}})},ai=(t,e)=>{const n=t.createChannelSplitter(e.numberOfOutputs);return nt(n,e),kb(n),n},Ob=(t,e,n,s,r)=>(i,o)=>{if(i.createConstantSource===void 0)return n(i,o);const a=i.createConstantSource();return nt(a,o),We(a,o,"offset"),e(s,()=>s(i))||Gc(a),e(r,()=>r(i))||Hc(a),t(i,a),a},pr=(t,e)=>(t.connect=e.connect.bind(e),t.disconnect=e.disconnect.bind(e),t),Rb=(t,e,n,s)=>(r,{offset:i,...o})=>{const a=r.createBuffer(1,2,44100),c=e(r,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),l=n(r,{...o,gain:i}),u=a.getChannelData(0);u[0]=1,u[1]=1,c.buffer=a,c.loop=!0;const h={get bufferSize(){},get channelCount(){return l.channelCount},set channelCount(p){l.channelCount=p},get channelCountMode(){return l.channelCountMode},set channelCountMode(p){l.channelCountMode=p},get channelInterpretation(){return l.channelInterpretation},set channelInterpretation(p){l.channelInterpretation=p},get context(){return l.context},get inputs(){return[]},get numberOfInputs(){return c.numberOfInputs},get numberOfOutputs(){return l.numberOfOutputs},get offset(){return l.gain},get onended(){return c.onended},set onended(p){c.onended=p},addEventListener(...p){return c.addEventListener(p[0],p[1],p[2])},dispatchEvent(...p){return c.dispatchEvent(p[0])},removeEventListener(...p){return c.removeEventListener(p[0],p[1],p[2])},start(p=0){c.start.call(c,p)},stop(p=0){c.stop.call(c,p)}},f=()=>c.connect(l),d=()=>c.disconnect(l);return t(r,c),s(pr(h,l),f,d)},Db=(t,e)=>(n,s)=>{const r=n.createConvolver();if(nt(r,s),s.disableNormalization===r.normalize&&(r.normalize=!s.disableNormalization),Le(r,s,"buffer"),s.channelCount>2||(e(r,"channelCount",i=>()=>i.call(r),i=>o=>{if(o>2)throw t();return i.call(r,o)}),s.channelCountMode==="max"))throw t();return e(r,"channelCountMode",i=>()=>i.call(r),i=>o=>{if(o==="max")throw t();return i.call(r,o)}),r},Ed=(t,e)=>{const n=t.createDelay(e.maxDelayTime);return nt(n,e),We(n,e,"delayTime"),n},Fb=t=>(e,n)=>{const s=e.createDynamicsCompressor();if(nt(s,n),n.channelCount>2||n.channelCountMode==="max")throw t();return We(s,n,"attack"),We(s,n,"knee"),We(s,n,"ratio"),We(s,n,"release"),We(s,n,"threshold"),s},Ft=(t,e)=>{const n=t.createGain();return nt(n,e),We(n,e,"gain"),n},Bb=t=>(e,n,s)=>{if(e.createIIRFilter===void 0)return t(e,n,s);const r=e.createIIRFilter(s.feedforward,s.feedback);return nt(r,s),r};function Vb(t,e){const n=e[0]*e[0]+e[1]*e[1];return[(t[0]*e[0]+t[1]*e[1])/n,(t[1]*e[0]-t[0]*e[1])/n]}function Lb(t,e){return[t[0]*e[0]-t[1]*e[1],t[0]*e[1]+t[1]*e[0]]}function Bu(t,e){let n=[0,0];for(let s=t.length-1;s>=0;s-=1)n=Lb(n,e),n[0]+=t[s];return n}const Ub=(t,e,n,s)=>(r,i,{channelCount:o,channelCountMode:a,channelInterpretation:c,feedback:l,feedforward:u})=>{const h=Md(i,r.sampleRate),f=l instanceof Float64Array?l:new Float64Array(l),d=u instanceof Float64Array?u:new Float64Array(u),p=f.length,g=d.length,m=Math.min(p,g);if(p===0||p>20)throw s();if(f[0]===0)throw e();if(g===0||g>20)throw s();if(d[0]===0)throw e();if(f[0]!==1){for(let E=0;E<g;E+=1)d[E]/=f[0];for(let E=1;E<p;E+=1)f[E]/=f[0]}const _=n(r,h,o,o);_.channelCount=o,_.channelCountMode=a,_.channelInterpretation=c;const w=32,A=[],b=[],y=[];for(let E=0;E<o;E+=1){A.push(0);const B=new Float32Array(w),x=new Float32Array(w);B.fill(0),x.fill(0),b.push(B),y.push(x)}_.onaudioprocess=E=>{const B=E.inputBuffer,x=E.outputBuffer,O=B.numberOfChannels;for(let k=0;k<O;k+=1){const G=B.getChannelData(k),Q=x.getChannelData(k);A[k]=Td(f,p,d,g,m,b[k],y[k],A[k],w,G,Q)}};const M=r.sampleRate/2;return pr({get bufferSize(){return h},get channelCount(){return _.channelCount},set channelCount(E){_.channelCount=E},get channelCountMode(){return _.channelCountMode},set channelCountMode(E){_.channelCountMode=E},get channelInterpretation(){return _.channelInterpretation},set channelInterpretation(E){_.channelInterpretation=E},get context(){return _.context},get inputs(){return[_]},get numberOfInputs(){return _.numberOfInputs},get numberOfOutputs(){return _.numberOfOutputs},addEventListener(...E){return _.addEventListener(E[0],E[1],E[2])},dispatchEvent(...E){return _.dispatchEvent(E[0])},getFrequencyResponse(E,B,x){if(E.length!==B.length||B.length!==x.length)throw t();const O=E.length;for(let k=0;k<O;k+=1){const G=-Math.PI*(E[k]/M),Q=[Math.cos(G),Math.sin(G)],ee=Bu(d,Q),H=Bu(f,Q),W=Vb(ee,H);B[k]=Math.sqrt(W[0]*W[0]+W[1]*W[1]),x[k]=Math.atan2(W[1],W[0])}},removeEventListener(...E){return _.removeEventListener(E[0],E[1],E[2])}},_)},jb=(t,e)=>t.createMediaElementSource(e.mediaElement),qb=(t,e)=>{const n=t.createMediaStreamDestination();return nt(n,e),n.numberOfOutputs===1&&Object.defineProperty(n,"numberOfOutputs",{get:()=>0}),n},$b=(t,{mediaStream:e})=>{const n=e.getAudioTracks();n.sort((i,o)=>i.id<o.id?-1:i.id>o.id?1:0);const s=n.slice(0,1),r=t.createMediaStreamSource(new MediaStream(s));return Object.defineProperty(r,"mediaStream",{value:e}),r},Wb=(t,e)=>(n,{mediaStreamTrack:s})=>{if(typeof n.createMediaStreamTrackSource=="function")return n.createMediaStreamTrackSource(s);const r=new MediaStream([s]),i=n.createMediaStreamSource(r);if(s.kind!=="audio")throw t();if(e(n))throw new TypeError;return i},Gb=t=>t===null?null:t.hasOwnProperty("OfflineAudioContext")?t.OfflineAudioContext:t.hasOwnProperty("webkitOfflineAudioContext")?t.webkitOfflineAudioContext:null,Hb=(t,e,n,s,r,i)=>(o,a)=>{const c=o.createOscillator();return nt(c,a),We(c,a,"detune"),We(c,a,"frequency"),a.periodicWave!==void 0?c.setPeriodicWave(a.periodicWave):Le(c,a,"type"),e(n,()=>n(o))||Gc(c),e(s,()=>s(o))||i(c,o),e(r,()=>r(o))||Hc(c),t(o,c),c},zb=t=>(e,n)=>{const s=e.createPanner();return s.orientationX===void 0?t(e,n):(nt(s,n),We(s,n,"orientationX"),We(s,n,"orientationY"),We(s,n,"orientationZ"),We(s,n,"positionX"),We(s,n,"positionY"),We(s,n,"positionZ"),Le(s,n,"coneInnerAngle"),Le(s,n,"coneOuterAngle"),Le(s,n,"coneOuterGain"),Le(s,n,"distanceModel"),Le(s,n,"maxDistance"),Le(s,n,"panningModel"),Le(s,n,"refDistance"),Le(s,n,"rolloffFactor"),s)},Qb=(t,e,n,s,r,i,o,a,c,l)=>(u,{coneInnerAngle:h,coneOuterAngle:f,coneOuterGain:d,distanceModel:p,maxDistance:g,orientationX:m,orientationY:_,orientationZ:w,panningModel:A,positionX:b,positionY:y,positionZ:M,refDistance:C,rolloffFactor:E,...B})=>{const x=u.createPanner();if(B.channelCount>2||B.channelCountMode==="max")throw o();nt(x,B);const O={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},k=n(u,{...O,channelInterpretation:"speakers",numberOfInputs:6}),G=s(u,{...B,gain:1}),Q=s(u,{...O,gain:1}),ee=s(u,{...O,gain:0}),H=s(u,{...O,gain:0}),W=s(u,{...O,gain:0}),K=s(u,{...O,gain:0}),Z=s(u,{...O,gain:0}),ae=r(u,256,6,1),ne=i(u,{...O,curve:new Float32Array([1,1]),oversample:"none"});let de=[m,_,w],pt=[b,y,M];const Et=new Float32Array(1);ae.onaudioprocess=({inputBuffer:J})=>{const dn=[c(J,Et,0),c(J,Et,1),c(J,Et,2)];dn.some((xn,In)=>xn!==de[In])&&(x.setOrientation(...dn),de=dn);const Bt=[c(J,Et,3),c(J,Et,4),c(J,Et,5)];Bt.some((xn,In)=>xn!==pt[In])&&(x.setPosition(...Bt),pt=Bt)},Object.defineProperty(ee.gain,"defaultValue",{get:()=>0}),Object.defineProperty(H.gain,"defaultValue",{get:()=>0}),Object.defineProperty(W.gain,"defaultValue",{get:()=>0}),Object.defineProperty(K.gain,"defaultValue",{get:()=>0}),Object.defineProperty(Z.gain,"defaultValue",{get:()=>0});const ge={get bufferSize(){},get channelCount(){return x.channelCount},set channelCount(J){if(J>2)throw o();G.channelCount=J,x.channelCount=J},get channelCountMode(){return x.channelCountMode},set channelCountMode(J){if(J==="max")throw o();G.channelCountMode=J,x.channelCountMode=J},get channelInterpretation(){return x.channelInterpretation},set channelInterpretation(J){G.channelInterpretation=J,x.channelInterpretation=J},get coneInnerAngle(){return x.coneInnerAngle},set coneInnerAngle(J){x.coneInnerAngle=J},get coneOuterAngle(){return x.coneOuterAngle},set coneOuterAngle(J){x.coneOuterAngle=J},get coneOuterGain(){return x.coneOuterGain},set coneOuterGain(J){if(J<0||J>1)throw e();x.coneOuterGain=J},get context(){return x.context},get distanceModel(){return x.distanceModel},set distanceModel(J){x.distanceModel=J},get inputs(){return[G]},get maxDistance(){return x.maxDistance},set maxDistance(J){if(J<0)throw new RangeError;x.maxDistance=J},get numberOfInputs(){return x.numberOfInputs},get numberOfOutputs(){return x.numberOfOutputs},get orientationX(){return Q.gain},get orientationY(){return ee.gain},get orientationZ(){return H.gain},get panningModel(){return x.panningModel},set panningModel(J){x.panningModel=J},get positionX(){return W.gain},get positionY(){return K.gain},get positionZ(){return Z.gain},get refDistance(){return x.refDistance},set refDistance(J){if(J<0)throw new RangeError;x.refDistance=J},get rolloffFactor(){return x.rolloffFactor},set rolloffFactor(J){if(J<0)throw new RangeError;x.rolloffFactor=J},addEventListener(...J){return G.addEventListener(J[0],J[1],J[2])},dispatchEvent(...J){return G.dispatchEvent(J[0])},removeEventListener(...J){return G.removeEventListener(J[0],J[1],J[2])}};h!==ge.coneInnerAngle&&(ge.coneInnerAngle=h),f!==ge.coneOuterAngle&&(ge.coneOuterAngle=f),d!==ge.coneOuterGain&&(ge.coneOuterGain=d),p!==ge.distanceModel&&(ge.distanceModel=p),g!==ge.maxDistance&&(ge.maxDistance=g),m!==ge.orientationX.value&&(ge.orientationX.value=m),_!==ge.orientationY.value&&(ge.orientationY.value=_),w!==ge.orientationZ.value&&(ge.orientationZ.value=w),A!==ge.panningModel&&(ge.panningModel=A),b!==ge.positionX.value&&(ge.positionX.value=b),y!==ge.positionY.value&&(ge.positionY.value=y),M!==ge.positionZ.value&&(ge.positionZ.value=M),C!==ge.refDistance&&(ge.refDistance=C),E!==ge.rolloffFactor&&(ge.rolloffFactor=E),(de[0]!==1||de[1]!==0||de[2]!==0)&&x.setOrientation(...de),(pt[0]!==0||pt[1]!==0||pt[2]!==0)&&x.setPosition(...pt);const Te=()=>{G.connect(x),t(G,ne,0,0),ne.connect(Q).connect(k,0,0),ne.connect(ee).connect(k,0,1),ne.connect(H).connect(k,0,2),ne.connect(W).connect(k,0,3),ne.connect(K).connect(k,0,4),ne.connect(Z).connect(k,0,5),k.connect(ae).connect(u.destination)},Qe=()=>{G.disconnect(x),a(G,ne,0,0),ne.disconnect(Q),Q.disconnect(k),ne.disconnect(ee),ee.disconnect(k),ne.disconnect(H),H.disconnect(k),ne.disconnect(W),W.disconnect(k),ne.disconnect(K),K.disconnect(k),ne.disconnect(Z),Z.disconnect(k),k.disconnect(ae),ae.disconnect(u.destination)};return l(pr(ge,x),Te,Qe)},Yb=t=>(e,{disableNormalization:n,imag:s,real:r})=>{const i=s instanceof Float32Array?s:new Float32Array(s),o=r instanceof Float32Array?r:new Float32Array(r),a=e.createPeriodicWave(o,i,{disableNormalization:n});if(Array.from(s).length<2)throw t();return a},ci=(t,e,n,s)=>t.createScriptProcessor(e,n,s),Kb=(t,e)=>(n,s)=>{const r=s.channelCountMode;if(r==="clamped-max")throw e();if(n.createStereoPanner===void 0)return t(n,s);const i=n.createStereoPanner();return nt(i,s),We(i,s,"pan"),Object.defineProperty(i,"channelCountMode",{get:()=>r,set:o=>{if(o!==r)throw e()}}),i},Zb=(t,e,n,s,r,i)=>{const a=new Float32Array([1,1]),c=Math.PI/2,l={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},u={...l,oversample:"none"},h=(p,g,m,_)=>{const w=new Float32Array(16385),A=new Float32Array(16385);for(let B=0;B<16385;B+=1){const x=B/16384*c;w[B]=Math.cos(x),A[B]=Math.sin(x)}const b=n(p,{...l,gain:0}),y=s(p,{...u,curve:w}),M=s(p,{...u,curve:a}),C=n(p,{...l,gain:0}),E=s(p,{...u,curve:A});return{connectGraph(){g.connect(b),g.connect(M.inputs===void 0?M:M.inputs[0]),g.connect(C),M.connect(m),m.connect(y.inputs===void 0?y:y.inputs[0]),m.connect(E.inputs===void 0?E:E.inputs[0]),y.connect(b.gain),E.connect(C.gain),b.connect(_,0,0),C.connect(_,0,1)},disconnectGraph(){g.disconnect(b),g.disconnect(M.inputs===void 0?M:M.inputs[0]),g.disconnect(C),M.disconnect(m),m.disconnect(y.inputs===void 0?y:y.inputs[0]),m.disconnect(E.inputs===void 0?E:E.inputs[0]),y.disconnect(b.gain),E.disconnect(C.gain),b.disconnect(_,0,0),C.disconnect(_,0,1)}}},f=(p,g,m,_)=>{const w=new Float32Array(16385),A=new Float32Array(16385),b=new Float32Array(16385),y=new Float32Array(16385),M=Math.floor(16385/2);for(let W=0;W<16385;W+=1)if(W>M){const K=(W-M)/(16384-M)*c;w[W]=Math.cos(K),A[W]=Math.sin(K),b[W]=0,y[W]=1}else{const K=W/(16384-M)*c;w[W]=1,A[W]=0,b[W]=Math.cos(K),y[W]=Math.sin(K)}const C=e(p,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),E=n(p,{...l,gain:0}),B=s(p,{...u,curve:w}),x=n(p,{...l,gain:0}),O=s(p,{...u,curve:A}),k=s(p,{...u,curve:a}),G=n(p,{...l,gain:0}),Q=s(p,{...u,curve:b}),ee=n(p,{...l,gain:0}),H=s(p,{...u,curve:y});return{connectGraph(){g.connect(C),g.connect(k.inputs===void 0?k:k.inputs[0]),C.connect(E,0),C.connect(x,0),C.connect(G,1),C.connect(ee,1),k.connect(m),m.connect(B.inputs===void 0?B:B.inputs[0]),m.connect(O.inputs===void 0?O:O.inputs[0]),m.connect(Q.inputs===void 0?Q:Q.inputs[0]),m.connect(H.inputs===void 0?H:H.inputs[0]),B.connect(E.gain),O.connect(x.gain),Q.connect(G.gain),H.connect(ee.gain),E.connect(_,0,0),G.connect(_,0,0),x.connect(_,0,1),ee.connect(_,0,1)},disconnectGraph(){g.disconnect(C),g.disconnect(k.inputs===void 0?k:k.inputs[0]),C.disconnect(E,0),C.disconnect(x,0),C.disconnect(G,1),C.disconnect(ee,1),k.disconnect(m),m.disconnect(B.inputs===void 0?B:B.inputs[0]),m.disconnect(O.inputs===void 0?O:O.inputs[0]),m.disconnect(Q.inputs===void 0?Q:Q.inputs[0]),m.disconnect(H.inputs===void 0?H:H.inputs[0]),B.disconnect(E.gain),O.disconnect(x.gain),Q.disconnect(G.gain),H.disconnect(ee.gain),E.disconnect(_,0,0),G.disconnect(_,0,0),x.disconnect(_,0,1),ee.disconnect(_,0,1)}}},d=(p,g,m,_,w)=>{if(g===1)return h(p,m,_,w);if(g===2)return f(p,m,_,w);throw r()};return(p,{channelCount:g,channelCountMode:m,pan:_,...w})=>{if(m==="max")throw r();const A=t(p,{...w,channelCount:1,channelCountMode:m,numberOfInputs:2}),b=n(p,{...w,channelCount:g,channelCountMode:m,gain:1}),y=n(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:_});let{connectGraph:M,disconnectGraph:C}=d(p,g,b,y,A);Object.defineProperty(y.gain,"defaultValue",{get:()=>0}),Object.defineProperty(y.gain,"maxValue",{get:()=>1}),Object.defineProperty(y.gain,"minValue",{get:()=>-1});const E={get bufferSize(){},get channelCount(){return b.channelCount},set channelCount(k){b.channelCount!==k&&(B&&C(),{connectGraph:M,disconnectGraph:C}=d(p,k,b,y,A),B&&M()),b.channelCount=k},get channelCountMode(){return b.channelCountMode},set channelCountMode(k){if(k==="clamped-max"||k==="max")throw r();b.channelCountMode=k},get channelInterpretation(){return b.channelInterpretation},set channelInterpretation(k){b.channelInterpretation=k},get context(){return b.context},get inputs(){return[b]},get numberOfInputs(){return b.numberOfInputs},get numberOfOutputs(){return b.numberOfOutputs},get pan(){return y.gain},addEventListener(...k){return b.addEventListener(k[0],k[1],k[2])},dispatchEvent(...k){return b.dispatchEvent(k[0])},removeEventListener(...k){return b.removeEventListener(k[0],k[1],k[2])}};let B=!1;const x=()=>{M(),B=!0},O=()=>{C(),B=!1};return i(pr(E,A),x,O)}},Jb=(t,e,n,s,r,i,o)=>(a,c)=>{const l=a.createWaveShaper();if(i!==null&&i.name==="webkitAudioContext"&&a.createGain().gain.automationRate===void 0)return n(a,c);nt(l,c);const u=c.curve===null||c.curve instanceof Float32Array?c.curve:new Float32Array(c.curve);if(u!==null&&u.length<2)throw e();Le(l,{curve:u},"curve"),Le(l,c,"oversample");let h=null,f=!1;return o(l,"curve",g=>()=>g.call(l),g=>m=>(g.call(l,m),f&&(s(m)&&h===null?h=t(a,l):!s(m)&&h!==null&&(h(),h=null)),m)),r(l,()=>{f=!0,s(l.curve)&&(h=t(a,l))},()=>{f=!1,h!==null&&(h(),h=null)})},Xb=(t,e,n,s,r)=>(i,{curve:o,oversample:a,...c})=>{const l=i.createWaveShaper(),u=i.createWaveShaper();nt(l,c),nt(u,c);const h=n(i,{...c,gain:1}),f=n(i,{...c,gain:-1}),d=n(i,{...c,gain:1}),p=n(i,{...c,gain:-1});let g=null,m=!1,_=null;const w={get bufferSize(){},get channelCount(){return l.channelCount},set channelCount(y){h.channelCount=y,f.channelCount=y,l.channelCount=y,d.channelCount=y,u.channelCount=y,p.channelCount=y},get channelCountMode(){return l.channelCountMode},set channelCountMode(y){h.channelCountMode=y,f.channelCountMode=y,l.channelCountMode=y,d.channelCountMode=y,u.channelCountMode=y,p.channelCountMode=y},get channelInterpretation(){return l.channelInterpretation},set channelInterpretation(y){h.channelInterpretation=y,f.channelInterpretation=y,l.channelInterpretation=y,d.channelInterpretation=y,u.channelInterpretation=y,p.channelInterpretation=y},get context(){return l.context},get curve(){return _},set curve(y){if(y!==null&&y.length<2)throw e();if(y===null)l.curve=y,u.curve=y;else{const M=y.length,C=new Float32Array(M+2-M%2),E=new Float32Array(M+2-M%2);C[0]=y[0],E[0]=-y[M-1];const B=Math.ceil((M+1)/2),x=(M+1)/2-1;for(let O=1;O<B;O+=1){const k=O/B*x,G=Math.floor(k),Q=Math.ceil(k);C[O]=G===Q?y[G]:(1-(k-G))*y[G]+(1-(Q-k))*y[Q],E[O]=G===Q?-y[M-1-G]:-((1-(k-G))*y[M-1-G])-(1-(Q-k))*y[M-1-Q]}C[B]=M%2===1?y[B-1]:(y[B-2]+y[B-1])/2,l.curve=C,u.curve=E}_=y,m&&(s(_)&&g===null?g=t(i,h):g!==null&&(g(),g=null))},get inputs(){return[h]},get numberOfInputs(){return l.numberOfInputs},get numberOfOutputs(){return l.numberOfOutputs},get oversample(){return l.oversample},set oversample(y){l.oversample=y,u.oversample=y},addEventListener(...y){return h.addEventListener(y[0],y[1],y[2])},dispatchEvent(...y){return h.dispatchEvent(y[0])},removeEventListener(...y){return h.removeEventListener(y[0],y[1],y[2])}};o!==null&&(w.curve=o instanceof Float32Array?o:new Float32Array(o)),a!==w.oversample&&(w.oversample=a);const A=()=>{h.connect(l).connect(d),h.connect(f).connect(u).connect(p).connect(d),m=!0,s(_)&&(g=t(i,h))},b=()=>{h.disconnect(l),l.disconnect(d),h.disconnect(f),f.disconnect(u),u.disconnect(p),p.disconnect(d),m=!1,g!==null&&(g(),g=null)};return r(pr(w,d),A,b)},Rt=()=>new DOMException("","NotSupportedError"),e1={numberOfChannels:1},t1=(t,e,n,s,r)=>class extends t{constructor(o,a,c){let l;if(typeof o=="number"&&a!==void 0&&c!==void 0)l={length:a,numberOfChannels:o,sampleRate:c};else if(typeof o=="object")l=o;else throw new Error("The given parameters are not valid.");const{length:u,numberOfChannels:h,sampleRate:f}={...e1,...l},d=s(h,u,f);e(Kr,()=>Kr(d))||d.addEventListener("statechange",(()=>{let p=0;const g=m=>{this._state==="running"&&(p>0?(d.removeEventListener("statechange",g),m.stopImmediatePropagation(),this._waitForThePromiseToSettle(m)):p+=1)};return g})()),super(d,h),this._length=u,this._nativeOfflineAudioContext=d,this._state=null}get length(){return this._nativeOfflineAudioContext.length===void 0?this._length:this._nativeOfflineAudioContext.length}get state(){return this._state===null?this._nativeOfflineAudioContext.state:this._state}startRendering(){return this._state==="running"?Promise.reject(n()):(this._state="running",r(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,_d(this)}))}_waitForThePromiseToSettle(o){this._state===null?this._nativeOfflineAudioContext.dispatchEvent(o):setTimeout(()=>this._waitForThePromiseToSettle(o))}},n1={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},s1=(t,e,n,s,r,i,o)=>class extends t{constructor(c,l){const u=r(c),h={...n1,...l},f=n(u,h),d=i(u),p=d?s():null,g=c.sampleRate/2;super(c,!1,f,p),this._detune=e(this,d,f.detune,153600,-153600),this._frequency=e(this,d,f.frequency,g,-g),this._nativeOscillatorNode=f,this._onended=null,this._oscillatorNodeRenderer=p,this._oscillatorNodeRenderer!==null&&h.periodicWave!==void 0&&(this._oscillatorNodeRenderer.periodicWave=h.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(c){const l=typeof c=="function"?o(this,c):null;this._nativeOscillatorNode.onended=l;const u=this._nativeOscillatorNode.onended;this._onended=u!==null&&u===l?c:u}get type(){return this._nativeOscillatorNode.type}set type(c){this._nativeOscillatorNode.type=c,this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(c){this._nativeOscillatorNode.setPeriodicWave(c),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=c)}start(c=0){if(this._nativeOscillatorNode.start(c),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.start=c),this.context.state!=="closed"){ir(this);const l=()=>{this._nativeOscillatorNode.removeEventListener("ended",l),Ln(this)&&ri(this)};this._nativeOscillatorNode.addEventListener("ended",l)}}stop(c=0){this._nativeOscillatorNode.stop(c),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.stop=c)}},r1=(t,e,n,s,r)=>()=>{const i=new WeakMap;let o=null,a=null,c=null;const l=async(u,h)=>{let f=n(u);const d=St(f,h);if(!d){const p={channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,detune:f.detune.value,frequency:f.frequency.value,periodicWave:o===null?void 0:o,type:f.type};f=e(h,p),a!==null&&f.start(a),c!==null&&f.stop(c)}return i.set(h,f),d?(await t(h,u.detune,f.detune),await t(h,u.frequency,f.frequency)):(await s(h,u.detune,f.detune),await s(h,u.frequency,f.frequency)),await r(u,h,f),f};return{set periodicWave(u){o=u},set start(u){a=u},set stop(u){c=u},render(u,h){const f=i.get(h);return f!==void 0?Promise.resolve(f):l(u,h)}}},i1={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},o1=(t,e,n,s,r,i,o)=>class extends t{constructor(c,l){const u=r(c),h={...i1,...l},f=n(u,h),d=i(u),p=d?s():null;super(c,!1,f,p),this._nativePannerNode=f,this._orientationX=e(this,d,f.orientationX,It,Dt),this._orientationY=e(this,d,f.orientationY,It,Dt),this._orientationZ=e(this,d,f.orientationZ,It,Dt),this._positionX=e(this,d,f.positionX,It,Dt),this._positionY=e(this,d,f.positionY,It,Dt),this._positionZ=e(this,d,f.positionZ,It,Dt),o(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(c){this._nativePannerNode.coneInnerAngle=c}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(c){this._nativePannerNode.coneOuterAngle=c}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(c){this._nativePannerNode.coneOuterGain=c}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(c){this._nativePannerNode.distanceModel=c}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(c){this._nativePannerNode.maxDistance=c}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(c){this._nativePannerNode.panningModel=c}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(c){this._nativePannerNode.refDistance=c}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(c){this._nativePannerNode.rolloffFactor=c}},a1=(t,e,n,s,r,i,o,a,c,l)=>()=>{const u=new WeakMap;let h=null;const f=async(d,p)=>{let g=null,m=i(d);const _={channelCount:m.channelCount,channelCountMode:m.channelCountMode,channelInterpretation:m.channelInterpretation},w={..._,coneInnerAngle:m.coneInnerAngle,coneOuterAngle:m.coneOuterAngle,coneOuterGain:m.coneOuterGain,distanceModel:m.distanceModel,maxDistance:m.maxDistance,panningModel:m.panningModel,refDistance:m.refDistance,rolloffFactor:m.rolloffFactor},A=St(m,p);if("bufferSize"in m)g=s(p,{..._,gain:1});else if(!A){const b={...w,orientationX:m.orientationX.value,orientationY:m.orientationY.value,orientationZ:m.orientationZ.value,positionX:m.positionX.value,positionY:m.positionY.value,positionZ:m.positionZ.value};m=r(p,b)}if(u.set(p,g===null?m:g),g!==null){if(h===null){if(o===null)throw new Error("Missing the native OfflineAudioContext constructor.");const O=new o(6,d.context.length,p.sampleRate),k=e(O,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});k.connect(O.destination),h=(async()=>{const G=await Promise.all([d.orientationX,d.orientationY,d.orientationZ,d.positionX,d.positionY,d.positionZ].map(async(Q,ee)=>{const H=n(O,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:ee===0?1:0});return await a(O,Q,H.offset),H}));for(let Q=0;Q<6;Q+=1)G[Q].connect(k,0,Q),G[Q].start(0);return l(O)})()}const b=await h,y=s(p,{..._,gain:1});await c(d,p,y);const M=[];for(let O=0;O<b.numberOfChannels;O+=1)M.push(b.getChannelData(O));let C=[M[0][0],M[1][0],M[2][0]],E=[M[3][0],M[4][0],M[5][0]],B=s(p,{..._,gain:1}),x=r(p,{...w,orientationX:C[0],orientationY:C[1],orientationZ:C[2],positionX:E[0],positionY:E[1],positionZ:E[2]});y.connect(B).connect(x.inputs[0]),x.connect(g);for(let O=128;O<b.length;O+=128){const k=[M[0][O],M[1][O],M[2][O]],G=[M[3][O],M[4][O],M[5][O]];if(k.some((Q,ee)=>Q!==C[ee])||G.some((Q,ee)=>Q!==E[ee])){C=k,E=G;const Q=O/p.sampleRate;B.gain.setValueAtTime(0,Q),B=s(p,{..._,gain:0}),x=r(p,{...w,orientationX:C[0],orientationY:C[1],orientationZ:C[2],positionX:E[0],positionY:E[1],positionZ:E[2]}),B.gain.setValueAtTime(1,Q),y.connect(B).connect(x.inputs[0]),x.connect(g)}}return g}return A?(await t(p,d.orientationX,m.orientationX),await t(p,d.orientationY,m.orientationY),await t(p,d.orientationZ,m.orientationZ),await t(p,d.positionX,m.positionX),await t(p,d.positionY,m.positionY),await t(p,d.positionZ,m.positionZ)):(await a(p,d.orientationX,m.orientationX),await a(p,d.orientationY,m.orientationY),await a(p,d.orientationZ,m.orientationZ),await a(p,d.positionX,m.positionX),await a(p,d.positionY,m.positionY),await a(p,d.positionZ,m.positionZ)),dr(m)?await c(d,p,m.inputs[0]):await c(d,p,m),m};return{render(d,p){const g=u.get(p);return g!==void 0?Promise.resolve(g):f(d,p)}}},c1={disableNormalization:!1},l1=(t,e,n,s)=>class Nd{constructor(i,o){const a=e(i),c=s({...c1,...o}),l=t(a,c);return n.add(l),l}static[Symbol.hasInstance](i){return i!==null&&typeof i=="object"&&Object.getPrototypeOf(i)===Nd.prototype||n.has(i)}},u1=(t,e)=>(n,s,r)=>(t(s).replay(r),e(s,n,r)),h1=(t,e,n)=>async(s,r,i)=>{const o=t(s);await Promise.all(o.activeInputs.map((a,c)=>Array.from(a).map(async([l,u])=>{const f=await e(l).render(l,r),d=s.context.destination;!n(l)&&(s!==d||!n(s))&&f.connect(i,u,c)})).reduce((a,c)=>[...a,...c],[]))},f1=(t,e,n)=>async(s,r,i)=>{const o=e(s);await Promise.all(Array.from(o.activeInputs).map(async([a,c])=>{const u=await t(a).render(a,r);n(a)||u.connect(i,c)}))},d1=(t,e,n,s)=>r=>t(Kr,()=>Kr(r))?Promise.resolve(t(s,s)).then(i=>{if(!i){const o=n(r,512,0,1);r.oncomplete=()=>{o.onaudioprocess=null,o.disconnect()},o.onaudioprocess=()=>r.currentTime,o.connect(r.destination)}return r.startRendering()}):new Promise(i=>{const o=e(r,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});r.oncomplete=a=>{o.disconnect(),i(a.renderedBuffer)},o.connect(r.destination),r.startRendering()}),p1=t=>(e,n)=>{t.set(e,n)},m1=t=>(e,n)=>t.set(e,n),g1=(t,e,n,s,r,i,o,a)=>(c,l)=>n(c).render(c,l).then(()=>Promise.all(Array.from(s(l)).map(u=>n(u).render(u,l)))).then(()=>r(l)).then(u=>(typeof u.copyFromChannel!="function"?(o(u),qc(u)):e(i,()=>i(u))||a(u),t.add(u),u)),_1={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},y1=(t,e,n,s,r,i)=>class extends t{constructor(a,c){const l=r(a),u={..._1,...c},h=n(l,u),f=i(l),d=f?s():null;super(a,!1,h,d),this._pan=e(this,f,h.pan)}get pan(){return this._pan}},b1=(t,e,n,s,r)=>()=>{const i=new WeakMap,o=async(a,c)=>{let l=n(a);const u=St(l,c);if(!u){const h={channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,pan:l.pan.value};l=e(c,h)}return i.set(c,l),u?await t(c,a.pan,l.pan):await s(c,a.pan,l.pan),dr(l)?await r(a,c,l.inputs[0]):await r(a,c,l),l};return{render(a,c){const l=i.get(c);return l!==void 0?Promise.resolve(l):o(a,c)}}},v1=t=>()=>{if(t===null)return!1;try{new t({length:1,sampleRate:44100})}catch{return!1}return!0},w1=(t,e)=>async()=>{if(t===null)return!0;if(e===null)return!1;const n=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),s=new e(1,128,44100),r=URL.createObjectURL(n);let i=!1,o=!1;try{await s.audioWorklet.addModule(r);const a=new t(s,"a",{numberOfOutputs:0}),c=s.createOscillator();a.port.onmessage=()=>i=!0,a.onprocessorerror=()=>o=!0,c.connect(a),c.start(0),await s.startRendering(),await new Promise(l=>setTimeout(l))}catch{}finally{URL.revokeObjectURL(r)}return i&&!o},A1=(t,e)=>()=>{if(e===null)return Promise.resolve(!1);const n=new e(1,1,44100),s=t(n,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(r=>{n.oncomplete=()=>{s.disconnect(),r(n.currentTime!==0)},n.startRendering()})},T1=()=>new DOMException("","UnknownError"),M1={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},S1=(t,e,n,s,r,i,o)=>class extends t{constructor(c,l){const u=r(c),h={...M1,...l},f=n(u,h),p=i(u)?s():null;super(c,!0,f,p),this._isCurveNullified=!1,this._nativeWaveShaperNode=f,o(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(c){if(c===null)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(c.length<2)throw e();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=c}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(c){this._nativeWaveShaperNode.oversample=c}},E1=(t,e,n)=>()=>{const s=new WeakMap,r=async(i,o)=>{let a=e(i);if(!St(a,o)){const l={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,curve:a.curve,oversample:a.oversample};a=t(o,l)}return s.set(o,a),dr(a)?await n(i,o,a.inputs[0]):await n(i,o,a),a};return{render(i,o){const a=s.get(o);return a!==void 0?Promise.resolve(a):r(i,o)}}},N1=()=>typeof window>"u"?null:window,C1=(t,e)=>n=>{n.copyFromChannel=(s,r,i=0)=>{const o=t(i),a=t(r);if(a>=n.numberOfChannels)throw e();const c=n.length,l=n.getChannelData(a),u=s.length;for(let h=o<0?-o:0;h+o<c&&h<u;h+=1)s[h]=l[h+o]},n.copyToChannel=(s,r,i=0)=>{const o=t(i),a=t(r);if(a>=n.numberOfChannels)throw e();const c=n.length,l=n.getChannelData(a),u=s.length;for(let h=o<0?-o:0;h+o<c&&h<u;h+=1)l[h+o]=s[h]}},x1=t=>e=>{e.copyFromChannel=(n=>(s,r,i=0)=>{const o=t(i),a=t(r);if(o<e.length)return n.call(e,s,a,o)})(e.copyFromChannel),e.copyToChannel=(n=>(s,r,i=0)=>{const o=t(i),a=t(r);if(o<e.length)return n.call(e,s,a,o)})(e.copyToChannel)},I1=t=>(e,n)=>{const s=n.createBuffer(1,1,44100);e.buffer===null&&(e.buffer=s),t(e,"buffer",r=>()=>{const i=r.call(e);return i===s?null:i},r=>i=>r.call(e,i===null?s:i))},P1=(t,e)=>(n,s)=>{s.channelCount=1,s.channelCountMode="explicit",Object.defineProperty(s,"channelCount",{get:()=>1,set:()=>{throw t()}}),Object.defineProperty(s,"channelCountMode",{get:()=>"explicit",set:()=>{throw t()}});const r=n.createBufferSource();e(s,()=>{const a=s.numberOfInputs;for(let c=0;c<a;c+=1)r.connect(s,0,c)},()=>r.disconnect(s))},Cd=(t,e,n)=>t.copyFromChannel===void 0?t.getChannelData(n)[0]:(t.copyFromChannel(e,n),e[0]),xd=t=>{if(t===null)return!1;const e=t.length;return e%2!==0?t[Math.floor(e/2)]!==0:t[e/2-1]+t[e/2]!==0},li=(t,e,n,s)=>{let r=t;for(;!r.hasOwnProperty(e);)r=Object.getPrototypeOf(r);const{get:i,set:o}=Object.getOwnPropertyDescriptor(r,e);Object.defineProperty(t,e,{get:n(i),set:s(o)})},k1=t=>({...t,outputChannelCount:t.outputChannelCount!==void 0?t.outputChannelCount:t.numberOfInputs===1&&t.numberOfOutputs===1?[t.channelCount]:Array.from({length:t.numberOfOutputs},()=>1)}),O1=t=>({...t,channelCount:t.numberOfOutputs}),R1=t=>{const{imag:e,real:n}=t;return e===void 0?n===void 0?{...t,imag:[0,0],real:[0,0]}:{...t,imag:Array.from(n,()=>0),real:n}:n===void 0?{...t,imag:e,real:Array.from(e,()=>0)}:{...t,imag:e,real:n}},Id=(t,e,n)=>{try{t.setValueAtTime(e,n)}catch(s){if(s.code!==9)throw s;Id(t,e,n+1e-7)}},D1=t=>{const e=t.createBufferSource();e.start();try{e.start()}catch{return!0}return!1},F1=t=>{const e=t.createBufferSource(),n=t.createBuffer(1,1,44100);e.buffer=n;try{e.start(0,1)}catch{return!1}return!0},B1=t=>{const e=t.createBufferSource();e.start();try{e.stop()}catch{return!1}return!0},zc=t=>{const e=t.createOscillator();try{e.start(-1)}catch(n){return n instanceof RangeError}return!1},Pd=t=>{const e=t.createBuffer(1,1,44100),n=t.createBufferSource();n.buffer=e,n.start(),n.stop();try{return n.stop(),!0}catch{return!1}},Qc=t=>{const e=t.createOscillator();try{e.stop(-1)}catch(n){return n instanceof RangeError}return!1},V1=t=>{const{port1:e,port2:n}=new MessageChannel;try{e.postMessage(t)}finally{e.close(),n.close()}},L1=t=>{t.start=(e=>(n=0,s=0,r)=>{const i=t.buffer,o=i===null?s:Math.min(i.duration,s);i!==null&&o>i.duration-.5/t.context.sampleRate?e.call(t,n,0,0):e.call(t,n,o,r)})(t.start)},kd=(t,e)=>{const n=e.createGain();t.connect(n);const s=(r=>()=>{r.call(t,n),t.removeEventListener("ended",s)})(t.disconnect);t.addEventListener("ended",s),pr(t,n),t.stop=(r=>{let i=!1;return(o=0)=>{if(i)try{r.call(t,o)}catch{n.gain.setValueAtTime(0,o)}else r.call(t,o),i=!0}})(t.stop)},mr=(t,e)=>n=>{const s={value:t};return Object.defineProperties(n,{currentTarget:s,target:s}),typeof e=="function"?e.call(t,n):e.handleEvent.call(t,n)},U1=o_(Ns),j1=f_(Ns),q1=My(To),Od=new WeakMap,$1=qy(Od),un=ey(new Map,new WeakMap),An=N1(),Rd=yb(un,Sn),Yc=jy(kt),dt=h1(kt,Yc,As),W1=__(Rd,Be,dt),Re=Gy(Ao),Wn=Gb(An),Ie=cb(Wn),Dd=new WeakMap,Fd=Ry(mr),ui=Ab(An),Kc=rb(ui),Zc=ib(An),Bd=ob(An),Zr=Mb(An),ze=q_(a_(ud),h_(U1,j1,Qi,q1,Yi,kt,$1,si,Be,Ns,Ln,As,Ri),un,Xy(Ja,Yi,kt,Be,Yr,Ln),Sn,Mo,Rt,vy(Qi,Ja,kt,Be,Yr,Re,Ln,Ie),Ny(Dd,kt,cn),Fd,Re,Kc,Zc,Bd,Ie,Zr),G1=g_(ze,W1,Sn,Rd,Re,Ie),Jc=new WeakSet,Vu=bb(An),Vd=dy(new Uint32Array(1)),Xc=C1(Vd,Sn),el=x1(Vd),Ld=b_(Jc,un,Rt,Vu,Wn,v1(Vu),Xc,el),So=d_(Ft),Ud=f1(Yc,ii,As),En=ay(Ud),gr=wb(So,un,D1,F1,B1,zc,Pd,Qc,L1,I1(li),kd),Nn=u1($y(ii),Ud),H1=A_(En,gr,Be,Nn,dt),hn=$_(c_(hd),Dd,jc,W_,e_,t_,n_,s_,r_,Ya,cd,ui,Id),z1=w_(ze,H1,hn,at,gr,Re,Ie,mr),Q1=P_(ze,k_,Sn,at,Tb(Ft,li),Re,Ie,dt),Y1=X_(En,Sd,Be,Nn,dt),Cs=m1(Od),K1=J_(ze,hn,Y1,Mo,Sd,Re,Ie,Cs),as=gb(Ns,Zc),Z1=P1(at,as),cs=Pb(ui,Z1),J1=sy(cs,Be,dt),X1=ny(ze,J1,cs,Re,Ie),ev=oy(ai,Be,dt),tv=iy(ze,ev,ai,Re,Ie,O1),nv=Rb(So,gr,Ft,as),_r=Ob(So,un,nv,zc,Qc),sv=fy(En,_r,Be,Nn,dt),rv=hy(ze,hn,sv,_r,Re,Ie,mr),jd=Db(Rt,li),iv=gy(jd,Be,dt),ov=my(ze,iv,jd,Re,Ie,Cs),av=Ty(En,Ed,Be,Nn,dt),cv=Ay(ze,hn,av,Ed,Re,Ie,Cs),qd=Fb(Rt),lv=Py(En,qd,Be,Nn,dt),uv=Iy(ze,hn,lv,qd,Rt,Re,Ie,Cs),hv=Ly(En,Ft,Be,Nn,dt),fv=Vy(ze,hn,hv,Ft,Re,Ie),dv=Ub(Mo,at,ci,Rt),Eo=d1(un,Ft,ci,A1(Ft,Wn)),pv=Jy(gr,Be,Wn,dt,Eo),mv=Bb(dv),gv=Ky(ze,mv,pv,Re,Ie,Cs),_v=O_(hn,cs,_r,ci,Rt,Cd,Ie,li),$d=new WeakMap,yv=mb(Q1,_v,Fd,Ie,$d,mr),Wd=Hb(So,un,zc,Pd,Qc,kd),bv=r1(En,Wd,Be,Nn,dt),vv=s1(ze,hn,Wd,bv,Re,Ie,mr),Gd=ly(gr),wv=Xb(Gd,at,Ft,xd,as),No=Jb(Gd,at,wv,xd,as,ui,li),Av=Qb(Qi,at,cs,Ft,ci,No,Rt,Yi,Cd,as),Hd=zb(Av),Tv=a1(En,cs,_r,Ft,Hd,Be,Wn,Nn,dt,Eo),Mv=o1(ze,hn,Hd,Tv,Re,Ie,Cs),Sv=Yb(Sn),Ev=l1(Sv,Re,new WeakSet,R1),Nv=Zb(cs,ai,Ft,No,Rt,as),zd=Kb(Nv,Rt),Cv=b1(En,zd,Be,Nn,dt),xv=y1(ze,hn,zd,Cv,Re,Ie),Iv=E1(No,Be,dt),Pv=S1(ze,at,No,Iv,Re,Ie,Cs),Qd=lb(An),tl=Dy(An),Yd=new WeakMap,kv=Hy(Yd,Wn),Ov=Qd?u_(un,Rt,Oy(An),tl,Fy(i_),Re,kv,Ie,Zr,new WeakMap,new WeakMap,w1(Zr,Wn),An):void 0,Rv=ab(Kc,Ie),Dv=by(Jc,un,yy,ky,new WeakSet,Re,Rv,Hi,Kr,Xc,el),Kd=K_(Ov,G1,Ld,z1,K1,X1,tv,rv,ov,Dv,cv,uv,fv,gv,yv,vv,Mv,Ev,xv,Pv),Fv=ub(ze,jb,Re,Ie),Bv=fb(ze,qb,Re,Ie),Vv=db(ze,$b,Re,Ie),Lv=Wb(at,Ie),Uv=pb(ze,Lv,Re),jv=I_(Kd,at,Rt,T1,Fv,Bv,Vv,Uv,ui),nl=zy($d),qv=p_(nl),Zd=cy(Sn),$v=Sy(nl),Jd=Cy(Sn),Xd=new WeakMap,Wv=Uy(Xd,cn),Gv=Ib(Zd,Sn,at,cs,ai,_r,Ft,ci,Rt,Jd,tl,Wv,as),Hv=Eb(at,Gv,Ft,Rt,as),zv=Y_(En,Zd,gr,cs,ai,_r,Ft,$v,Jd,tl,Be,Zr,Wn,Nn,dt,Eo),Qv=Wy(Yd),Yv=p1(Xd),Lu=Qd?H_(qv,ze,hn,zv,Hv,kt,Qv,Re,Ie,Zr,k1,Yv,V1,mr):void 0,Kv=_y(Rt,Wn),Zv=g1(Jc,un,Yc,nl,Eo,Hi,Xc,el),Jv=t1(Kd,un,at,Kv,Zv),Xv=eb(Ao,Kc),ew=tb(Uc,Zc),tw=nb(jc,Bd),nw=sb(Ao,Ie);function Yt(t){return t===void 0}function be(t){return t!==void 0}function sw(t){return typeof t=="function"}function Un(t){return typeof t=="number"}function vs(t){return Object.prototype.toString.call(t)==="[object Object]"&&t.constructor===Object}function ep(t){return typeof t=="boolean"}function an(t){return Array.isArray(t)}function jn(t){return typeof t=="string"}function Ai(t){return jn(t)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(t)}function le(t,e){if(!t)throw new Error(e)}function ln(t,e,n=1/0){if(!(e<=t&&t<=n))throw new RangeError(`Value must be within [${e}, ${n}], got: ${t}`)}function tp(t){!t.isOffline&&t.state!=="running"&&Co('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}let np=!1,Uu=!1;function ju(t){np=t}function rw(t){Yt(t)&&np&&!Uu&&(Uu=!0,Co("Events scheduled inside of scheduled callbacks should use the passed in scheduling time. See https://github.com/Tonejs/Tone.js/wiki/Accurate-Timing"))}let sp=console;function iw(...t){sp.log(...t)}function Co(...t){sp.warn(...t)}function ow(t){return new jv(t)}function aw(t,e,n){return new Jv(t,e,n)}const Pt=typeof self=="object"?self:null,cw=Pt&&(Pt.hasOwnProperty("AudioContext")||Pt.hasOwnProperty("webkitAudioContext"));function lw(t,e,n){return le(be(Lu),"AudioWorkletNode only works in a secure context (https or localhost)"),new(t instanceof(Pt==null?void 0:Pt.BaseAudioContext)?Pt==null?void 0:Pt.AudioWorkletNode:Lu)(t,e,n)}function fn(t,e,n,s){var r=arguments.length,i=r<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,n):s,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,s);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(r<3?o(i):r>3?o(e,n,i):o(e,n))||i);return r>3&&i&&Object.defineProperty(e,n,i),i}function je(t,e,n,s){function r(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(s.next(u))}catch(h){o(h)}}function c(u){try{l(s.throw(u))}catch(h){o(h)}}function l(u){u.done?i(u.value):r(u.value).then(a,c)}l((s=s.apply(t,e||[])).next())})}class uw{constructor(e,n,s,r){this._callback=e,this._type=n,this._minimumUpdateInterval=Math.max(128/(r||44100),.001),this.updateInterval=s,this._createClock()}_createWorker(){const e=new Blob([`
			// the initial timeout time
			let timeoutTime =  ${(this._updateInterval*1e3).toFixed(1)};
			// onmessage callback
			self.onmessage = function(msg){
				timeoutTime = parseInt(msg.data);
			};
			// the tick function which posts a message
			// and schedules a new tick
			function tick(){
				setTimeout(tick, timeoutTime);
				self.postMessage('tick');
			}
			// call tick initially
			tick();
			`],{type:"text/javascript"}),n=URL.createObjectURL(e),s=new Worker(n);s.onmessage=this._callback.bind(this),this._worker=s}_createTimeout(){this._timeout=setTimeout(()=>{this._createTimeout(),this._callback()},this._updateInterval*1e3)}_createClock(){if(this._type==="worker")try{this._createWorker()}catch{this._type="timeout",this._createClock()}else this._type==="timeout"&&this._createTimeout()}_disposeClock(){this._timeout&&clearTimeout(this._timeout),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(e){var n;this._updateInterval=Math.max(e,this._minimumUpdateInterval),this._type==="worker"&&((n=this._worker)===null||n===void 0||n.postMessage(this._updateInterval*1e3))}get type(){return this._type}set type(e){this._disposeClock(),this._type=e,this._createClock()}dispose(){this._disposeClock()}}function Ts(t){return tw(t)}function Xn(t){return ew(t)}function Di(t){return nw(t)}function Us(t){return Xv(t)}function hw(t){return t instanceof Ld}function fw(t,e){return t==="value"||Ts(e)||Xn(e)||hw(e)}function Zs(t,...e){if(!e.length)return t;const n=e.shift();if(vs(t)&&vs(n))for(const s in n)fw(s,n[s])?t[s]=n[s]:vs(n[s])?(t[s]||Object.assign(t,{[s]:{}}),Zs(t[s],n[s])):Object.assign(t,{[s]:n[s]});return Zs(t,...e)}function dw(t,e){return t.length===e.length&&t.every((n,s)=>e[s]===n)}function ie(t,e,n=[],s){const r={},i=Array.from(e);if(vs(i[0])&&s&&!Reflect.has(i[0],s)&&(Object.keys(i[0]).some(a=>Reflect.has(t,a))||(Zs(r,{[s]:i[0]}),n.splice(n.indexOf(s),1),i.shift())),i.length===1&&vs(i[0]))Zs(r,i[0]);else for(let o=0;o<n.length;o++)be(i[o])&&(r[n[o]]=i[o]);return Zs(t,r)}function pw(t){return t.constructor.getDefaults()}function ws(t,e){return Yt(t)?e:t}function qu(t,e){return e.forEach(n=>{Reflect.has(t,n)&&delete t[n]}),t}/**
 * Tone.js
 * @author Yotam Mann
 * @license http://opensource.org/licenses/MIT MIT License
 * @copyright 2014-2024 Yotam Mann
 */class Gn{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(...e){(this.debug||Pt&&this.toString()===Pt.TONE_DEBUG_CLASS)&&iw(this,...e)}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}}Gn.version=ad;const sl=1e-6;function or(t,e){return t>e+sl}function sc(t,e){return or(t,e)||Xt(t,e)}function Xi(t,e){return t+sl<e}function Xt(t,e){return Math.abs(t-e)<sl}function mw(t,e,n){return Math.max(Math.min(t,n),e)}class Kt extends Gn{constructor(){super(),this.name="Timeline",this._timeline=[];const e=ie(Kt.getDefaults(),arguments,["memory"]);this.memory=e.memory,this.increasing=e.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(e){if(le(Reflect.has(e,"time"),"Timeline: events must have a time attribute"),e.time=e.time.valueOf(),this.increasing&&this.length){const n=this._timeline[this.length-1];le(sc(e.time,n.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(e)}else{const n=this._search(e.time);this._timeline.splice(n+1,0,e)}if(this.length>this.memory){const n=this.length-this.memory;this._timeline.splice(0,n)}return this}remove(e){const n=this._timeline.indexOf(e);return n!==-1&&this._timeline.splice(n,1),this}get(e,n="time"){const s=this._search(e,n);return s!==-1?this._timeline[s]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(e,n="time"){const s=this._search(e,n);return s+1<this._timeline.length?this._timeline[s+1]:null}getBefore(e){const n=this._timeline.length;if(n>0&&this._timeline[n-1].time<e)return this._timeline[n-1];const s=this._search(e);return s-1>=0?this._timeline[s-1]:null}cancel(e){if(this._timeline.length>1){let n=this._search(e);if(n>=0)if(Xt(this._timeline[n].time,e)){for(let s=n;s>=0&&Xt(this._timeline[s].time,e);s--)n=s;this._timeline=this._timeline.slice(0,n)}else this._timeline=this._timeline.slice(0,n+1);else this._timeline=[]}else this._timeline.length===1&&sc(this._timeline[0].time,e)&&(this._timeline=[]);return this}cancelBefore(e){const n=this._search(e);return n>=0&&(this._timeline=this._timeline.slice(n+1)),this}previousEvent(e){const n=this._timeline.indexOf(e);return n>0?this._timeline[n-1]:null}_search(e,n="time"){if(this._timeline.length===0)return-1;let s=0;const r=this._timeline.length;let i=r;if(r>0&&this._timeline[r-1][n]<=e)return r-1;for(;s<i;){let o=Math.floor(s+(i-s)/2);const a=this._timeline[o],c=this._timeline[o+1];if(Xt(a[n],e)){for(let l=o;l<this._timeline.length;l++){const u=this._timeline[l];if(Xt(u[n],e))o=l;else break}return o}else{if(Xi(a[n],e)&&or(c[n],e))return o;or(a[n],e)?i=o:s=o+1}}return-1}_iterate(e,n=0,s=this._timeline.length-1){this._timeline.slice(n,s+1).forEach(e)}forEach(e){return this._iterate(e),this}forEachBefore(e,n){const s=this._search(e);return s!==-1&&this._iterate(n,0,s),this}forEachAfter(e,n){const s=this._search(e);return this._iterate(n,s+1),this}forEachBetween(e,n,s){let r=this._search(e),i=this._search(n);return r!==-1&&i!==-1?(this._timeline[r].time!==e&&(r+=1),this._timeline[i].time===n&&(i-=1),this._iterate(s,r,i)):r===-1&&this._iterate(s,0,i),this}forEachFrom(e,n){let s=this._search(e);for(;s>=0&&this._timeline[s].time>=e;)s--;return this._iterate(n,s+1),this}forEachAtTime(e,n){const s=this._search(e);if(s!==-1&&Xt(this._timeline[s].time,e)){let r=s;for(let i=s;i>=0&&Xt(this._timeline[i].time,e);i--)r=i;this._iterate(i=>{n(i)},r,s)}return this}dispose(){return super.dispose(),this._timeline=[],this}}const rp=[];function xo(t){rp.push(t)}function gw(t){rp.forEach(e=>e(t))}const ip=[];function Io(t){ip.push(t)}function _w(t){ip.forEach(e=>e(t))}class hi extends Gn{constructor(){super(...arguments),this.name="Emitter"}on(e,n){return e.split(/\W+/).forEach(r=>{Yt(this._events)&&(this._events={}),this._events.hasOwnProperty(r)||(this._events[r]=[]),this._events[r].push(n)}),this}once(e,n){const s=(...r)=>{n(...r),this.off(e,s)};return this.on(e,s),this}off(e,n){return e.split(/\W+/).forEach(r=>{if(Yt(this._events)&&(this._events={}),this._events.hasOwnProperty(r))if(Yt(n))this._events[r]=[];else{const i=this._events[r];for(let o=i.length-1;o>=0;o--)i[o]===n&&i.splice(o,1)}}),this}emit(e,...n){if(this._events&&this._events.hasOwnProperty(e)){const s=this._events[e].slice(0);for(let r=0,i=s.length;r<i;r++)s[r].apply(this,n)}return this}static mixin(e){["on","once","off","emit"].forEach(n=>{const s=Object.getOwnPropertyDescriptor(hi.prototype,n);Object.defineProperty(e.prototype,n,s)})}dispose(){return super.dispose(),this._events=void 0,this}}class op extends hi{constructor(){super(...arguments),this.isOffline=!1}toJSON(){return{}}}class fi extends op{constructor(){var e,n;super(),this.name="Context",this._constants=new Map,this._timeouts=new Kt,this._timeoutIds=0,this._initialized=!1,this._closeStarted=!1,this.isOffline=!1,this._workletPromise=null;const s=ie(fi.getDefaults(),arguments,["context"]);s.context?(this._context=s.context,this._latencyHint=((e=arguments[0])===null||e===void 0?void 0:e.latencyHint)||""):(this._context=ow({latencyHint:s.latencyHint}),this._latencyHint=s.latencyHint),this._ticker=new uw(this.emit.bind(this,"tick"),s.clockSource,s.updateInterval,this._context.sampleRate),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this[!((n=arguments[0])===null||n===void 0)&&n.hasOwnProperty("updateInterval")?"_lookAhead":"lookAhead"]=s.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){return this._initialized||(gw(this),this._initialized=!0),this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(e,n,s){return this._context.createBuffer(e,n,s)}createChannelMerger(e){return this._context.createChannelMerger(e)}createChannelSplitter(e){return this._context.createChannelSplitter(e)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(e){return this._context.createDelay(e)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(e,n){return this._context.createIIRFilter(e,n)}createPanner(){return this._context.createPanner()}createPeriodicWave(e,n,s){return this._context.createPeriodicWave(e,n,s)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(e){return le(Us(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamSource(e)}createMediaElementSource(e){return le(Us(this._context),"Not available if OfflineAudioContext"),this._context.createMediaElementSource(e)}createMediaStreamDestination(){return le(Us(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamDestination()}decodeAudioData(e){return this._context.decodeAudioData(e)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(e){le(!this._initialized,"The listener cannot be set after initialization."),this._listener=e}get transport(){return this.initialize(),this._transport}set transport(e){le(!this._initialized,"The transport cannot be set after initialization."),this._transport=e}get draw(){return this.initialize(),this._draw}set draw(e){le(!this._initialized,"Draw cannot be set after initialization."),this._draw=e}get destination(){return this.initialize(),this._destination}set destination(e){le(!this._initialized,"The destination cannot be set after initialization."),this._destination=e}createAudioWorkletNode(e,n){return lw(this.rawContext,e,n)}addAudioWorkletModule(e){return je(this,void 0,void 0,function*(){le(be(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletPromise||(this._workletPromise=this.rawContext.audioWorklet.addModule(e)),yield this._workletPromise})}workletsAreReady(){return je(this,void 0,void 0,function*(){(yield this._workletPromise)?this._workletPromise:Promise.resolve()})}get updateInterval(){return this._ticker.updateInterval}set updateInterval(e){this._ticker.updateInterval=e}get clockSource(){return this._ticker.type}set clockSource(e){this._ticker.type=e}get lookAhead(){return this._lookAhead}set lookAhead(e){this._lookAhead=e,this.updateInterval=e?e/2:.01}get latencyHint(){return this._latencyHint}get rawContext(){return this._context}now(){return this._context.currentTime+this._lookAhead}immediate(){return this._context.currentTime}resume(){return Us(this._context)?this._context.resume():Promise.resolve()}close(){return je(this,void 0,void 0,function*(){Us(this._context)&&this.state!=="closed"&&!this._closeStarted&&(this._closeStarted=!0,yield this._context.close()),this._initialized&&_w(this)})}getConstant(e){if(this._constants.has(e))return this._constants.get(e);{const n=this._context.createBuffer(1,128,this._context.sampleRate),s=n.getChannelData(0);for(let i=0;i<s.length;i++)s[i]=e;const r=this._context.createBufferSource();return r.channelCount=1,r.channelCountMode="explicit",r.buffer=n,r.loop=!0,r.start(0),this._constants.set(e,r),r}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map(e=>this._constants[e].disconnect()),this.close(),this}_timeoutLoop(){const e=this.now();let n=this._timeouts.peek();for(;this._timeouts.length&&n&&n.time<=e;)n.callback(),this._timeouts.shift(),n=this._timeouts.peek()}setTimeout(e,n){this._timeoutIds++;const s=this.now();return this._timeouts.add({callback:e,id:this._timeoutIds,time:s+n}),this._timeoutIds}clearTimeout(e){return this._timeouts.forEach(n=>{n.id===e&&this._timeouts.remove(n)}),this}clearInterval(e){return this.clearTimeout(e)}setInterval(e,n){const s=++this._timeoutIds,r=()=>{const i=this.now();this._timeouts.add({callback:()=>{e(),r()},id:s,time:i+n})};return r(),s}}class yw extends op{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(e,n,s){return{}}createChannelMerger(e){return{}}createChannelSplitter(e){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(e){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(e,n){return{}}createPanner(){return{}}createPeriodicWave(e,n,s){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(e){return{}}createMediaElementSource(e){return{}}createMediaStreamDestination(){return{}}decodeAudioData(e){return Promise.resolve({})}createAudioWorkletNode(e,n){return{}}get rawContext(){return{}}addAudioWorkletModule(e){return je(this,void 0,void 0,function*(){return Promise.resolve()})}resume(){return Promise.resolve()}setTimeout(e,n){return 0}clearTimeout(e){return this}setInterval(e,n){return 0}clearInterval(e){return this}getConstant(e){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(e){}get destination(){return{}}set destination(e){}now(){return 0}immediate(){return 0}}function De(t,e){an(e)?e.forEach(n=>De(t,n)):Object.defineProperty(t,e,{enumerable:!0,writable:!1})}function ap(t,e){an(e)?e.forEach(n=>ap(t,n)):Object.defineProperty(t,e,{writable:!0})}const Ae=()=>{};class Ce extends Gn{constructor(){super(),this.name="ToneAudioBuffer",this.onload=Ae;const e=ie(Ce.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=e.reverse,this.onload=e.onload,jn(e.url)?this.load(e.url).catch(e.onerror):e.url&&this.set(e.url)}static getDefaults(){return{onerror:Ae,onload:Ae,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:Tt().sampleRate}set(e){return e instanceof Ce?e.loaded?this._buffer=e.get():e.onload=()=>{this.set(e),this.onload(this)}:this._buffer=e,this._reversed&&this._reverse(),this}get(){return this._buffer}load(e){return je(this,void 0,void 0,function*(){const n=Ce.load(e).then(s=>{this.set(s),this.onload(this)});Ce.downloads.push(n);try{yield n}finally{const s=Ce.downloads.indexOf(n);Ce.downloads.splice(s,1)}return this})}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(e){const n=an(e)&&e[0].length>0,s=n?e.length:1,r=n?e[0].length:e.length,i=Tt(),o=i.createBuffer(s,r,i.sampleRate),a=!n&&s===1?[e]:e;for(let c=0;c<s;c++)o.copyToChannel(a[c],c);return this._buffer=o,this}toMono(e){if(Un(e))this.fromArray(this.toArray(e));else{let n=new Float32Array(this.length);const s=this.numberOfChannels;for(let r=0;r<s;r++){const i=this.toArray(r);for(let o=0;o<i.length;o++)n[o]+=i[o]}n=n.map(r=>r/s),this.fromArray(n)}return this}toArray(e){if(Un(e))return this.getChannelData(e);if(this.numberOfChannels===1)return this.toArray(0);{const n=[];for(let s=0;s<this.numberOfChannels;s++)n[s]=this.getChannelData(s);return n}}getChannelData(e){return this._buffer?this._buffer.getChannelData(e):new Float32Array(0)}slice(e,n=this.duration){le(this.loaded,"Buffer is not loaded");const s=Math.floor(e*this.sampleRate),r=Math.floor(n*this.sampleRate);le(s<r,"The start time must be less than the end time");const i=r-s,o=Tt().createBuffer(this.numberOfChannels,i,this.sampleRate);for(let a=0;a<this.numberOfChannels;a++)o.copyToChannel(this.getChannelData(a).subarray(s,r),a);return new Ce(o)}_reverse(){if(this.loaded)for(let e=0;e<this.numberOfChannels;e++)this.getChannelData(e).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(e){this._reversed!==e&&(this._reversed=e,this._reverse())}static fromArray(e){return new Ce().fromArray(e)}static fromUrl(e){return je(this,void 0,void 0,function*(){return yield new Ce().load(e)})}static load(e){return je(this,void 0,void 0,function*(){const n=e.match(/\[([^\]\[]+\|.+)\]$/);if(n){const c=n[1].split("|");let l=c[0];for(const u of c)if(Ce.supportsType(u)){l=u;break}e=e.replace(n[0],l)}const s=Ce.baseUrl===""||Ce.baseUrl.endsWith("/")?Ce.baseUrl:Ce.baseUrl+"/",r=document.createElement("a");r.href=s+e,r.pathname=(r.pathname+r.hash).split("/").map(encodeURIComponent).join("/");const i=yield fetch(r.href);if(!i.ok)throw new Error(`could not load url: ${e}`);const o=yield i.arrayBuffer();return yield Tt().decodeAudioData(o)})}static supportsType(e){const n=e.split("."),s=n[n.length-1];return document.createElement("audio").canPlayType("audio/"+s)!==""}static loaded(){return je(this,void 0,void 0,function*(){for(yield Promise.resolve();Ce.downloads.length;)yield Ce.downloads[0]})}}Ce.baseUrl="";Ce.downloads=[];class Po extends fi{constructor(){super({clockSource:"offline",context:Di(arguments[0])?arguments[0]:aw(arguments[0],arguments[1]*arguments[2],arguments[2]),lookAhead:0,updateInterval:Di(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,this._duration=Di(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(e){return je(this,void 0,void 0,function*(){let n=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,n++;const s=Math.floor(this.sampleRate/128);e&&n%s===0&&(yield new Promise(r=>setTimeout(r,1)))}})}render(){return je(this,arguments,void 0,function*(e=!0){yield this.workletsAreReady(),yield this._renderClock(e);const n=yield this._context.startRendering();return new Ce(n)})}close(){return Promise.resolve()}}const cp=new yw;let _s=cp;function Tt(){return _s===cp&&cw&&bw(new fi),_s}function bw(t,e=!1){e&&_s.dispose(),Us(t)?_s=new fi(t):Di(t)?_s=new Po(t):_s=t}function lp(){return _s.resume()}if(Pt&&!Pt.TONE_SILENCE_LOGGING){const e=` * Tone.js v${ad} * `;console.log(`%c${e}`,"background: #000; color: #fff")}function vw(t){return Math.pow(10,t/20)}function ko(t){return 20*(Math.log(t)/Math.LN10)}function up(t){return Math.pow(2,t/12)}let Oo=440;function ww(){return Oo}function Aw(t){Oo=t}function rc(t){return Math.round(hp(t))}function hp(t){return 69+12*Math.log2(t/Oo)}function Tw(t){return Oo*Math.pow(2,(t-69)/12)}class rl extends Gn{constructor(e,n,s){super(),this.defaultUnits="s",this._val=n,this._units=s,this.context=e,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:e=>this._frequencyToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:e=>this._ticksToUnits(parseInt(e,10)),regexp:/^(\d+)i$/i},m:{method:e=>this._beatsToUnits(parseInt(e,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(e,n)=>{const s=parseInt(e,10),r=n==="."?1.5:1;return s===1?this._beatsToUnits(this._getTimeSignature())*r:this._beatsToUnits(4/s)*r},regexp:/^(\d+)n(\.?)$/i},number:{method:e=>this._expressions[this.defaultUnits].method.call(this,e),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:e=>this._secondsToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:e=>parseInt(e,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:e=>{const n=parseInt(e,10);return this._beatsToUnits(8/(Math.floor(n)*3))},regexp:/^(\d+)t$/i},tr:{method:(e,n,s)=>{let r=0;return e&&e!=="0"&&(r+=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),n&&n!=="0"&&(r+=this._beatsToUnits(parseFloat(n))),s&&s!=="0"&&(r+=this._beatsToUnits(parseFloat(s)/4)),r},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof rl&&this.fromType(this._val),Yt(this._val))return this._noArg();if(jn(this._val)&&Yt(this._units)){for(const e in this._expressions)if(this._expressions[e].regexp.test(this._val.trim())){this._units=e;break}}else if(vs(this._val)){let e=0;for(const n in this._val)if(be(this._val[n])){const s=this._val[n],r=new this.constructor(this.context,n).valueOf()*s;e+=r}return e}if(be(this._units)){const e=this._expressions[this._units],n=this._val.toString().trim().match(e.regexp);return n?e.method.apply(this,n.slice(1)):e.method.call(this,this._val)}else return jn(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(e){return 1/e}_beatsToUnits(e){return 60/this._getBpm()*e}_secondsToUnits(e){return e}_ticksToUnits(e){return e*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(e){switch(this._units=void 0,this.defaultUnits){case"s":this._val=e.toSeconds();break;case"i":this._val=e.toTicks();break;case"hz":this._val=e.toFrequency();break;case"midi":this._val=e.toMidi();break}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return this.toSeconds()*1e3}}class en extends rl{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:e=>this._now()+new this.constructor(this.context,e).valueOf(),regexp:/^\+(.+)/},quantize:{method:e=>{const n=new en(this.context,e).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(n))},regexp:/^@(.+)/}})}quantize(e,n=1){const s=new this.constructor(this.context,e).valueOf(),r=this.valueOf(),a=Math.round(r/s)*s-r;return r+a*n}toNotation(){const e=this.toSeconds(),n=["1m"];for(let i=1;i<9;i++){const o=Math.pow(2,i);n.push(o+"n."),n.push(o+"n"),n.push(o+"t")}n.push("0");let s=n[0],r=new en(this.context,n[0]).toSeconds();return n.forEach(i=>{const o=new en(this.context,i).toSeconds();Math.abs(o-e)<Math.abs(r-e)&&(s=i,r=o)}),s}toBarsBeatsSixteenths(){const e=this._beatsToUnits(1);let n=this.valueOf()/e;n=parseFloat(n.toFixed(4));const s=Math.floor(n/this._getTimeSignature());let r=n%1*4;n=Math.floor(n)%this._getTimeSignature();const i=r.toString();return i.length>3&&(r=parseFloat(parseFloat(i).toFixed(3))),[s,n,r].join(":")}toTicks(){const e=this._beatsToUnits(1);return this.valueOf()/e*this._getPPQ()}toSeconds(){return this.valueOf()}toMidi(){return rc(this.toFrequency())}_now(){return this.context.now()}}class $t extends en{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return ww()}static set A4(e){Aw(e)}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(e){return this.defaultUnits==="midi"?e:$t.mtof(e)}},note:{regexp:/^([a-g]{1}(?:b|#|##|x|bb|###|#x|x#|bbb)?)(-?[0-9]+)/i,method(e,n){const r=Mw[e.toLowerCase()]+(parseInt(n,10)+1)*12;return this.defaultUnits==="midi"?r:$t.mtof(r)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(e,n,s){let r=1;return e&&e!=="0"&&(r*=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),n&&n!=="0"&&(r*=this._beatsToUnits(parseFloat(n))),s&&s!=="0"&&(r*=this._beatsToUnits(parseFloat(s)/4)),r}}})}transpose(e){return new $t(this.context,this.valueOf()*up(e))}harmonize(e){return e.map(n=>this.transpose(n))}toMidi(){return rc(this.valueOf())}toNote(){const e=this.toFrequency(),n=Math.log2(e/$t.A4);let s=Math.round(12*n)+57;const r=Math.floor(s/12);return r<0&&(s+=-12*r),Sw[s%12]+r.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){const e=this._beatsToUnits(1),n=this.valueOf()/e;return Math.floor(n*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(e){return e}_ticksToUnits(e){return 1/(e*60/(this._getBpm()*this._getPPQ()))}_beatsToUnits(e){return 1/super._beatsToUnits(e)}_secondsToUnits(e){return 1/e}static mtof(e){return Tw(e)}static ftom(e){return rc(e)}}const Mw={cbbb:-3,cbb:-2,cb:-1,c:0,"c#":1,cx:2,"c##":2,"c###":3,"cx#":3,"c#x":3,dbbb:-1,dbb:0,db:1,d:2,"d#":3,dx:4,"d##":4,"d###":5,"dx#":5,"d#x":5,ebbb:1,ebb:2,eb:3,e:4,"e#":5,ex:6,"e##":6,"e###":7,"ex#":7,"e#x":7,fbbb:2,fbb:3,fb:4,f:5,"f#":6,fx:7,"f##":7,"f###":8,"fx#":8,"f#x":8,gbbb:4,gbb:5,gb:6,g:7,"g#":8,gx:9,"g##":9,"g###":10,"gx#":10,"g#x":10,abbb:6,abb:7,ab:8,a:9,"a#":10,ax:11,"a##":11,"a###":12,"ax#":12,"a#x":12,bbbb:8,bbb:9,bb:10,b:11,"b#":12,bx:13,"b##":13,"b###":14,"bx#":14,"b#x":14},Sw=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];function $u(t,e){return new $t(Tt(),t,e)}class Fr extends en{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}}class ct extends Gn{constructor(){super();const e=ie(ct.getDefaults(),arguments,["context"]);this.defaultContext?this.context=this.defaultContext:this.context=e.context}static getDefaults(){return{context:Tt()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(e){return rw(e),new en(this.context,e).toSeconds()}toFrequency(e){return new $t(this.context,e).toFrequency()}toTicks(e){return new Fr(this.context,e).toTicks()}_getPartialProperties(e){const n=this.get();return Object.keys(n).forEach(s=>{Yt(e[s])&&delete n[s]}),n}get(){const e=pw(this);return Object.keys(e).forEach(n=>{if(Reflect.has(this,n)){const s=this[n];be(s)&&be(s.value)&&be(s.setValueAtTime)?e[n]=s.value:s instanceof ct?e[n]=s._getPartialProperties(e[n]):an(s)||Un(s)||jn(s)||ep(s)?e[n]=s:delete e[n]}}),e}set(e){return Object.keys(e).forEach(n=>{Reflect.has(this,n)&&be(this[n])&&(this[n]&&be(this[n].value)&&be(this[n].setValueAtTime)?this[n].value!==e[n]&&(this[n].value=e[n]):this[n]instanceof ct?this[n].set(e[n]):this[n]=e[n])}),this}}class Ro extends Kt{constructor(e="stopped"){super(),this.name="StateTimeline",this._initial=e,this.setStateAtTime(this._initial,0)}getValueAtTime(e){const n=this.get(e);return n!==null?n.state:this._initial}setStateAtTime(e,n,s){return ln(n,0),this.add(Object.assign({},s,{state:e,time:n})),this}getLastState(e,n){const s=this._search(n);for(let r=s;r>=0;r--){const i=this._timeline[r];if(i.state===e)return i}}getNextState(e,n){const s=this._search(n);if(s!==-1)for(let r=s;r<this._timeline.length;r++){const i=this._timeline[r];if(i.state===e)return i}}}class xe extends ct{constructor(){const e=ie(xe.getDefaults(),arguments,["param","units","convert"]);for(super(e),this.name="Param",this.overridden=!1,this._minOutput=1e-7,le(be(e.param)&&(Ts(e.param)||e.param instanceof xe),"param must be an AudioParam");!Ts(e.param);)e.param=e.param._param;this._swappable=be(e.swappable)?e.swappable:!1,this._swappable?(this.input=this.context.createGain(),this._param=e.param,this.input.connect(this._param)):this._param=this.input=e.param,this._events=new Kt(1e3),this._initialValue=this._param.defaultValue,this.units=e.units,this.convert=e.convert,this._minValue=e.minValue,this._maxValue=e.maxValue,be(e.value)&&e.value!==this._toType(this._initialValue)&&this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(ct.getDefaults(),{convert:!0,units:"number"})}get value(){const e=this.now();return this.getValueAtTime(e)}set value(e){this.cancelScheduledValues(this.now()),this.setValueAtTime(e,this.now())}get minValue(){return be(this._minValue)?this._minValue:this.units==="time"||this.units==="frequency"||this.units==="normalRange"||this.units==="positive"||this.units==="transportTime"||this.units==="ticks"||this.units==="bpm"||this.units==="hertz"||this.units==="samples"?0:this.units==="audioRange"?-1:this.units==="decibels"?-1/0:this._param.minValue}get maxValue(){return be(this._maxValue)?this._maxValue:this.units==="normalRange"||this.units==="audioRange"?1:this._param.maxValue}_is(e,n){return this.units===n}_assertRange(e){return be(this.maxValue)&&be(this.minValue)&&ln(e,this._fromType(this.minValue),this._fromType(this.maxValue)),e}_fromType(e){return this.convert&&!this.overridden?this._is(e,"time")?this.toSeconds(e):this._is(e,"decibels")?vw(e):this._is(e,"frequency")?this.toFrequency(e):e:this.overridden?0:e}_toType(e){return this.convert&&this.units==="decibels"?ko(e):e}setValueAtTime(e,n){const s=this.toSeconds(n),r=this._fromType(e);return le(isFinite(r)&&isFinite(s),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(n)}`),this._assertRange(r),this.log(this.units,"setValueAtTime",e,s),this._events.add({time:s,type:"setValueAtTime",value:r}),this._param.setValueAtTime(r,s),this}getValueAtTime(e){const n=Math.max(this.toSeconds(e),0),s=this._events.getAfter(n),r=this._events.get(n);let i=this._initialValue;if(r===null)i=this._initialValue;else if(r.type==="setTargetAtTime"&&(s===null||s.type==="setValueAtTime")){const o=this._events.getBefore(r.time);let a;o===null?a=this._initialValue:a=o.value,r.type==="setTargetAtTime"&&(i=this._exponentialApproach(r.time,a,r.value,r.constant,n))}else if(s===null)i=r.value;else if(s.type==="linearRampToValueAtTime"||s.type==="exponentialRampToValueAtTime"){let o=r.value;if(r.type==="setTargetAtTime"){const a=this._events.getBefore(r.time);a===null?o=this._initialValue:o=a.value}s.type==="linearRampToValueAtTime"?i=this._linearInterpolate(r.time,o,s.time,s.value,n):i=this._exponentialInterpolate(r.time,o,s.time,s.value,n)}else i=r.value;return this._toType(i)}setRampPoint(e){e=this.toSeconds(e);let n=this.getValueAtTime(e);return this.cancelAndHoldAtTime(e),this._fromType(n)===0&&(n=this._toType(this._minOutput)),this.setValueAtTime(n,e),this}linearRampToValueAtTime(e,n){const s=this._fromType(e),r=this.toSeconds(n);return le(isFinite(s)&&isFinite(r),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(n)}`),this._assertRange(s),this._events.add({time:r,type:"linearRampToValueAtTime",value:s}),this.log(this.units,"linearRampToValueAtTime",e,r),this._param.linearRampToValueAtTime(s,r),this}exponentialRampToValueAtTime(e,n){let s=this._fromType(e);s=Xt(s,0)?this._minOutput:s,this._assertRange(s);const r=this.toSeconds(n);return le(isFinite(s)&&isFinite(r),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(n)}`),this._events.add({time:r,type:"exponentialRampToValueAtTime",value:s}),this.log(this.units,"exponentialRampToValueAtTime",e,r),this._param.exponentialRampToValueAtTime(s,r),this}exponentialRampTo(e,n,s){return s=this.toSeconds(s),this.setRampPoint(s),this.exponentialRampToValueAtTime(e,s+this.toSeconds(n)),this}linearRampTo(e,n,s){return s=this.toSeconds(s),this.setRampPoint(s),this.linearRampToValueAtTime(e,s+this.toSeconds(n)),this}targetRampTo(e,n,s){return s=this.toSeconds(s),this.setRampPoint(s),this.exponentialApproachValueAtTime(e,s,n),this}exponentialApproachValueAtTime(e,n,s){n=this.toSeconds(n),s=this.toSeconds(s);const r=Math.log(s+1)/Math.log(200);return this.setTargetAtTime(e,n,r),this.cancelAndHoldAtTime(n+s*.9),this.linearRampToValueAtTime(e,n+s),this}setTargetAtTime(e,n,s){const r=this._fromType(e);le(isFinite(s)&&s>0,"timeConstant must be a number greater than 0");const i=this.toSeconds(n);return this._assertRange(r),le(isFinite(r)&&isFinite(i),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(e)}, ${JSON.stringify(n)}`),this._events.add({constant:s,time:i,type:"setTargetAtTime",value:r}),this.log(this.units,"setTargetAtTime",e,i,s),this._param.setTargetAtTime(r,i,s),this}setValueCurveAtTime(e,n,s,r=1){s=this.toSeconds(s),n=this.toSeconds(n);const i=this._fromType(e[0])*r;this.setValueAtTime(this._toType(i),n);const o=s/(e.length-1);for(let a=1;a<e.length;a++){const c=this._fromType(e[a])*r;this.linearRampToValueAtTime(this._toType(c),n+a*o)}return this}cancelScheduledValues(e){const n=this.toSeconds(e);return le(isFinite(n),`Invalid argument to cancelScheduledValues: ${JSON.stringify(e)}`),this._events.cancel(n),this._param.cancelScheduledValues(n),this.log(this.units,"cancelScheduledValues",n),this}cancelAndHoldAtTime(e){const n=this.toSeconds(e),s=this._fromType(this.getValueAtTime(n));le(isFinite(n),`Invalid argument to cancelAndHoldAtTime: ${JSON.stringify(e)}`),this.log(this.units,"cancelAndHoldAtTime",n,"value="+s);const r=this._events.get(n),i=this._events.getAfter(n);return r&&Xt(r.time,n)?i?(this._param.cancelScheduledValues(i.time),this._events.cancel(i.time)):(this._param.cancelAndHoldAtTime(n),this._events.cancel(n+this.sampleTime)):i&&(this._param.cancelScheduledValues(i.time),this._events.cancel(i.time),i.type==="linearRampToValueAtTime"?this.linearRampToValueAtTime(this._toType(s),n):i.type==="exponentialRampToValueAtTime"&&this.exponentialRampToValueAtTime(this._toType(s),n)),this._events.add({time:n,type:"setValueAtTime",value:s}),this._param.setValueAtTime(s,n),this}rampTo(e,n=.1,s){return this.units==="frequency"||this.units==="bpm"||this.units==="decibels"?this.exponentialRampTo(e,n,s):this.linearRampTo(e,n,s),this}apply(e){const n=this.context.currentTime;e.setValueAtTime(this.getValueAtTime(n),n);const s=this._events.get(n);if(s&&s.type==="setTargetAtTime"){const r=this._events.getAfter(s.time),i=r?r.time:n+2,o=(i-n)/10;for(let a=n;a<i;a+=o)e.linearRampToValueAtTime(this.getValueAtTime(a),a)}return this._events.forEachAfter(this.context.currentTime,r=>{r.type==="cancelScheduledValues"?e.cancelScheduledValues(r.time):r.type==="setTargetAtTime"?e.setTargetAtTime(r.value,r.time,r.constant):e[r.type](r.value,r.time)}),this}setParam(e){le(this._swappable,"The Param must be assigned as 'swappable' in the constructor");const n=this.input;return n.disconnect(this._param),this.apply(e),this._param=e,n.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(e,n,s,r,i){return s+(n-s)*Math.exp(-(i-e)/r)}_linearInterpolate(e,n,s,r,i){return n+(r-n)*((i-e)/(s-e))}_exponentialInterpolate(e,n,s,r,i){return n*Math.pow(r/n,(i-e)/(s-e))}}class re extends ct{constructor(){super(...arguments),this._internalChannels=[]}get numberOfInputs(){return be(this.input)?Ts(this.input)||this.input instanceof xe?1:this.input.numberOfInputs:0}get numberOfOutputs(){return be(this.output)?this.output.numberOfOutputs:0}_isAudioNode(e){return be(e)&&(e instanceof re||Xn(e))}_getInternalNodes(){const e=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&e.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&e.push(this.output),e}_setChannelProperties(e){this._getInternalNodes().forEach(s=>{s.channelCount=e.channelCount,s.channelCountMode=e.channelCountMode,s.channelInterpretation=e.channelInterpretation})}_getChannelProperties(){const e=this._getInternalNodes();le(e.length>0,"ToneAudioNode does not have any internal nodes");const n=e[0];return{channelCount:n.channelCount,channelCountMode:n.channelCountMode,channelInterpretation:n.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(e){const n=this._getChannelProperties();this._setChannelProperties(Object.assign(n,{channelCount:e}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(e){const n=this._getChannelProperties();this._setChannelProperties(Object.assign(n,{channelCountMode:e}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(e){const n=this._getChannelProperties();this._setChannelProperties(Object.assign(n,{channelInterpretation:e}))}connect(e,n=0,s=0){return ss(this,e,n,s),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return Co("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(e,n=0,s=0){return Ew(this,e,n,s),this}chain(...e){return ic(this,...e),this}fan(...e){return e.forEach(n=>this.connect(n)),this}dispose(){return super.dispose(),be(this.input)&&(this.input instanceof re?this.input.dispose():Xn(this.input)&&this.input.disconnect()),be(this.output)&&(this.output instanceof re?this.output.dispose():Xn(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}function ic(...t){const e=t.shift();t.reduce((n,s)=>(n instanceof re?n.connect(s):Xn(n)&&ss(n,s),s),e)}function ss(t,e,n=0,s=0){for(le(be(t),"Cannot connect from undefined node"),le(be(e),"Cannot connect to undefined node"),(e instanceof re||Xn(e))&&le(e.numberOfInputs>0,"Cannot connect to node with no inputs"),le(t.numberOfOutputs>0,"Cannot connect from node with no outputs");e instanceof re||e instanceof xe;)be(e.input)&&(e=e.input);for(;t instanceof re;)be(t.output)&&(t=t.output);Ts(e)?t.connect(e,n):t.connect(e,n,s)}function Ew(t,e,n=0,s=0){if(be(e))for(;e instanceof re;)e=e.input;for(;!Xn(t);)be(t.output)&&(t=t.output);Ts(e)?t.disconnect(e,n):Xn(e)?t.disconnect(e,n,s):t.disconnect()}class Ve extends re{constructor(){const e=ie(Ve.getDefaults(),arguments,["gain","units"]);super(e),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode,this.gain=new xe({context:this.context,convert:e.convert,param:this._gainNode.gain,units:e.units,value:e.gain,minValue:e.minValue,maxValue:e.maxValue}),De(this,"gain")}static getDefaults(){return Object.assign(re.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}}class ar extends re{constructor(e){super(e),this.onended=Ae,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new Ve({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(n){const s=this.toSeconds(n);return this._startTime!==-1&&s>=this._startTime&&(this._stopTime===-1||s<=this._stopTime)?"started":"stopped"},this._fadeIn=e.fadeIn,this._fadeOut=e.fadeOut,this._curve=e.curve,this.onended=e.onended}static getDefaults(){return Object.assign(re.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:Ae})}_startGain(e,n=1){le(this._startTime===-1,"Source cannot be started more than once");const s=this.toSeconds(this._fadeIn);return this._startTime=e+s,this._startTime=Math.max(this._startTime,this.context.currentTime),s>0?(this._gainNode.gain.setValueAtTime(0,e),this._curve==="linear"?this._gainNode.gain.linearRampToValueAtTime(n,e+s):this._gainNode.gain.exponentialApproachValueAtTime(n,e,s)):this._gainNode.gain.setValueAtTime(n,e),this}stop(e){return this.log("stop",e),this._stopGain(this.toSeconds(e)),this}_stopGain(e){le(this._startTime!==-1,"'start' must be called before 'stop'"),this.cancelStop();const n=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(e)+n,this._stopTime=Math.max(this._stopTime,this.now()),n>0?this._curve==="linear"?this._gainNode.gain.linearRampTo(0,n,e):this._gainNode.gain.targetRampTo(0,n,e):(this._gainNode.gain.cancelAndHoldAtTime(e),this._gainNode.gain.setValueAtTime(0,e)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(()=>{const s=this._curve==="exponential"?n*2:0;this._stopSource(this.now()+s),this._onended()},this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==Ae&&(this.onended(this),this.onended=Ae,!this.context.isOffline)){const e=()=>this.dispose();typeof window.requestIdleCallback<"u"?window.requestIdleCallback(e):setTimeout(e,1e3)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),le(this._startTime!==-1,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.dispose(),this.onended=Ae,this}}class il extends ar{constructor(){const e=ie(il.getDefaults(),arguments,["offset"]);super(e),this.name="ToneConstantSource",this._source=this.context.createConstantSource(),ss(this._source,this._gainNode),this.offset=new xe({context:this.context,convert:e.convert,param:this._source.offset,units:e.units,value:e.offset,minValue:e.minValue,maxValue:e.maxValue})}static getDefaults(){return Object.assign(ar.getDefaults(),{convert:!0,offset:1,units:"number"})}start(e){const n=this.toSeconds(e);return this.log("start",n),this._startGain(n),this._source.start(n),this}_stopSource(e){this._source.stop(e)}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}}class st extends re{constructor(){const e=ie(st.getDefaults(),arguments,["value","units"]);super(e),this.name="Signal",this.override=!0,this.output=this._constantSource=new il({context:this.context,convert:e.convert,offset:e.value,units:e.units,minValue:e.minValue,maxValue:e.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(re.getDefaults(),{convert:!0,units:"number",value:0})}connect(e,n=0,s=0){return ol(this,e,n,s),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(e,n){return this._param.setValueAtTime(e,n),this}getValueAtTime(e){return this._param.getValueAtTime(e)}setRampPoint(e){return this._param.setRampPoint(e),this}linearRampToValueAtTime(e,n){return this._param.linearRampToValueAtTime(e,n),this}exponentialRampToValueAtTime(e,n){return this._param.exponentialRampToValueAtTime(e,n),this}exponentialRampTo(e,n,s){return this._param.exponentialRampTo(e,n,s),this}linearRampTo(e,n,s){return this._param.linearRampTo(e,n,s),this}targetRampTo(e,n,s){return this._param.targetRampTo(e,n,s),this}exponentialApproachValueAtTime(e,n,s){return this._param.exponentialApproachValueAtTime(e,n,s),this}setTargetAtTime(e,n,s){return this._param.setTargetAtTime(e,n,s),this}setValueCurveAtTime(e,n,s,r){return this._param.setValueCurveAtTime(e,n,s,r),this}cancelScheduledValues(e){return this._param.cancelScheduledValues(e),this}cancelAndHoldAtTime(e){return this._param.cancelAndHoldAtTime(e),this}rampTo(e,n,s){return this._param.rampTo(e,n,s),this}get value(){return this._param.value}set value(e){this._param.value=e}get convert(){return this._param.convert}set convert(e){this._param.convert=e}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(e){this._param.overridden=e}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(e){return this._param.apply(e),this}}function ol(t,e,n,s){(e instanceof xe||Ts(e)||e instanceof st&&e.override)&&(e.cancelScheduledValues(0),e.setValueAtTime(0,0),e instanceof st&&(e.overridden=!0)),ss(t,e,n,s)}class al extends xe{constructor(){const e=ie(al.getDefaults(),arguments,["value"]);super(e),this.name="TickParam",this._events=new Kt(1/0),this._multiplier=1,this._multiplier=e.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(e.value)}),this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(xe.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(e,n,s){n=this.toSeconds(n),this.setRampPoint(n);const r=this._fromType(e),i=this._events.get(n),o=Math.round(Math.max(1/s,1));for(let a=0;a<=o;a++){const c=s*a+n,l=this._exponentialApproach(i.time,i.value,r,s,c);this.linearRampToValueAtTime(this._toType(l),c)}return this}setValueAtTime(e,n){const s=this.toSeconds(n);super.setValueAtTime(e,n);const r=this._events.get(s),i=this._events.previousEvent(r),o=this._getTicksUntilEvent(i,s);return r.ticks=Math.max(o,0),this}linearRampToValueAtTime(e,n){const s=this.toSeconds(n);super.linearRampToValueAtTime(e,n);const r=this._events.get(s),i=this._events.previousEvent(r),o=this._getTicksUntilEvent(i,s);return r.ticks=Math.max(o,0),this}exponentialRampToValueAtTime(e,n){n=this.toSeconds(n);const s=this._fromType(e),r=this._events.get(n),i=Math.round(Math.max((n-r.time)*10,1)),o=(n-r.time)/i;for(let a=0;a<=i;a++){const c=o*a+r.time,l=this._exponentialInterpolate(r.time,r.value,n,s,c);this.linearRampToValueAtTime(this._toType(l),c)}return this}_getTicksUntilEvent(e,n){if(e===null)e={ticks:0,time:0,type:"setValueAtTime",value:0};else if(Yt(e.ticks)){const o=this._events.previousEvent(e);e.ticks=this._getTicksUntilEvent(o,e.time)}const s=this._fromType(this.getValueAtTime(e.time));let r=this._fromType(this.getValueAtTime(n));const i=this._events.get(n);return i&&i.time===n&&i.type==="setValueAtTime"&&(r=this._fromType(this.getValueAtTime(n-this.sampleTime))),.5*(n-e.time)*(s+r)+e.ticks}getTicksAtTime(e){const n=this.toSeconds(e),s=this._events.get(n);return Math.max(this._getTicksUntilEvent(s,n),0)}getDurationOfTicks(e,n){const s=this.toSeconds(n),r=this.getTicksAtTime(n);return this.getTimeOfTick(r+e)-s}getTimeOfTick(e){const n=this._events.get(e,"ticks"),s=this._events.getAfter(e,"ticks");if(n&&n.ticks===e)return n.time;if(n&&s&&s.type==="linearRampToValueAtTime"&&n.value!==s.value){const r=this._fromType(this.getValueAtTime(n.time)),o=(this._fromType(this.getValueAtTime(s.time))-r)/(s.time-n.time),a=Math.sqrt(Math.pow(r,2)-2*o*(n.ticks-e)),c=(-r+a)/o,l=(-r-a)/o;return(c>0?c:l)+n.time}else return n?n.value===0?1/0:n.time+(e-n.ticks)/n.value:e/this._initialValue}ticksToTime(e,n){return this.getDurationOfTicks(e,n)}timeToTicks(e,n){const s=this.toSeconds(n),r=this.toSeconds(e),i=this.getTicksAtTime(s);return this.getTicksAtTime(s+r)-i}_fromType(e){return this.units==="bpm"&&this.multiplier?1/(60/e/this.multiplier):super._fromType(e)}_toType(e){return this.units==="bpm"&&this.multiplier?e/this.multiplier*60:super._toType(e)}get multiplier(){return this._multiplier}set multiplier(e){const n=this.value;this._multiplier=e,this.cancelScheduledValues(0),this.setValueAtTime(n,0)}}class cl extends st{constructor(){const e=ie(cl.getDefaults(),arguments,["value"]);super(e),this.name="TickSignal",this.input=this._param=new al({context:this.context,convert:e.convert,multiplier:e.multiplier,param:this._constantSource.offset,units:e.units,value:e.value})}static getDefaults(){return Object.assign(st.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(e,n){return this._param.ticksToTime(e,n)}timeToTicks(e,n){return this._param.timeToTicks(e,n)}getTimeOfTick(e){return this._param.getTimeOfTick(e)}getDurationOfTicks(e,n){return this._param.getDurationOfTicks(e,n)}getTicksAtTime(e){return this._param.getTicksAtTime(e)}get multiplier(){return this._param.multiplier}set multiplier(e){this._param.multiplier=e}dispose(){return super.dispose(),this._param.dispose(),this}}class ll extends ct{constructor(){const e=ie(ll.getDefaults(),arguments,["frequency"]);super(e),this.name="TickSource",this._state=new Ro,this._tickOffset=new Kt,this._ticksAtTime=new Kt,this._secondsAtTime=new Kt,this.frequency=new cl({context:this.context,units:e.units,value:e.frequency}),De(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},ct.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(e,n){const s=this.toSeconds(e);return this._state.getValueAtTime(s)!=="started"&&(this._state.setStateAtTime("started",s),be(n)&&this.setTicksAtTime(n,s),this._ticksAtTime.cancel(s),this._secondsAtTime.cancel(s)),this}stop(e){const n=this.toSeconds(e);if(this._state.getValueAtTime(n)==="stopped"){const s=this._state.get(n);s&&s.time>0&&(this._tickOffset.cancel(s.time),this._state.cancel(s.time))}return this._state.cancel(n),this._state.setStateAtTime("stopped",n),this.setTicksAtTime(0,n),this._ticksAtTime.cancel(n),this._secondsAtTime.cancel(n),this}pause(e){const n=this.toSeconds(e);return this._state.getValueAtTime(n)==="started"&&(this._state.setStateAtTime("paused",n),this._ticksAtTime.cancel(n),this._secondsAtTime.cancel(n)),this}cancel(e){return e=this.toSeconds(e),this._state.cancel(e),this._tickOffset.cancel(e),this._ticksAtTime.cancel(e),this._secondsAtTime.cancel(e),this}getTicksAtTime(e){const n=this.toSeconds(e),s=this._state.getLastState("stopped",n),r=this._ticksAtTime.get(n),i={state:"paused",time:n};this._state.add(i);let o=r||s,a=r?r.ticks:0,c=null;return this._state.forEachBetween(o.time,n+this.sampleTime,l=>{let u=o.time;const h=this._tickOffset.get(l.time);h&&h.time>=o.time&&(a=h.ticks,u=h.time),o.state==="started"&&l.state!=="started"&&(a+=this.frequency.getTicksAtTime(l.time)-this.frequency.getTicksAtTime(u),l.time!==i.time&&(c={state:l.state,time:l.time,ticks:a})),o=l}),this._state.remove(i),c&&this._ticksAtTime.add(c),a}get ticks(){return this.getTicksAtTime(this.now())}set ticks(e){this.setTicksAtTime(e,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(e){const n=this.now(),s=this.frequency.timeToTicks(e,n);this.setTicksAtTime(s,n)}getSecondsAtTime(e){e=this.toSeconds(e);const n=this._state.getLastState("stopped",e),s={state:"paused",time:e};this._state.add(s);const r=this._secondsAtTime.get(e);let i=r||n,o=r?r.seconds:0,a=null;return this._state.forEachBetween(i.time,e+this.sampleTime,c=>{let l=i.time;const u=this._tickOffset.get(c.time);u&&u.time>=i.time&&(o=u.seconds,l=u.time),i.state==="started"&&c.state!=="started"&&(o+=c.time-l,c.time!==s.time&&(a={state:c.state,time:c.time,seconds:o})),i=c}),this._state.remove(s),a&&this._secondsAtTime.add(a),o}setTicksAtTime(e,n){return n=this.toSeconds(n),this._tickOffset.cancel(n),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(e,n),ticks:e,time:n}),this._ticksAtTime.cancel(n),this._secondsAtTime.cancel(n),this}getStateAtTime(e){return e=this.toSeconds(e),this._state.getValueAtTime(e)}getTimeOfTick(e,n=this.now()){const s=this._tickOffset.get(n),r=this._state.get(n),i=Math.max(s.time,r.time),o=this.frequency.getTicksAtTime(i)+e-s.ticks;return this.frequency.getTimeOfTick(o)}forEachTickBetween(e,n,s){let r=this._state.get(e);this._state.forEachBetween(e,n,o=>{r&&r.state==="started"&&o.state!=="started"&&this.forEachTickBetween(Math.max(r.time,e),o.time-this.sampleTime,s),r=o});let i=null;if(r&&r.state==="started"){const o=Math.max(r.time,e),a=this.frequency.getTicksAtTime(o),c=this.frequency.getTicksAtTime(r.time),l=a-c;let u=Math.ceil(l)-l;u=Xt(u,1)?0:u;let h=this.frequency.getTimeOfTick(a+u);for(;h<n;){try{s(h,Math.round(this.getTicksAtTime(h)))}catch(f){i=f;break}h+=this.frequency.getDurationOfTicks(1,h)}}if(i)throw i;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this._ticksAtTime.dispose(),this._secondsAtTime.dispose(),this.frequency.dispose(),this}}class Do extends ct{constructor(){const e=ie(Do.getDefaults(),arguments,["callback","frequency"]);super(e),this.name="Clock",this.callback=Ae,this._lastUpdate=0,this._state=new Ro("stopped"),this._boundLoop=this._loop.bind(this),this.callback=e.callback,this._tickSource=new ll({context:this.context,frequency:e.frequency,units:e.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,De(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(ct.getDefaults(),{callback:Ae,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(e,n){tp(this.context);const s=this.toSeconds(e);return this.log("start",s),this._state.getValueAtTime(s)!=="started"&&(this._state.setStateAtTime("started",s),this._tickSource.start(s,n),s<this._lastUpdate&&this.emit("start",s,n)),this}stop(e){const n=this.toSeconds(e);return this.log("stop",n),this._state.cancel(n),this._state.setStateAtTime("stopped",n),this._tickSource.stop(n),n<this._lastUpdate&&this.emit("stop",n),this}pause(e){const n=this.toSeconds(e);return this._state.getValueAtTime(n)==="started"&&(this._state.setStateAtTime("paused",n),this._tickSource.pause(n),n<this._lastUpdate&&this.emit("pause",n)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(e){this._tickSource.ticks=e}get seconds(){return this._tickSource.seconds}set seconds(e){this._tickSource.seconds=e}getSecondsAtTime(e){return this._tickSource.getSecondsAtTime(e)}setTicksAtTime(e,n){return this._tickSource.setTicksAtTime(e,n),this}getTimeOfTick(e,n=this.now()){return this._tickSource.getTimeOfTick(e,n)}getTicksAtTime(e){return this._tickSource.getTicksAtTime(e)}nextTickTime(e,n){const s=this.toSeconds(n),r=this.getTicksAtTime(s);return this._tickSource.getTimeOfTick(r+e,s)}_loop(){const e=this._lastUpdate,n=this.now();this._lastUpdate=n,this.log("loop",e,n),e!==n&&(this._state.forEachBetween(e,n,s=>{switch(s.state){case"started":const r=this._tickSource.getTicksAtTime(s.time);this.emit("start",s.time,r);break;case"stopped":s.time!==0&&this.emit("stop",s.time);break;case"paused":this.emit("pause",s.time);break}}),this._tickSource.forEachTickBetween(e,n,(s,r)=>{this.callback(s,r)}))}getStateAtTime(e){const n=this.toSeconds(e);return this._state.getValueAtTime(n)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}}hi.mixin(Do);class xs extends re{constructor(){const e=ie(xs.getDefaults(),arguments,["volume"]);super(e),this.name="Volume",this.input=this.output=new Ve({context:this.context,gain:e.volume,units:"decibels"}),this.volume=this.output.gain,De(this,"volume"),this._unmutedVolume=e.volume,this.mute=e.mute}static getDefaults(){return Object.assign(re.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(e){!this.mute&&e?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!e&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}}class ul extends re{constructor(){const e=ie(ul.getDefaults(),arguments);super(e),this.name="Destination",this.input=new xs({context:this.context}),this.output=new Ve({context:this.context}),this.volume=this.input.volume,ic(this.input,this.output,this.context.rawContext.destination),this.mute=e.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(re.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(e){this.input.mute=e}chain(...e){return this.input.disconnect(),e.unshift(this.input),e.push(this.output),ic(...e),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}}xo(t=>{t.destination=new ul({context:t})});Io(t=>{t.destination.dispose()});class Nw extends re{constructor(){super(...arguments),this.name="Listener",this.positionX=new xe({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new xe({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new xe({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new xe({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new xe({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new xe({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new xe({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new xe({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new xe({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(re.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}}xo(t=>{t.listener=new Nw({context:t})});Io(t=>{t.listener.dispose()});class hl extends Gn{constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;const e=ie(hl.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=e.baseUrl,Object.keys(e.urls).forEach(n=>{this._loadingCount++;const s=e.urls[n];this.add(n,s,this._bufferLoaded.bind(this,e.onload),e.onerror)})}static getDefaults(){return{baseUrl:"",onerror:Ae,onload:Ae,urls:{}}}has(e){return this._buffers.has(e.toString())}get(e){return le(this.has(e),`ToneAudioBuffers has no buffer named: ${e}`),this._buffers.get(e.toString())}_bufferLoaded(e){this._loadingCount--,this._loadingCount===0&&e&&e()}get loaded(){return Array.from(this._buffers).every(([e,n])=>n.loaded)}add(e,n,s=Ae,r=Ae){return jn(n)?(this.baseUrl&&n.trim().substring(0,11).toLowerCase()==="data:audio/"&&(this.baseUrl=""),this._buffers.set(e.toString(),new Ce(this.baseUrl+n,s,r))):this._buffers.set(e.toString(),new Ce(n,s,r)),this}dispose(){return super.dispose(),this._buffers.forEach(e=>e.dispose()),this._buffers.clear(),this}}class Gt extends Fr{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(e){return this._getPPQ()*e}_secondsToUnits(e){return Math.floor(e/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(e){return e}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}class Cw extends ct{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new Kt,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(e,n){return this._events.add({callback:e,time:this.toSeconds(n)}),this._events.length===1&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(e){return this._events.cancel(this.toSeconds(e)),this}_drawLoop(){const e=this.context.currentTime;for(;this._events.length&&this._events.peek().time-this.anticipation<=e;){const n=this._events.shift();n&&e-n.time<=this.expiration&&n.callback()}this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}}xo(t=>{t.draw=new Cw({context:t})});Io(t=>{t.draw.dispose()});class xw extends Gn{constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(e){le(be(e.time),"Events must have a time property"),le(be(e.duration),"Events must have a duration parameter"),e.time=e.time.valueOf();let n=new Iw(e.time,e.time+e.duration,e);for(this._root===null?this._root=n:this._root.insert(n),this._length++;n!==null;)n.updateHeight(),n.updateMax(),this._rebalance(n),n=n.parent;return this}remove(e){if(this._root!==null){const n=[];this._root.search(e.time,n);for(const s of n)if(s.event===e){this._removeNode(s),this._length--;break}}return this}get length(){return this._length}cancel(e){return this.forEachFrom(e,n=>this.remove(n)),this}_setRoot(e){this._root=e,this._root!==null&&(this._root.parent=null)}_replaceNodeInParent(e,n){e.parent!==null?(e.isLeftChild()?e.parent.left=n:e.parent.right=n,this._rebalance(e.parent)):this._setRoot(n)}_removeNode(e){if(e.left===null&&e.right===null)this._replaceNodeInParent(e,null);else if(e.right===null)this._replaceNodeInParent(e,e.left);else if(e.left===null)this._replaceNodeInParent(e,e.right);else{const n=e.getBalance();let s,r=null;if(n>0)if(e.left.right===null)s=e.left,s.right=e.right,r=s;else{for(s=e.left.right;s.right!==null;)s=s.right;s.parent&&(s.parent.right=s.left,r=s.parent,s.left=e.left,s.right=e.right)}else if(e.right.left===null)s=e.right,s.left=e.left,r=s;else{for(s=e.right.left;s.left!==null;)s=s.left;s.parent&&(s.parent.left=s.right,r=s.parent,s.left=e.left,s.right=e.right)}e.parent!==null?e.isLeftChild()?e.parent.left=s:e.parent.right=s:this._setRoot(s),r&&this._rebalance(r)}e.dispose()}_rotateLeft(e){const n=e.parent,s=e.isLeftChild(),r=e.right;r&&(e.right=r.left,r.left=e),n!==null?s?n.left=r:n.right=r:this._setRoot(r)}_rotateRight(e){const n=e.parent,s=e.isLeftChild(),r=e.left;r&&(e.left=r.right,r.right=e),n!==null?s?n.left=r:n.right=r:this._setRoot(r)}_rebalance(e){const n=e.getBalance();n>1&&e.left?e.left.getBalance()<0?this._rotateLeft(e.left):this._rotateRight(e):n<-1&&e.right&&(e.right.getBalance()>0?this._rotateRight(e.right):this._rotateLeft(e))}get(e){if(this._root!==null){const n=[];if(this._root.search(e,n),n.length>0){let s=n[0];for(let r=1;r<n.length;r++)n[r].low>s.low&&(s=n[r]);return s.event}}return null}forEach(e){if(this._root!==null){const n=[];this._root.traverse(s=>n.push(s)),n.forEach(s=>{s.event&&e(s.event)})}return this}forEachAtTime(e,n){if(this._root!==null){const s=[];this._root.search(e,s),s.forEach(r=>{r.event&&n(r.event)})}return this}forEachFrom(e,n){if(this._root!==null){const s=[];this._root.searchAfter(e,s),s.forEach(r=>{r.event&&n(r.event)})}return this}dispose(){return super.dispose(),this._root!==null&&this._root.traverse(e=>e.dispose()),this._root=null,this}}class Iw{constructor(e,n,s){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=s,this.low=e,this.high=n,this.max=this.high}insert(e){e.low<=this.low?this.left===null?this.left=e:this.left.insert(e):this.right===null?this.right=e:this.right.insert(e)}search(e,n){e>this.max||(this.left!==null&&this.left.search(e,n),this.low<=e&&this.high>e&&n.push(this),!(this.low>e)&&this.right!==null&&this.right.search(e,n))}searchAfter(e,n){this.low>=e&&(n.push(this),this.left!==null&&this.left.searchAfter(e,n)),this.right!==null&&this.right.searchAfter(e,n)}traverse(e){e(this),this.left!==null&&this.left.traverse(e),this.right!==null&&this.right.traverse(e)}updateHeight(){this.left!==null&&this.right!==null?this.height=Math.max(this.left.height,this.right.height)+1:this.right!==null?this.height=this.right.height+1:this.left!==null?this.height=this.left.height+1:this.height=0}updateMax(){this.max=this.high,this.left!==null&&(this.max=Math.max(this.max,this.left.max)),this.right!==null&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let e=0;return this.left!==null&&this.right!==null?e=this.left.height-this.right.height:this.left!==null?e=this.left.height+1:this.right!==null&&(e=-(this.right.height+1)),e}isLeftChild(){return this.parent!==null&&this.parent.left===this}get left(){return this._left}set left(e){this._left=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(e){this._right=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}}class Pw extends Gn{constructor(e){super(),this.name="TimelineValue",this._timeline=new Kt({memory:10}),this._initialValue=e}set(e,n){return this._timeline.add({value:e,time:n}),this}get(e){const n=this._timeline.get(e);return n?n.value:this._initialValue}}class Ms extends re{constructor(){super(ie(Ms.getDefaults(),arguments,["context"]))}connect(e,n=0,s=0){return ol(this,e,n,s),this}}class yr extends Ms{constructor(){const e=ie(yr.getDefaults(),arguments,["mapping","length"]);super(e),this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper,an(e.mapping)||e.mapping instanceof Float32Array?this.curve=Float32Array.from(e.mapping):sw(e.mapping)&&this.setMap(e.mapping,e.length)}static getDefaults(){return Object.assign(st.getDefaults(),{length:1024})}setMap(e,n=1024){const s=new Float32Array(n);for(let r=0,i=n;r<i;r++){const o=r/(i-1)*2-1;s[r]=e(o,r)}return this.curve=s,this}get curve(){return this._shaper.curve}set curve(e){this._shaper.curve=e}get oversample(){return this._shaper.oversample}set oversample(e){const n=["none","2x","4x"].some(s=>s.includes(e));le(n,"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=e}dispose(){return super.dispose(),this._shaper.disconnect(),this}}class fl extends Ms{constructor(){const e=ie(fl.getDefaults(),arguments,["value"]);super(e),this.name="Pow",this._exponentScaler=this.input=this.output=new yr({context:this.context,mapping:this._expFunc(e.value),length:8192}),this._exponent=e.value}static getDefaults(){return Object.assign(Ms.getDefaults(),{value:1})}_expFunc(e){return n=>Math.pow(Math.abs(n),e)}get value(){return this._exponent}set value(e){this._exponent=e,this._exponentScaler.setMap(this._expFunc(this._exponent))}dispose(){return super.dispose(),this._exponentScaler.dispose(),this}}class rs{constructor(e,n){this.id=rs._eventId++,this._remainderTime=0;const s=Object.assign(rs.getDefaults(),n);this.transport=e,this.callback=s.callback,this._once=s.once,this.time=Math.floor(s.time),this._remainderTime=s.time-this.time}static getDefaults(){return{callback:Ae,once:!1,time:0}}get floatTime(){return this.time+this._remainderTime}invoke(e){if(this.callback){const n=this.transport.bpm.getDurationOfTicks(1,e);this.callback(e+this._remainderTime*n),this._once&&this.transport.clear(this.id)}}dispose(){return this.callback=void 0,this}}rs._eventId=0;class dl extends rs{constructor(e,n){super(e,n),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);const s=Object.assign(dl.getDefaults(),n);this.duration=s.duration,this._interval=s.interval,this._nextTick=s.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.transport.on("ticks",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},rs.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(e){this._createEvents(e),super.invoke(e)}_createEvent(){return Xi(this._nextTick,this.floatTime+this.duration)?this.transport.scheduleOnce(this.invoke.bind(this),new Gt(this.context,this._nextTick).toSeconds()):-1}_createEvents(e){Xi(this._nextTick+this._interval,this.floatTime+this.duration)&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new Gt(this.context,this._nextTick).toSeconds()))}_restart(e){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.floatTime;const n=this.transport.getTicksAtTime(e);or(n,this.time)&&(this._nextTick=this.floatTime+Math.ceil((n-this.floatTime)/this._interval)*this._interval),this._currentId=this._createEvent(),this._nextTick+=this._interval,this._nextId=this._createEvent()}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this.transport.off("ticks",this._boundRestart),this}}class Fo extends ct{constructor(){const e=ie(Fo.getDefaults(),arguments);super(e),this.name="Transport",this._loop=new Pw(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new Kt,this._repeatedEvents=new xw,this._syncedSignals=[],this._swingAmount=0,this._ppq=e.ppq,this._clock=new Do({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=e.ppq,this.bpm.setValueAtTime(e.bpm,0),De(this,"bpm"),this._timeSignature=e.timeSignature,this._swingTicks=e.ppq/2}static getDefaults(){return Object.assign(ct.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(e,n){if(this._loop.get(e)&&n>=this._loopEnd&&(this.emit("loopEnd",e),this._clock.setTicksAtTime(this._loopStart,e),n=this._loopStart,this.emit("loopStart",e,this._clock.getSecondsAtTime(e)),this.emit("loop",e)),this._swingAmount>0&&n%this._ppq!==0&&n%(this._swingTicks*2)!==0){const s=n%(this._swingTicks*2)/(this._swingTicks*2),r=Math.sin(s*Math.PI)*this._swingAmount;e+=new Gt(this.context,this._swingTicks*2/3).toSeconds()*r}ju(!0),this._timeline.forEachAtTime(n,s=>s.invoke(e)),ju(!1)}schedule(e,n){const s=new rs(this,{callback:e,time:new Fr(this.context,n).toTicks()});return this._addEvent(s,this._timeline)}scheduleRepeat(e,n,s,r=1/0){const i=new dl(this,{callback:e,duration:new en(this.context,r).toTicks(),interval:new en(this.context,n).toTicks(),time:new Fr(this.context,s).toTicks()});return this._addEvent(i,this._repeatedEvents)}scheduleOnce(e,n){const s=new rs(this,{callback:e,once:!0,time:new Fr(this.context,n).toTicks()});return this._addEvent(s,this._timeline)}clear(e){if(this._scheduledEvents.hasOwnProperty(e)){const n=this._scheduledEvents[e.toString()];n.timeline.remove(n.event),n.event.dispose(),delete this._scheduledEvents[e.toString()]}return this}_addEvent(e,n){return this._scheduledEvents[e.id.toString()]={event:e,timeline:n},n.add(e),e.id}cancel(e=0){const n=this.toTicks(e);return this._timeline.forEachFrom(n,s=>this.clear(s.id)),this._repeatedEvents.forEachFrom(n,s=>this.clear(s.id)),this}_bindClockEvents(){this._clock.on("start",(e,n)=>{n=new Gt(this.context,n).toSeconds(),this.emit("start",e,n)}),this._clock.on("stop",e=>{this.emit("stop",e)}),this._clock.on("pause",e=>{this.emit("pause",e)})}get state(){return this._clock.getStateAtTime(this.now())}start(e,n){this.context.resume();let s;return be(n)&&(s=this.toTicks(n)),this._clock.start(e,s),this}stop(e){return this._clock.stop(e),this}pause(e){return this._clock.pause(e),this}toggle(e){return e=this.toSeconds(e),this._clock.getStateAtTime(e)!=="started"?this.start(e):this.stop(e),this}get timeSignature(){return this._timeSignature}set timeSignature(e){an(e)&&(e=e[0]/e[1]*4),this._timeSignature=e}get loopStart(){return new en(this.context,this._loopStart,"i").toSeconds()}set loopStart(e){this._loopStart=this.toTicks(e)}get loopEnd(){return new en(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(e){this._loopEnd=this.toTicks(e)}get loop(){return this._loop.get(this.now())}set loop(e){this._loop.set(e,this.now())}setLoopPoints(e,n){return this.loopStart=e,this.loopEnd=n,this}get swing(){return this._swingAmount}set swing(e){this._swingAmount=e}get swingSubdivision(){return new Gt(this.context,this._swingTicks).toNotation()}set swingSubdivision(e){this._swingTicks=this.toTicks(e)}get position(){const e=this.now(),n=this._clock.getTicksAtTime(e);return new Gt(this.context,n).toBarsBeatsSixteenths()}set position(e){const n=this.toTicks(e);this.ticks=n}get seconds(){return this._clock.seconds}set seconds(e){const n=this.now(),s=this._clock.frequency.timeToTicks(e,n);this.ticks=s}get progress(){if(this.loop){const e=this.now();return(this._clock.getTicksAtTime(e)-this._loopStart)/(this._loopEnd-this._loopStart)}else return 0}get ticks(){return this._clock.ticks}set ticks(e){if(this._clock.ticks!==e){const n=this.now();if(this.state==="started"){const s=this._clock.getTicksAtTime(n),r=this._clock.frequency.getDurationOfTicks(Math.ceil(s)-s,n),i=n+r;this.emit("stop",i),this._clock.setTicksAtTime(e,i),this.emit("start",i,this._clock.getSecondsAtTime(i))}else this.emit("ticks",n),this._clock.setTicksAtTime(e,n)}}getTicksAtTime(e){return this._clock.getTicksAtTime(e)}getSecondsAtTime(e){return this._clock.getSecondsAtTime(e)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(e){this._clock.frequency.multiplier=e}nextSubdivision(e){if(e=this.toTicks(e),this.state!=="started")return 0;{const n=this.now(),s=this.getTicksAtTime(n),r=e-s%e;return this._clock.nextTickTime(r,n)}}syncSignal(e,n){const s=this.now();let r=this.bpm,i=1/(60/r.getValueAtTime(s)/this.PPQ),o=[];if(e.units==="time"){const c=.015625/i,l=new Ve(c),u=new fl(-1),h=new Ve(c);r.chain(l,u,h),r=h,i=1/i,o=[l,u,h]}n||(e.getValueAtTime(s)!==0?n=e.getValueAtTime(s)/i:n=0);const a=new Ve(n);return r.connect(a),a.connect(e._param),o.push(a),this._syncedSignals.push({initial:e.value,nodes:o,signal:e}),e.value=0,this}unsyncSignal(e){for(let n=this._syncedSignals.length-1;n>=0;n--){const s=this._syncedSignals[n];s.signal===e&&(s.nodes.forEach(r=>r.dispose()),s.signal.value=s.initial,this._syncedSignals.splice(n,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),ap(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}}hi.mixin(Fo);xo(t=>{t.transport=new Fo({context:t})});Io(t=>{t.transport.dispose()});class Ot extends re{constructor(e){super(e),this.input=void 0,this._state=new Ro("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=Ae,this._syncedStop=Ae,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new xs({context:this.context,mute:e.mute,volume:e.volume}),this.volume=this._volume.volume,De(this,"volume"),this.onstop=e.onstop}static getDefaults(){return Object.assign(re.getDefaults(),{mute:!1,onstop:Ae,volume:0})}get state(){return this._synced?this.context.transport.state==="started"?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}_clampToCurrentTime(e){return this._synced?e:Math.max(e,this.context.currentTime)}start(e,n,s){let r=Yt(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(r=this._clampToCurrentTime(r),!this._synced&&this._state.getValueAtTime(r)==="started")le(or(r,this._state.get(r).time),"Start time must be strictly greater than previous start time"),this._state.cancel(r),this._state.setStateAtTime("started",r),this.log("restart",r),this.restart(r,n,s);else if(this.log("start",r),this._state.setStateAtTime("started",r),this._synced){const i=this._state.get(r);i&&(i.offset=this.toSeconds(ws(n,0)),i.duration=s?this.toSeconds(s):void 0);const o=this.context.transport.schedule(a=>{this._start(a,n,s)},r);this._scheduled.push(o),this.context.transport.state==="started"&&this.context.transport.getSecondsAtTime(this.immediate())>r&&this._syncedStart(this.now(),this.context.transport.seconds)}else tp(this.context),this._start(r,n,s);return this}stop(e){let n=Yt(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(n=this._clampToCurrentTime(n),this._state.getValueAtTime(n)==="started"||be(this._state.getNextState("started",n))){if(this.log("stop",n),!this._synced)this._stop(n);else{const s=this.context.transport.schedule(this._stop.bind(this),n);this._scheduled.push(s)}this._state.cancel(n),this._state.setStateAtTime("stopped",n)}return this}restart(e,n,s){return e=this.toSeconds(e),this._state.getValueAtTime(e)==="started"&&(this._state.cancel(e),this._restart(e,n,s)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(e,n)=>{if(or(n,0)){const s=this._state.get(n);if(s&&s.state==="started"&&s.time!==n){const r=n-this.toSeconds(s.time);let i;s.duration&&(i=this.toSeconds(s.duration)-r),this._start(e,this.toSeconds(s.offset)+r,i)}}},this._syncedStop=e=>{const n=this.context.transport.getSecondsAtTime(Math.max(e-this.sampleTime,0));this._state.getValueAtTime(n)==="started"&&this._stop(e)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach(e=>this.context.transport.clear(e)),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=Ae,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}class di extends ar{constructor(){const e=ie(di.getDefaults(),arguments,["url","onload"]);super(e),this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1,ss(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new xe({context:this.context,param:this._source.playbackRate,units:"positive",value:e.playbackRate}),this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this._buffer=new Ce(e.url,e.onload,e.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(ar.getDefaults(),{url:new Ce,loop:!1,loopEnd:0,loopStart:0,onload:Ae,onerror:Ae,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(e){this._fadeIn=e}get fadeOut(){return this._fadeOut}set fadeOut(e){this._fadeOut=e}get curve(){return this._curve}set curve(e){this._curve=e}start(e,n,s,r=1){le(this.buffer.loaded,"buffer is either not set or not loaded");const i=this.toSeconds(e);this._startGain(i,r),this.loop?n=ws(n,this.loopStart):n=ws(n,0);let o=Math.max(this.toSeconds(n),0);if(this.loop){const a=this.toSeconds(this.loopEnd)||this.buffer.duration,c=this.toSeconds(this.loopStart),l=a-c;sc(o,a)&&(o=(o-c)%l+c),Xt(o,this.buffer.duration)&&(o=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,Xi(o,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(i,o)),be(s)){let a=this.toSeconds(s);a=Math.max(a,0),this.stop(i+a)}return this}_stopSource(e){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(e)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(e){this._source.loopStart=this.toSeconds(e)}get loopEnd(){return this._source.loopEnd}set loopEnd(e){this._source.loopEnd=this.toSeconds(e)}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._source.loop}set loop(e){this._source.loop=e,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}class eo extends Ot{constructor(){const e=ie(eo.getDefaults(),arguments,["type"]);super(e),this.name="Noise",this._source=null,this._playbackRate=e.playbackRate,this.type=e.type,this._fadeIn=e.fadeIn,this._fadeOut=e.fadeOut}static getDefaults(){return Object.assign(Ot.getDefaults(),{fadeIn:0,fadeOut:0,playbackRate:1,type:"white"})}get type(){return this._type}set type(e){if(le(e in Wu,"Noise: invalid type: "+e),this._type!==e&&(this._type=e,this.state==="started")){const n=this.now();this._stop(n),this._start(n)}}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e,this._source&&(this._source.playbackRate.value=e)}_start(e){const n=Wu[this._type];this._source=new di({url:n,context:this.context,fadeIn:this._fadeIn,fadeOut:this._fadeOut,loop:!0,onended:()=>this.onstop(this),playbackRate:this._playbackRate}).connect(this.output),this._source.start(this.toSeconds(e),Math.random()*(n.duration-.001))}_stop(e){this._source&&(this._source.stop(this.toSeconds(e)),this._source=null)}get fadeIn(){return this._fadeIn}set fadeIn(e){this._fadeIn=e,this._source&&(this._source.fadeIn=this._fadeIn)}get fadeOut(){return this._fadeOut}set fadeOut(e){this._fadeOut=e,this._source&&(this._source.fadeOut=this._fadeOut)}_restart(e){this._stop(e),this._start(e)}dispose(){return super.dispose(),this._source&&this._source.disconnect(),this}}const Rs=44100*5,fa=2,kn={brown:null,pink:null,white:null},Wu={get brown(){if(!kn.brown){const t=[];for(let e=0;e<fa;e++){const n=new Float32Array(Rs);t[e]=n;let s=0;for(let r=0;r<Rs;r++){const i=Math.random()*2-1;n[r]=(s+.02*i)/1.02,s=n[r],n[r]*=3.5}}kn.brown=new Ce().fromArray(t)}return kn.brown},get pink(){if(!kn.pink){const t=[];for(let e=0;e<fa;e++){const n=new Float32Array(Rs);t[e]=n;let s,r,i,o,a,c,l;s=r=i=o=a=c=l=0;for(let u=0;u<Rs;u++){const h=Math.random()*2-1;s=.99886*s+h*.0555179,r=.99332*r+h*.0750759,i=.969*i+h*.153852,o=.8665*o+h*.3104856,a=.55*a+h*.5329522,c=-.7616*c-h*.016898,n[u]=s+r+i+o+a+c+l+h*.5362,n[u]*=.11,l=h*.115926}}kn.pink=new Ce().fromArray(t)}return kn.pink},get white(){if(!kn.white){const t=[];for(let e=0;e<fa;e++){const n=new Float32Array(Rs);t[e]=n;for(let s=0;s<Rs;s++)n[s]=Math.random()*2-1}kn.white=new Ce().fromArray(t)}return kn.white}};function Is(t,e){return je(this,void 0,void 0,function*(){const n=e/t.context.sampleRate,s=new Po(1,n,t.context.sampleRate);return new t.constructor(Object.assign(t.get(),{frequency:2/n,detune:0,context:s})).toDestination().start(0),(yield s.render()).getChannelData(0)})}class pl extends ar{constructor(){const e=ie(pl.getDefaults(),arguments,["frequency","type"]);super(e),this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator],ss(this._oscillator,this._gainNode),this.type=e.type,this.frequency=new xe({context:this.context,param:this._oscillator.frequency,units:"frequency",value:e.frequency}),this.detune=new xe({context:this.context,param:this._oscillator.detune,units:"cents",value:e.detune}),De(this,["frequency","detune"])}static getDefaults(){return Object.assign(ar.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(e){const n=this.toSeconds(e);return this.log("start",n),this._startGain(n),this._oscillator.start(n),this}_stopSource(e){this._oscillator.stop(e)}setPeriodicWave(e){return this._oscillator.setPeriodicWave(e),this}get type(){return this._oscillator.type}set type(e){this._oscillator.type=e}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}class Ke extends Ot{constructor(){const e=ie(Ke.getDefaults(),arguments,["frequency","type"]);super(e),this.name="Oscillator",this._oscillator=null,this.frequency=new st({context:this.context,units:"frequency",value:e.frequency}),De(this,"frequency"),this.detune=new st({context:this.context,units:"cents",value:e.detune}),De(this,"detune"),this._partials=e.partials,this._partialCount=e.partialCount,this._type=e.type,e.partialCount&&e.type!=="custom"&&(this._type=this.baseType+e.partialCount.toString()),this.phase=e.phase}static getDefaults(){return Object.assign(Ot.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(e){const n=this.toSeconds(e),s=new pl({context:this.context,onended:()=>this.onstop(this)});this._oscillator=s,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(n)}_stop(e){const n=this.toSeconds(e);this._oscillator&&this._oscillator.stop(n)}_restart(e){const n=this.toSeconds(e);return this.log("restart",n),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(n),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if(this._type==="custom")return Ke._periodicWaveCache.find(n=>n.phase===this._phase&&dw(n.partials,this._partials));{const e=Ke._periodicWaveCache.find(n=>n.type===this._type&&n.phase===this._phase);return this._partialCount=e?e.partialCount:this._partialCount,e}}get type(){return this._type}set type(e){this._type=e;const n=["sine","square","sawtooth","triangle"].indexOf(e)!==-1;if(this._phase===0&&n)this._wave=void 0,this._partialCount=0,this._oscillator!==null&&(this._oscillator.type=e);else{const s=this._getCachedPeriodicWave();if(be(s)){const{partials:r,wave:i}=s;this._wave=i,this._partials=r,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave)}else{const[r,i]=this._getRealImaginary(e,this._phase),o=this.context.createPeriodicWave(r,i);this._wave=o,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave),Ke._periodicWaveCache.push({imag:i,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:r,type:this._type,wave:this._wave}),Ke._periodicWaveCache.length>100&&Ke._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(e){this.partialCount&&this._type!=="custom"&&e!=="custom"?this.type=e+this.partialCount:this.type=e}get partialCount(){return this._partialCount}set partialCount(e){ln(e,0);let n=this._type;const s=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(s&&(n=s[1]),this._type!=="custom")e===0?this.type=n:this.type=n+e.toString();else{const r=new Float32Array(e);this._partials.forEach((i,o)=>r[o]=i),this._partials=Array.from(r),this.type=this._type}}_getRealImaginary(e,n){let r=2048;const i=new Float32Array(r),o=new Float32Array(r);let a=1;if(e==="custom"){if(a=this._partials.length+1,this._partialCount=this._partials.length,r=a,this._partials.length===0)return[i,o]}else{const c=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(e);c?(a=parseInt(c[2],10)+1,this._partialCount=parseInt(c[2],10),e=c[1],a=Math.max(a,2),r=a):this._partialCount=0,this._partials=[]}for(let c=1;c<r;++c){const l=2/(c*Math.PI);let u;switch(e){case"sine":u=c<=a?1:0,this._partials[c-1]=u;break;case"square":u=c&1?2*l:0,this._partials[c-1]=u;break;case"sawtooth":u=l*(c&1?1:-1),this._partials[c-1]=u;break;case"triangle":c&1?u=2*(l*l)*(c-1>>1&1?-1:1):u=0,this._partials[c-1]=u;break;case"custom":u=this._partials[c-1];break;default:throw new TypeError("Oscillator: invalid type: "+e)}u!==0?(i[c]=-u*Math.sin(n*c),o[c]=u*Math.cos(n*c)):(i[c]=0,o[c]=0)}return[i,o]}_inverseFFT(e,n,s){let r=0;const i=e.length;for(let o=0;o<i;o++)r+=e[o]*Math.cos(o*s)+n[o]*Math.sin(o*s);return r}getInitialValue(){const[e,n]=this._getRealImaginary(this._type,0);let s=0;const r=Math.PI*2,i=32;for(let o=0;o<i;o++)s=Math.max(this._inverseFFT(e,n,o/i*r),s);return mw(-this._inverseFFT(e,n,this._phase)/s,-1,1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(e){this._phase=e*Math.PI/180,this.type=this._type}asArray(){return je(this,arguments,void 0,function*(e=1024){return Is(this,e)})}dispose(){return super.dispose(),this._oscillator!==null&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}Ke._periodicWaveCache=[];class kw extends Ms{constructor(){super(...arguments),this.name="AudioToGain",this._norm=new yr({context:this.context,mapping:e=>(e+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class cr extends st{constructor(){const e=ie(cr.getDefaults(),arguments,["value"]);super(e),this.name="Multiply",this.override=!1,this._mult=this.input=this.output=new Ve({context:this.context,minValue:e.minValue,maxValue:e.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(st.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}}class Bo extends Ot{constructor(){const e=ie(Bo.getDefaults(),arguments,["frequency","type","modulationType"]);super(e),this.name="AMOscillator",this._modulationScale=new kw({context:this.context}),this._modulationNode=new Ve({context:this.context}),this._carrier=new Ke({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new Ke({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new cr({context:this.context,units:"positive",value:e.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),De(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(Ke.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){this._modulator.restart(e),this._carrier.restart(e)}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(){return je(this,arguments,void 0,function*(e=1024){return Is(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}class Vo extends Ot{constructor(){const e=ie(Vo.getDefaults(),arguments,["frequency","type","modulationType"]);super(e),this.name="FMOscillator",this._modulationNode=new Ve({context:this.context,gain:0}),this._carrier=new Ke({context:this.context,detune:e.detune,frequency:0,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.detune=this._carrier.detune,this.frequency=new st({context:this.context,units:"frequency",value:e.frequency}),this._modulator=new Ke({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new cr({context:this.context,units:"positive",value:e.harmonicity}),this.modulationIndex=new cr({context:this.context,units:"positive",value:e.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),De(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(Ke.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){return this._modulator.restart(e),this._carrier.restart(e),this}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(){return je(this,arguments,void 0,function*(e=1024){return Is(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}class pi extends Ot{constructor(){const e=ie(pi.getDefaults(),arguments,["frequency","width"]);super(e),this.name="PulseOscillator",this._widthGate=new Ve({context:this.context,gain:0}),this._thresh=new yr({context:this.context,mapping:n=>n<=0?-1:1}),this.width=new st({context:this.context,units:"audioRange",value:e.width}),this._triangle=new Ke({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),De(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(Ot.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(e){e=this.toSeconds(e),this._triangle.start(e),this._widthGate.gain.setValueAtTime(1,e)}_stop(e){e=this.toSeconds(e),this._triangle.stop(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(0,e)}_restart(e){this._triangle.restart(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(1,e)}get phase(){return this._triangle.phase}set phase(e){this._triangle.phase=e}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(e){this._triangle.type=e}asArray(){return je(this,arguments,void 0,function*(e=1024){return Is(this,e)})}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}class Lo extends Ot{constructor(){const e=ie(Lo.getDefaults(),arguments,["frequency","type","spread"]);super(e),this.name="FatOscillator",this._oscillators=[],this.frequency=new st({context:this.context,units:"frequency",value:e.frequency}),this.detune=new st({context:this.context,units:"cents",value:e.detune}),this._spread=e.spread,this._type=e.type,this._phase=e.phase,this._partials=e.partials,this._partialCount=e.partialCount,this.count=e.count,De(this,["frequency","detune"])}static getDefaults(){return Object.assign(Ke.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(e){e=this.toSeconds(e),this._forEach(n=>n.start(e))}_stop(e){e=this.toSeconds(e),this._forEach(n=>n.stop(e))}_restart(e){this._forEach(n=>n.restart(e))}_forEach(e){for(let n=0;n<this._oscillators.length;n++)e(this._oscillators[n],n)}get type(){return this._type}set type(e){this._type=e,this._forEach(n=>n.type=e)}get spread(){return this._spread}set spread(e){if(this._spread=e,this._oscillators.length>1){const n=-e/2,s=e/(this._oscillators.length-1);this._forEach((r,i)=>r.detune.value=n+s*i)}}get count(){return this._oscillators.length}set count(e){if(ln(e,1),this._oscillators.length!==e){this._forEach(n=>n.dispose()),this._oscillators=[];for(let n=0;n<e;n++){const s=new Ke({context:this.context,volume:-6-e*1.1,type:this._type,phase:this._phase+n/e*360,partialCount:this._partialCount,onstop:n===0?()=>this.onstop(this):Ae});this.type==="custom"&&(s.partials=this._partials),this.frequency.connect(s.frequency),this.detune.connect(s.detune),s.detune.overridden=!1,s.connect(this.output),this._oscillators[n]=s}this.spread=this._spread,this.state==="started"&&this._forEach(n=>n.start())}}get phase(){return this._phase}set phase(e){this._phase=e,this._forEach((n,s)=>n.phase=this._phase+s/this.count*360)}get baseType(){return this._oscillators[0].baseType}set baseType(e){this._forEach(n=>n.baseType=e),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this._type="custom",this._forEach(n=>n.partials=e))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(e){this._partialCount=e,this._forEach(n=>n.partialCount=e),this._type=this._oscillators[0].type}asArray(){return je(this,arguments,void 0,function*(e=1024){return Is(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach(e=>e.dispose()),this}}class Uo extends Ot{constructor(){const e=ie(Uo.getDefaults(),arguments,["frequency","modulationFrequency"]);super(e),this.name="PWMOscillator",this.sourceType="pwm",this._scale=new cr({context:this.context,value:2}),this._pulse=new pi({context:this.context,frequency:e.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new Ke({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),De(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(Ot.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(e){e=this.toSeconds(e),this._modulator.start(e),this._pulse.start(e)}_stop(e){e=this.toSeconds(e),this._modulator.stop(e),this._pulse.stop(e)}_restart(e){this._modulator.restart(e),this._pulse.restart(e)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(e){this._modulator.phase=e}asArray(){return je(this,arguments,void 0,function*(e=1024){return Is(this,e)})}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}const Gu={am:Bo,fat:Lo,fm:Vo,oscillator:Ke,pulse:pi,pwm:Uo};class to extends Ot{constructor(){const e=ie(to.getDefaults(),arguments,["frequency","type"]);super(e),this.name="OmniOscillator",this.frequency=new st({context:this.context,units:"frequency",value:e.frequency}),this.detune=new st({context:this.context,units:"cents",value:e.detune}),De(this,["frequency","detune"]),this.set(e)}static getDefaults(){return Object.assign(Ke.getDefaults(),Vo.getDefaults(),Bo.getDefaults(),Lo.getDefaults(),pi.getDefaults(),Uo.getDefaults())}_start(e){this._oscillator.start(e)}_stop(e){this._oscillator.stop(e)}_restart(e){return this._oscillator.restart(e),this}get type(){let e="";return["am","fm","fat"].some(n=>this._sourceType===n)&&(e=this._sourceType),e+this._oscillator.type}set type(e){e.substr(0,2)==="fm"?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,2)==="am"?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,3)==="fat"?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(3)):e==="pwm"?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):e==="pulse"?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=e)}get partials(){return this._oscillator.partials}set partials(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partials=e)}get partialCount(){return this._oscillator.partialCount}set partialCount(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partialCount=e)}set(e){return Reflect.has(e,"type")&&e.type&&(this.type=e.type),super.set(e),this}_createNewOscillator(e){if(e!==this._sourceType){this._sourceType=e;const n=Gu[e],s=this.now();if(this._oscillator){const r=this._oscillator;r.stop(s),this.context.setTimeout(()=>r.dispose(),this.blockTime)}this._oscillator=new n({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),this.state==="started"&&this._oscillator.start(s)}}get phase(){return this._oscillator.phase}set phase(e){this._oscillator.phase=e}get sourceType(){return this._sourceType}set sourceType(e){let n="sine";this._oscillator.type!=="pwm"&&this._oscillator.type!=="pulse"&&(n=this._oscillator.type),e==="fm"?this.type="fm"+n:e==="am"?this.type="am"+n:e==="fat"?this.type="fat"+n:e==="oscillator"?this.type=n:e==="pulse"?this.type="pulse":e==="pwm"&&(this.type="pwm")}_getOscType(e,n){return e instanceof Gu[n]}get baseType(){return this._oscillator.baseType}set baseType(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&e!=="pulse"&&e!=="pwm"&&(this._oscillator.baseType=e)}get width(){if(this._getOscType(this._oscillator,"pulse"))return this._oscillator.width}get count(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.count}set count(e){this._getOscType(this._oscillator,"fat")&&Un(e)&&(this._oscillator.count=e)}get spread(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.spread}set spread(e){this._getOscType(this._oscillator,"fat")&&Un(e)&&(this._oscillator.spread=e)}get modulationType(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.modulationType}set modulationType(e){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&jn(e)&&(this._oscillator.modulationType=e)}get modulationIndex(){if(this._getOscType(this._oscillator,"fm"))return this._oscillator.modulationIndex}get harmonicity(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.harmonicity}get modulationFrequency(){if(this._getOscType(this._oscillator,"pwm"))return this._oscillator.modulationFrequency}asArray(){return je(this,arguments,void 0,function*(e=1024){return Is(this,e)})}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}function fp(t,e=1/0){const n=new WeakMap;return function(s,r){Reflect.defineProperty(s,r,{configurable:!0,enumerable:!0,get:function(){return n.get(this)},set:function(i){ln(i,t,e),n.set(this,i)}})}}function Hn(t,e=1/0){const n=new WeakMap;return function(s,r){Reflect.defineProperty(s,r,{configurable:!0,enumerable:!0,get:function(){return n.get(this)},set:function(i){ln(this.toSeconds(i),t,e),n.set(this,i)}})}}class jo extends Ot{constructor(){const e=ie(jo.getDefaults(),arguments,["url","onload"]);super(e),this.name="Player",this._activeSources=new Set,this._buffer=new Ce({onload:this._onload.bind(this,e.onload),onerror:e.onerror,reverse:e.reverse,url:e.url}),this.autostart=e.autostart,this._loop=e.loop,this._loopStart=e.loopStart,this._loopEnd=e.loopEnd,this._playbackRate=e.playbackRate,this.fadeIn=e.fadeIn,this.fadeOut=e.fadeOut}static getDefaults(){return Object.assign(Ot.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:Ae,onerror:Ae,playbackRate:1,reverse:!1})}load(e){return je(this,void 0,void 0,function*(){return yield this._buffer.load(e),this._onload(),this})}_onload(e=Ae){e(),this.autostart&&this.start()}_onSourceEnd(e){this.onstop(this),this._activeSources.delete(e),this._activeSources.size===0&&!this._synced&&this._state.getValueAtTime(this.now())==="started"&&(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(e,n,s){return super.start(e,n,s),this}_start(e,n,s){this._loop?n=ws(n,this._loopStart):n=ws(n,0);const r=this.toSeconds(n),i=s;s=ws(s,Math.max(this._buffer.duration-r,0));let o=this.toSeconds(s);o=o/this._playbackRate,e=this.toSeconds(e);const a=new di({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);!this._loop&&!this._synced&&(this._state.cancel(e+o),this._state.setStateAtTime("stopped",e+o,{implicitEnd:!0})),this._activeSources.add(a),this._loop&&Yt(i)?a.start(e,r):a.start(e,r,o-this.toSeconds(this.fadeOut))}_stop(e){const n=this.toSeconds(e);this._activeSources.forEach(s=>s.stop(n))}restart(e,n,s){return super.restart(e,n,s),this}_restart(e,n,s){var r;(r=[...this._activeSources].pop())===null||r===void 0||r.stop(e),this._start(e,n,s)}seek(e,n){const s=this.toSeconds(n);if(this._state.getValueAtTime(s)==="started"){const r=this.toSeconds(e);this._stop(s),this._start(s,r)}return this}setLoopPoints(e,n){return this.loopStart=e,this.loopEnd=n,this}get loopStart(){return this._loopStart}set loopStart(e){this._loopStart=e,this.buffer.loaded&&ln(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(n=>{n.loopStart=e})}get loopEnd(){return this._loopEnd}set loopEnd(e){this._loopEnd=e,this.buffer.loaded&&ln(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(n=>{n.loopEnd=e})}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._loop}set loop(e){if(this._loop!==e&&(this._loop=e,this._activeSources.forEach(n=>{n.loop=e}),e)){const n=this._state.getNextState("stopped",this.now());n&&this._state.cancel(n.time)}}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e;const n=this.now(),s=this._state.getNextState("stopped",n);s&&s.implicitEnd&&(this._state.cancel(s.time),this._activeSources.forEach(r=>r.cancelStop())),this._activeSources.forEach(r=>{r.playbackRate.setValueAtTime(e,n)})}get reverse(){return this._buffer.reverse}set reverse(e){this._buffer.reverse=e}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach(e=>e.dispose()),this._activeSources.clear(),this._buffer.dispose(),this}}fn([Hn(0)],jo.prototype,"fadeIn",void 0);fn([Hn(0)],jo.prototype,"fadeOut",void 0);class Ow extends Ms{constructor(){super(...arguments),this.name="GainToAudio",this._norm=new yr({context:this.context,mapping:e=>Math.abs(e)*2-1}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class ls extends re{constructor(){const e=ie(ls.getDefaults(),arguments,["attack","decay","sustain","release"]);super(e),this.name="Envelope",this._sig=new st({context:this.context,value:0}),this.output=this._sig,this.input=void 0,this.attack=e.attack,this.decay=e.decay,this.sustain=e.sustain,this.release=e.release,this.attackCurve=e.attackCurve,this.releaseCurve=e.releaseCurve,this.decayCurve=e.decayCurve}static getDefaults(){return Object.assign(re.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(e,n){if(jn(e))return e;{let s;for(s in Ti)if(Ti[s][n]===e)return s;return e}}_setCurve(e,n,s){if(jn(s)&&Reflect.has(Ti,s)){const r=Ti[s];vs(r)?e!=="_decayCurve"&&(this[e]=r[n]):this[e]=r}else if(an(s)&&e!=="_decayCurve")this[e]=s;else throw new Error("Envelope: invalid curve: "+s)}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(e){this._setCurve("_attackCurve","In",e)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(e){this._setCurve("_releaseCurve","Out",e)}get decayCurve(){return this._getCurve(this._decayCurve,"Out")}set decayCurve(e){this._setCurve("_decayCurve","Out",e)}triggerAttack(e,n=1){this.log("triggerAttack",e,n),e=this.toSeconds(e);let r=this.toSeconds(this.attack);const i=this.toSeconds(this.decay),o=this.getValueAtTime(e);if(o>0){const a=1/r;r=(1-o)/a}if(r<this.sampleTime)this._sig.cancelScheduledValues(e),this._sig.setValueAtTime(n,e);else if(this._attackCurve==="linear")this._sig.linearRampTo(n,r,e);else if(this._attackCurve==="exponential")this._sig.targetRampTo(n,r,e);else{this._sig.cancelAndHoldAtTime(e);let a=this._attackCurve;for(let c=1;c<a.length;c++)if(a[c-1]<=o&&o<=a[c]){a=this._attackCurve.slice(c),a[0]=o;break}this._sig.setValueCurveAtTime(a,e,r,n)}if(i&&this.sustain<1){const a=n*this.sustain,c=e+r;this.log("decay",c),this._decayCurve==="linear"?this._sig.linearRampToValueAtTime(a,i+c):this._sig.exponentialApproachValueAtTime(a,c,i)}return this}triggerRelease(e){this.log("triggerRelease",e),e=this.toSeconds(e);const n=this.getValueAtTime(e);if(n>0){const s=this.toSeconds(this.release);s<this.sampleTime?this._sig.setValueAtTime(0,e):this._releaseCurve==="linear"?this._sig.linearRampTo(0,s,e):this._releaseCurve==="exponential"?this._sig.targetRampTo(0,s,e):(le(an(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(e),this._sig.setValueCurveAtTime(this._releaseCurve,e,s,n))}return this}getValueAtTime(e){return this._sig.getValueAtTime(e)}triggerAttackRelease(e,n,s=1){return n=this.toSeconds(n),this.triggerAttack(n,s),this.triggerRelease(n+this.toSeconds(e)),this}cancel(e){return this._sig.cancelScheduledValues(this.toSeconds(e)),this}connect(e,n=0,s=0){return ol(this,e,n,s),this}asArray(){return je(this,arguments,void 0,function*(e=1024){const n=e/this.context.sampleRate,s=new Po(1,n,this.context.sampleRate),r=this.toSeconds(this.attack)+this.toSeconds(this.decay),i=r+this.toSeconds(this.release),o=i*.1,a=i+o,c=new this.constructor(Object.assign(this.get(),{attack:n*this.toSeconds(this.attack)/a,decay:n*this.toSeconds(this.decay)/a,release:n*this.toSeconds(this.release)/a,context:s}));return c._sig.toDestination(),c.triggerAttackRelease(n*(r+o)/a,0),(yield s.render()).getChannelData(0)})}dispose(){return super.dispose(),this._sig.dispose(),this}}fn([Hn(0)],ls.prototype,"attack",void 0);fn([Hn(0)],ls.prototype,"decay",void 0);fn([fp(0,1)],ls.prototype,"sustain",void 0);fn([Hn(0)],ls.prototype,"release",void 0);const Ti=(()=>{let e,n;const s=[];for(e=0;e<128;e++)s[e]=Math.sin(e/127*(Math.PI/2));const r=[],i=6.4;for(e=0;e<127;e++){n=e/127;const f=Math.sin(n*(Math.PI*2)*i-Math.PI/2)+1;r[e]=f/10+n*.83}r[127]=1;const o=[],a=5;for(e=0;e<128;e++)o[e]=Math.ceil(e/127*a)/a;const c=[];for(e=0;e<128;e++)n=e/127,c[e]=.5*(1-Math.cos(Math.PI*n));const l=[];for(e=0;e<128;e++){n=e/127;const f=Math.pow(n,3)*4+.2,d=Math.cos(f*Math.PI*2*n);l[e]=Math.abs(d*(1-n))}function u(f){const d=new Array(f.length);for(let p=0;p<f.length;p++)d[p]=1-f[p];return d}function h(f){return f.slice(0).reverse()}return{bounce:{In:u(l),Out:l},cosine:{In:s,Out:h(s)},exponential:"exponential",linear:"linear",ripple:{In:r,Out:u(r)},sine:{In:c,Out:u(c)},step:{In:o,Out:u(o)}}})();class lr extends re{constructor(){const e=ie(lr.getDefaults(),arguments);super(e),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease,this._syncedRelease=n=>this._original_triggerRelease(n),this._volume=this.output=new xs({context:this.context,volume:e.volume}),this.volume=this._volume.volume,De(this,"volume")}static getDefaults(){return Object.assign(re.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}_syncState(){let e=!1;return this._synced||(this._synced=!0,e=!0),e}_syncMethod(e,n){const s=this["_original_"+e]=this[e];this[e]=(...r)=>{const i=r[n],o=this.context.transport.schedule(a=>{r[n]=a,s.apply(this,r)},i);this._scheduledEvents.push(o)}}unsync(){return this._scheduledEvents.forEach(e=>this.context.transport.clear(e)),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease,this.context.transport.off("stop",this._syncedRelease),this.context.transport.off("pause",this._syncedRelease),this.context.transport.off("loopEnd",this._syncedRelease)),this}triggerAttackRelease(e,n,s,r){const i=this.toSeconds(s),o=this.toSeconds(n);return this.triggerAttack(e,i,r),this.triggerRelease(i+o),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}}class ur extends lr{constructor(){const e=ie(ur.getDefaults(),arguments);super(e),this.portamento=e.portamento,this.onsilence=e.onsilence}static getDefaults(){return Object.assign(lr.getDefaults(),{detune:0,onsilence:Ae,portamento:0})}triggerAttack(e,n,s=1){this.log("triggerAttack",e,n,s);const r=this.toSeconds(n);return this._triggerEnvelopeAttack(r,s),this.setNote(e,r),this}triggerRelease(e){this.log("triggerRelease",e);const n=this.toSeconds(e);return this._triggerEnvelopeRelease(n),this}setNote(e,n){const s=this.toSeconds(n),r=e instanceof $t?e.toFrequency():e;if(this.portamento>0&&this.getLevelAtTime(s)>.05){const i=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(r,i,s)}else this.frequency.setValueAtTime(r,s);return this}}fn([Hn(0)],ur.prototype,"portamento",void 0);class ml extends ls{constructor(){super(ie(ml.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new Ve({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}}class no extends ur{constructor(){const e=ie(no.getDefaults(),arguments);super(e),this.name="Synth",this.oscillator=new to(Object.assign({context:this.context,detune:e.detune,onstop:()=>this.onsilence(this)},e.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new ml(Object.assign({context:this.context},e.envelope)),this.oscillator.chain(this.envelope,this.output),De(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(ur.getDefaults(),{envelope:Object.assign(qu(ls.getDefaults(),Object.keys(re.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(qu(to.getDefaults(),[...Object.keys(Ot.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(e,n){if(this.envelope.triggerAttack(e,n),this.oscillator.start(e),this.envelope.sustain===0){const s=this.toSeconds(this.envelope.attack),r=this.toSeconds(this.envelope.decay);this.oscillator.stop(e+s+r)}}_triggerEnvelopeRelease(e){this.envelope.triggerRelease(e),this.oscillator.stop(e+this.toSeconds(this.envelope.release))}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}}class qo extends no{constructor(){const e=ie(qo.getDefaults(),arguments);super(e),this.name="MembraneSynth",this.portamento=0,this.pitchDecay=e.pitchDecay,this.octaves=e.octaves,De(this,["oscillator","envelope"])}static getDefaults(){return Zs(ur.getDefaults(),no.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(e,n){const s=this.toSeconds(n),r=this.toFrequency(e instanceof $t?e.toFrequency():e),i=r*this.octaves;return this.oscillator.frequency.setValueAtTime(i,s),this.oscillator.frequency.exponentialRampToValueAtTime(r,s+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}}fn([fp(0)],qo.prototype,"octaves",void 0);fn([Hn(0)],qo.prototype,"pitchDecay",void 0);const dp=new Set;function gl(t){dp.add(t)}function pp(t,e){const n=`registerProcessor("${t}", ${e})`;dp.add(n)}const Rw=`
	/**
	 * The base AudioWorkletProcessor for use in Tone.js. Works with the {@link ToneAudioWorklet}. 
	 */
	class ToneAudioWorkletProcessor extends AudioWorkletProcessor {

		constructor(options) {
			
			super(options);
			/**
			 * If the processor was disposed or not. Keep alive until it's disposed.
			 */
			this.disposed = false;
		   	/** 
			 * The number of samples in the processing block
			 */
			this.blockSize = 128;
			/**
			 * the sample rate
			 */
			this.sampleRate = sampleRate;

			this.port.onmessage = (event) => {
				// when it receives a dispose 
				if (event.data === "dispose") {
					this.disposed = true;
				}
			};
		}
	}
`;gl(Rw);const Dw=`
	/**
	 * Abstract class for a single input/output processor. 
	 * has a 'generate' function which processes one sample at a time
	 */
	class SingleIOProcessor extends ToneAudioWorkletProcessor {

		constructor(options) {
			super(Object.assign(options, {
				numberOfInputs: 1,
				numberOfOutputs: 1
			}));
			/**
			 * Holds the name of the parameter and a single value of that
			 * parameter at the current sample
			 * @type { [name: string]: number }
			 */
			this.params = {}
		}

		/**
		 * Generate an output sample from the input sample and parameters
		 * @abstract
		 * @param input number
		 * @param channel number
		 * @param parameters { [name: string]: number }
		 * @returns number
		 */
		generate(){}

		/**
		 * Update the private params object with the 
		 * values of the parameters at the given index
		 * @param parameters { [name: string]: Float32Array },
		 * @param index number
		 */
		updateParams(parameters, index) {
			for (const paramName in parameters) {
				const param = parameters[paramName];
				if (param.length > 1) {
					this.params[paramName] = parameters[paramName][index];
				} else {
					this.params[paramName] = parameters[paramName][0];
				}
			}
		}

		/**
		 * Process a single frame of the audio
		 * @param inputs Float32Array[][]
		 * @param outputs Float32Array[][]
		 */
		process(inputs, outputs, parameters) {
			const input = inputs[0];
			const output = outputs[0];
			// get the parameter values
			const channelCount = Math.max(input && input.length || 0, output.length);
			for (let sample = 0; sample < this.blockSize; sample++) {
				this.updateParams(parameters, sample);
				for (let channel = 0; channel < channelCount; channel++) {
					const inputSample = input && input.length ? input[channel][sample] : 0;
					output[channel][sample] = this.generate(inputSample, channel, this.params);
				}
			}
			return !this.disposed;
		}
	};
`;gl(Dw);const Fw=`
	/**
	 * A multichannel buffer for use within an AudioWorkletProcessor as a delay line
	 */
	class DelayLine {
		
		constructor(size, channels) {
			this.buffer = [];
			this.writeHead = []
			this.size = size;

			// create the empty channels
			for (let i = 0; i < channels; i++) {
				this.buffer[i] = new Float32Array(this.size);
				this.writeHead[i] = 0;
			}
		}

		/**
		 * Push a value onto the end
		 * @param channel number
		 * @param value number
		 */
		push(channel, value) {
			this.writeHead[channel] += 1;
			if (this.writeHead[channel] > this.size) {
				this.writeHead[channel] = 0;
			}
			this.buffer[channel][this.writeHead[channel]] = value;
		}

		/**
		 * Get the recorded value of the channel given the delay
		 * @param channel number
		 * @param delay number delay samples
		 */
		get(channel, delay) {
			let readHead = this.writeHead[channel] - Math.floor(delay);
			if (readHead < 0) {
				readHead += this.size;
			}
			return this.buffer[channel][readHead];
		}
	}
`;gl(Fw);const Bw="feedback-comb-filter",Vw=`
	class FeedbackCombFilterWorklet extends SingleIOProcessor {

		constructor(options) {
			super(options);
			this.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);
		}

		static get parameterDescriptors() {
			return [{
				name: "delayTime",
				defaultValue: 0.1,
				minValue: 0,
				maxValue: 1,
				automationRate: "k-rate"
			}, {
				name: "feedback",
				defaultValue: 0.5,
				minValue: 0,
				maxValue: 0.9999,
				automationRate: "k-rate"
			}];
		}

		generate(input, channel, parameters) {
			const delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);
			this.delayLine.push(channel, input + delayedSample * parameters.feedback);
			return delayedSample;
		}
	}
`;pp(Bw,Vw);class mi extends lr{constructor(){const e=ie(mi.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");super(e),this.name="Sampler",this._activeSources=new Map;const n={};Object.keys(e.urls).forEach(s=>{const r=parseInt(s,10);if(le(Ai(s)||Un(r)&&isFinite(r),`url key is neither a note or midi pitch: ${s}`),Ai(s)){const i=new $t(this.context,s).toMidi();n[i]=e.urls[s]}else Un(r)&&isFinite(r)&&(n[r]=e.urls[r])}),this._buffers=new hl({urls:n,onload:e.onload,baseUrl:e.baseUrl,onerror:e.onerror}),this.attack=e.attack,this.release=e.release,this.curve=e.curve,this._buffers.loaded&&Promise.resolve().then(e.onload)}static getDefaults(){return Object.assign(lr.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:Ae,onerror:Ae,release:.1,urls:{}})}_findClosest(e){let s=0;for(;s<96;){if(this._buffers.has(e+s))return-s;if(this._buffers.has(e-s))return s;s++}throw new Error(`No available buffers for note: ${e}`)}triggerAttack(e,n,s=1){return this.log("triggerAttack",e,n,s),Array.isArray(e)||(e=[e]),e.forEach(r=>{const i=hp(new $t(this.context,r).toFrequency()),o=Math.round(i),a=i-o,c=this._findClosest(o),l=o-c,u=this._buffers.get(l),h=up(c+a),f=new di({url:u,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:h}).connect(this.output);f.start(n,0,u.duration/h,s),an(this._activeSources.get(o))||this._activeSources.set(o,[]),this._activeSources.get(o).push(f),f.onended=()=>{if(this._activeSources&&this._activeSources.has(o)){const d=this._activeSources.get(o),p=d.indexOf(f);p!==-1&&d.splice(p,1)}}}),this}triggerRelease(e,n){return this.log("triggerRelease",e,n),Array.isArray(e)||(e=[e]),e.forEach(s=>{const r=new $t(this.context,s).toMidi();if(this._activeSources.has(r)&&this._activeSources.get(r).length){const i=this._activeSources.get(r);n=this.toSeconds(n),i.forEach(o=>{o.stop(n)}),this._activeSources.set(r,[])}}),this}releaseAll(e){const n=this.toSeconds(e);return this._activeSources.forEach(s=>{for(;s.length;)s.shift().stop(n)}),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(e,n,s,r=1){const i=this.toSeconds(s);return this.triggerAttack(e,i,r),an(n)?(le(an(e),"notes must be an array when duration is array"),e.forEach((o,a)=>{const c=n[Math.min(a,n.length-1)];this.triggerRelease(o,i+this.toSeconds(c))})):this.triggerRelease(e,i+this.toSeconds(n)),this}add(e,n,s){if(le(Ai(e)||isFinite(e),`note must be a pitch or midi: ${e}`),Ai(e)){const r=new $t(this.context,e).toMidi();this._buffers.add(r,n,s)}else this._buffers.add(e,n,s);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach(e=>{e.forEach(n=>n.dispose())}),this._activeSources.clear(),this}}fn([Hn(0)],mi.prototype,"attack",void 0);fn([Hn(0)],mi.prototype,"release",void 0);class _l extends ct{constructor(){const e=ie(_l.getDefaults(),arguments,["callback","value"]);super(e),this.name="ToneEvent",this._state=new Ro("stopped"),this._startOffset=0,this._loop=e.loop,this.callback=e.callback,this.value=e.value,this._loopStart=this.toTicks(e.loopStart),this._loopEnd=this.toTicks(e.loopEnd),this._playbackRate=e.playbackRate,this._probability=e.probability,this._humanize=e.humanize,this.mute=e.mute,this._playbackRate=e.playbackRate,this._state.increasing=!0,this._rescheduleEvents()}static getDefaults(){return Object.assign(ct.getDefaults(),{callback:Ae,humanize:!1,loop:!1,loopEnd:"1m",loopStart:0,mute:!1,playbackRate:1,probability:1,value:null})}_rescheduleEvents(e=-1){this._state.forEachFrom(e,n=>{let s;if(n.state==="started"){n.id!==-1&&this.context.transport.clear(n.id);const r=n.time+Math.round(this.startOffset/this._playbackRate);if(this._loop===!0||Un(this._loop)&&this._loop>1){s=1/0,Un(this._loop)&&(s=this._loop*this._getLoopDuration());const i=this._state.getAfter(r);i!==null&&(s=Math.min(s,i.time-r)),s!==1/0&&(s=new Gt(this.context,s));const o=new Gt(this.context,this._getLoopDuration());n.id=this.context.transport.scheduleRepeat(this._tick.bind(this),o,new Gt(this.context,r),s)}else n.id=this.context.transport.schedule(this._tick.bind(this),new Gt(this.context,r))}})}get state(){return this._state.getValueAtTime(this.context.transport.ticks)}get startOffset(){return this._startOffset}set startOffset(e){this._startOffset=e}get probability(){return this._probability}set probability(e){this._probability=e}get humanize(){return this._humanize}set humanize(e){this._humanize=e}start(e){const n=this.toTicks(e);return this._state.getValueAtTime(n)==="stopped"&&(this._state.add({id:-1,state:"started",time:n}),this._rescheduleEvents(n)),this}stop(e){this.cancel(e);const n=this.toTicks(e);if(this._state.getValueAtTime(n)==="started"){this._state.setStateAtTime("stopped",n,{id:-1});const s=this._state.getBefore(n);let r=n;s!==null&&(r=s.time),this._rescheduleEvents(r)}return this}cancel(e){e=ws(e,-1/0);const n=this.toTicks(e);return this._state.forEachFrom(n,s=>{this.context.transport.clear(s.id)}),this._state.cancel(n),this}_tick(e){const n=this.context.transport.getTicksAtTime(e);if(!this.mute&&this._state.getValueAtTime(n)==="started"){if(this.probability<1&&Math.random()>this.probability)return;if(this.humanize){let s=.02;ep(this.humanize)||(s=this.toSeconds(this.humanize)),e+=(Math.random()*2-1)*s}this.callback(e,this.value)}}_getLoopDuration(){return(this._loopEnd-this._loopStart)/this._playbackRate}get loop(){return this._loop}set loop(e){this._loop=e,this._rescheduleEvents()}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e,this._rescheduleEvents()}get loopEnd(){return new Gt(this.context,this._loopEnd).toSeconds()}set loopEnd(e){this._loopEnd=this.toTicks(e),this._loop&&this._rescheduleEvents()}get loopStart(){return new Gt(this.context,this._loopStart).toSeconds()}set loopStart(e){this._loopStart=this.toTicks(e),this._loop&&this._rescheduleEvents()}get progress(){if(this._loop){const e=this.context.transport.ticks,n=this._state.get(e);if(n!==null&&n.state==="started"){const s=this._getLoopDuration();return(e-n.time)%s/s}else return 0}else return 0}dispose(){return super.dispose(),this.cancel(),this._state.dispose(),this}}class so extends ct{constructor(){const e=ie(so.getDefaults(),arguments,["callback","interval"]);super(e),this.name="Loop",this._event=new _l({context:this.context,callback:this._tick.bind(this),loop:!0,loopEnd:e.interval,playbackRate:e.playbackRate,probability:e.probability,humanize:e.humanize}),this.callback=e.callback,this.iterations=e.iterations}static getDefaults(){return Object.assign(ct.getDefaults(),{interval:"4n",callback:Ae,playbackRate:1,iterations:1/0,probability:1,mute:!1,humanize:!1})}start(e){return this._event.start(e),this}stop(e){return this._event.stop(e),this}cancel(e){return this._event.cancel(e),this}_tick(e){this.callback(e)}get state(){return this._event.state}get progress(){return this._event.progress}get interval(){return this._event.loopEnd}set interval(e){this._event.loopEnd=e}get playbackRate(){return this._event.playbackRate}set playbackRate(e){this._event.playbackRate=e}get humanize(){return this._event.humanize}set humanize(e){this._event.humanize=e}get probability(){return this._event.probability}set probability(e){this._event.probability=e}get mute(){return this._event.mute}set mute(e){this._event.mute=e}get iterations(){return this._event.loop===!0?1/0:this._event.loop}set iterations(e){e===1/0?this._event.loop=!0:this._event.loop=e}dispose(){return super.dispose(),this._event.dispose(),this}}class yl extends re{constructor(){const e=ie(yl.getDefaults(),arguments,["fade"]);super(e),this.name="CrossFade",this._panner=this.context.createStereoPanner(),this._split=this.context.createChannelSplitter(2),this._g2a=new Ow({context:this.context}),this.a=new Ve({context:this.context,gain:0}),this.b=new Ve({context:this.context,gain:0}),this.output=new Ve({context:this.context}),this._internalChannels=[this.a,this.b],this.fade=new st({context:this.context,units:"normalRange",value:e.fade}),De(this,"fade"),this.context.getConstant(1).connect(this._panner),this._panner.connect(this._split),this._panner.channelCount=1,this._panner.channelCountMode="explicit",ss(this._split,this.a.gain,0),ss(this._split,this.b.gain,1),this.fade.chain(this._g2a,this._panner.pan),this.a.connect(this.output),this.b.connect(this.output)}static getDefaults(){return Object.assign(re.getDefaults(),{fade:.5})}dispose(){return super.dispose(),this.a.dispose(),this.b.dispose(),this.output.dispose(),this.fade.dispose(),this._g2a.dispose(),this._panner.disconnect(),this._split.disconnect(),this}}class Hu extends re{constructor(e){super(e),this.name="Effect",this._dryWet=new yl({context:this.context}),this.wet=this._dryWet.fade,this.effectSend=new Ve({context:this.context}),this.effectReturn=new Ve({context:this.context}),this.input=new Ve({context:this.context}),this.output=this._dryWet,this.input.fan(this._dryWet.a,this.effectSend),this.effectReturn.connect(this._dryWet.b),this.wet.setValueAtTime(e.wet,0),this._internalChannels=[this.effectReturn,this.effectSend],De(this,"wet")}static getDefaults(){return Object.assign(re.getDefaults(),{wet:1})}connectEffect(e){return this._internalChannels.push(e),this.effectSend.chain(e,this.effectReturn),this}dispose(){return super.dispose(),this._dryWet.dispose(),this.effectSend.dispose(),this.effectReturn.dispose(),this.wet.dispose(),this}}class bl extends re{constructor(){const e=ie(bl.getDefaults(),arguments,["pan"]);super(e),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner,this.pan=new xe({context:this.context,param:this._panner.pan,value:e.pan,minValue:-1,maxValue:1}),this._panner.channelCount=e.channelCount,this._panner.channelCountMode="explicit",De(this,"pan")}static getDefaults(){return Object.assign(re.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}}const Lw="bit-crusher",Uw=`
	class BitCrusherWorklet extends SingleIOProcessor {

		static get parameterDescriptors() {
			return [{
				name: "bits",
				defaultValue: 12,
				minValue: 1,
				maxValue: 16,
				automationRate: 'k-rate'
			}];
		}

		generate(input, _channel, parameters) {
			const step = Math.pow(0.5, parameters.bits - 1);
			const val = step * Math.floor(input / step + 0.5);
			return val;
		}
	}
`;pp(Lw,Uw);class vl extends re{constructor(){const e=ie(vl.getDefaults(),arguments,["channels"]);super(e),this.name="Split",this._splitter=this.input=this.output=this.context.createChannelSplitter(e.channels),this._internalChannels=[this._splitter]}static getDefaults(){return Object.assign(re.getDefaults(),{channels:2})}dispose(){return super.dispose(),this._splitter.disconnect(),this}}class wl extends re{constructor(){const e=ie(wl.getDefaults(),arguments,["channels"]);super(e),this.name="Merge",this._merger=this.output=this.input=this.context.createChannelMerger(e.channels)}static getDefaults(){return Object.assign(re.getDefaults(),{channels:2})}dispose(){return super.dispose(),this._merger.disconnect(),this}}class Al extends Hu{constructor(){const e=ie(Al.getDefaults(),arguments,["decay"]);super(e),this.name="Reverb",this._convolver=this.context.createConvolver(),this.ready=Promise.resolve(),this._decay=e.decay,this._preDelay=e.preDelay,this.generate(),this.connectEffect(this._convolver)}static getDefaults(){return Object.assign(Hu.getDefaults(),{decay:1.5,preDelay:.01})}get decay(){return this._decay}set decay(e){e=this.toSeconds(e),ln(e,.001),this._decay=e,this.generate()}get preDelay(){return this._preDelay}set preDelay(e){e=this.toSeconds(e),ln(e,0),this._preDelay=e,this.generate()}generate(){return je(this,void 0,void 0,function*(){const e=this.ready,n=new Po(2,this._decay+this._preDelay,this.context.sampleRate),s=new eo({context:n}),r=new eo({context:n}),i=new wl({context:n});s.connect(i,0,0),r.connect(i,0,1);const o=new Ve({context:n}).toDestination();i.connect(o),s.start(0),r.start(0),o.gain.setValueAtTime(0,0),o.gain.setValueAtTime(1,this._preDelay),o.gain.exponentialApproachValueAtTime(0,this._preDelay,this.decay);const a=n.render();return this.ready=a.then(Ae),yield e,this._convolver.buffer=(yield a).get(),this})}dispose(){return super.dispose(),this._convolver.disconnect(),this}}class $o extends re{constructor(){const e=ie($o.getDefaults(),arguments,["type","size"]);super(e),this.name="Analyser",this._analysers=[],this._buffers=[],this.input=this.output=this._gain=new Ve({context:this.context}),this._split=new vl({context:this.context,channels:e.channels}),this.input.connect(this._split),ln(e.channels,1);for(let n=0;n<e.channels;n++)this._analysers[n]=this.context.createAnalyser(),this._split.connect(this._analysers[n],n,0);this.size=e.size,this.type=e.type,this.smoothing=e.smoothing}static getDefaults(){return Object.assign(re.getDefaults(),{size:1024,smoothing:.8,type:"fft",channels:1})}getValue(){return this._analysers.forEach((e,n)=>{const s=this._buffers[n];this._type==="fft"?e.getFloatFrequencyData(s):this._type==="waveform"&&e.getFloatTimeDomainData(s)}),this.channels===1?this._buffers[0]:this._buffers}get size(){return this._analysers[0].frequencyBinCount}set size(e){this._analysers.forEach((n,s)=>{n.fftSize=e*2,this._buffers[s]=new Float32Array(e)})}get channels(){return this._analysers.length}get type(){return this._type}set type(e){le(e==="waveform"||e==="fft",`Analyser: invalid type: ${e}`),this._type=e}get smoothing(){return this._analysers[0].smoothingTimeConstant}set smoothing(e){this._analysers.forEach(n=>n.smoothingTimeConstant=e)}dispose(){return super.dispose(),this._analysers.forEach(e=>e.disconnect()),this._split.dispose(),this._gain.dispose(),this}}class ro extends re{constructor(){super(ie(ro.getDefaults(),arguments)),this.name="MeterBase",this.input=this.output=this._analyser=new $o({context:this.context,size:256,type:"waveform"})}dispose(){return super.dispose(),this._analyser.dispose(),this}}class Tl extends ro{constructor(){const e=ie(Tl.getDefaults(),arguments,["smoothing"]);super(e),this.name="Meter",this.input=this.output=this._analyser=new $o({context:this.context,size:256,type:"waveform",channels:e.channelCount}),this.smoothing=e.smoothing,this.normalRange=e.normalRange,this._rms=new Array(e.channelCount),this._rms.fill(0)}static getDefaults(){return Object.assign(ro.getDefaults(),{smoothing:.8,normalRange:!1,channelCount:1})}getLevel(){return Co("'getLevel' has been changed to 'getValue'"),this.getValue()}getValue(){const e=this._analyser.getValue(),s=(this.channels===1?[e]:e).map((r,i)=>{const o=r.reduce((c,l)=>c+l*l,0),a=Math.sqrt(o/r.length);return this._rms[i]=Math.max(a,this._rms[i]*this.smoothing),this.normalRange?this._rms[i]:ko(this._rms[i])});return this.channels===1?s[0]:s}get channels(){return this._analyser.channels}dispose(){return super.dispose(),this._analyser.dispose(),this}}class Ye extends re{constructor(){const e=ie(Ye.getDefaults(),arguments,["solo"]);super(e),this.name="Solo",this.input=this.output=new Ve({context:this.context}),Ye._allSolos.has(this.context)||Ye._allSolos.set(this.context,new Set),Ye._allSolos.get(this.context).add(this),this.solo=e.solo}static getDefaults(){return Object.assign(re.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(e){e?this._addSolo():this._removeSolo(),Ye._allSolos.get(this.context).forEach(n=>n._updateSolo())}get muted(){return this.input.gain.value===0}_addSolo(){Ye._soloed.has(this.context)||Ye._soloed.set(this.context,new Set),Ye._soloed.get(this.context).add(this)}_removeSolo(){Ye._soloed.has(this.context)&&Ye._soloed.get(this.context).delete(this)}_isSoloed(){return Ye._soloed.has(this.context)&&Ye._soloed.get(this.context).has(this)}_noSolos(){return!Ye._soloed.has(this.context)||Ye._soloed.has(this.context)&&Ye._soloed.get(this.context).size===0}_updateSolo(){this._isSoloed()?this.input.gain.value=1:this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}dispose(){return super.dispose(),Ye._allSolos.get(this.context).delete(this),this._removeSolo(),this}}Ye._allSolos=new Map;Ye._soloed=new Map;class Ml extends re{constructor(){const e=ie(Ml.getDefaults(),arguments,["pan","volume"]);super(e),this.name="PanVol",this._panner=this.input=new bl({context:this.context,pan:e.pan,channelCount:e.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new xs({context:this.context,volume:e.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=e.mute,De(this,["pan","volume"])}static getDefaults(){return Object.assign(re.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}class qs extends re{constructor(){const e=ie(qs.getDefaults(),arguments,["volume","pan"]);super(e),this.name="Channel",this._solo=this.input=new Ye({solo:e.solo,context:this.context}),this._panVol=this.output=new Ml({context:this.context,pan:e.pan,volume:e.volume,mute:e.mute,channelCount:e.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),De(this,["pan","volume"])}static getDefaults(){return Object.assign(re.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(e){this._solo.solo=e}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(e){this._panVol.mute=e}_getBus(e){return qs.buses.has(e)||qs.buses.set(e,new Ve({context:this.context})),qs.buses.get(e)}send(e,n=0){const s=this._getBus(e),r=new Ve({context:this.context,units:"decibels",gain:n});return this.connect(r),r.connect(s),r}receive(e){return this._getBus(e).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}qs.buses=new Map;class io extends re{constructor(){const e=ie(io.getDefaults(),arguments);super(e),this.name="Recorder",this.input=new Ve({context:this.context}),le(io.supported,"Media Recorder API is not available"),this._stream=this.context.createMediaStreamDestination(),this.input.connect(this._stream),this._recorder=new MediaRecorder(this._stream.stream,{mimeType:e.mimeType})}static getDefaults(){return re.getDefaults()}get mimeType(){return this._recorder.mimeType}static get supported(){return Pt!==null&&Reflect.has(Pt,"MediaRecorder")}get state(){return this._recorder.state==="inactive"?"stopped":this._recorder.state==="paused"?"paused":"started"}start(){return je(this,void 0,void 0,function*(){le(this.state!=="started","Recorder is already started");const e=new Promise(n=>{const s=()=>{this._recorder.removeEventListener("start",s,!1),n()};this._recorder.addEventListener("start",s,!1)});return this._recorder.start(),yield e})}stop(){return je(this,void 0,void 0,function*(){le(this.state!=="stopped","Recorder is not started");const e=new Promise(n=>{const s=r=>{this._recorder.removeEventListener("dataavailable",s,!1),n(r.data)};this._recorder.addEventListener("dataavailable",s,!1)});return this._recorder.stop(),yield e})}pause(){return le(this.state==="started","Recorder must be started"),this._recorder.pause(),this}dispose(){return super.dispose(),this.input.dispose(),this._stream.disconnect(),this}}class Sl extends re{constructor(){const e=ie(Sl.getDefaults(),arguments,["threshold","ratio"]);super(e),this.name="Compressor",this._compressor=this.context.createDynamicsCompressor(),this.input=this._compressor,this.output=this._compressor,this.threshold=new xe({minValue:this._compressor.threshold.minValue,maxValue:this._compressor.threshold.maxValue,context:this.context,convert:!1,param:this._compressor.threshold,units:"decibels",value:e.threshold}),this.attack=new xe({minValue:this._compressor.attack.minValue,maxValue:this._compressor.attack.maxValue,context:this.context,param:this._compressor.attack,units:"time",value:e.attack}),this.release=new xe({minValue:this._compressor.release.minValue,maxValue:this._compressor.release.maxValue,context:this.context,param:this._compressor.release,units:"time",value:e.release}),this.knee=new xe({minValue:this._compressor.knee.minValue,maxValue:this._compressor.knee.maxValue,context:this.context,convert:!1,param:this._compressor.knee,units:"decibels",value:e.knee}),this.ratio=new xe({minValue:this._compressor.ratio.minValue,maxValue:this._compressor.ratio.maxValue,context:this.context,convert:!1,param:this._compressor.ratio,units:"positive",value:e.ratio}),De(this,["knee","release","attack","ratio","threshold"])}static getDefaults(){return Object.assign(re.getDefaults(),{attack:.003,knee:30,ratio:12,release:.25,threshold:-24})}get reduction(){return this._compressor.reduction}dispose(){return super.dispose(),this._compressor.disconnect(),this.attack.dispose(),this.release.dispose(),this.threshold.dispose(),this.ratio.dispose(),this.knee.dispose(),this}}class Wo extends re{constructor(){const e=ie(Wo.getDefaults(),arguments,["threshold"]);super(e),this.name="Limiter",this._compressor=this.input=this.output=new Sl({context:this.context,ratio:20,attack:.003,release:.01,threshold:e.threshold}),this.threshold=this._compressor.threshold,De(this,"threshold")}static getDefaults(){return Object.assign(re.getDefaults(),{threshold:-12})}get reduction(){return this._compressor.reduction}dispose(){return super.dispose(),this._compressor.dispose(),this.threshold.dispose(),this}}Tt().transport;function jw(){return Tt().transport}Tt().destination;Tt().destination;function qw(){return Tt().destination}Tt().listener;Tt().draw;function $w(){return Tt().draw}Tt();function hr(t){return lf()?(zm(t),!0):!1}function Ue(t){return typeof t=="function"?t():Ne(t)}const oc=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const Ww=Object.prototype.toString,Gw=t=>Ww.call(t)==="[object Object]",ac=()=>+Date.now(),da=(t,e,n)=>Math.min(n,Math.max(e,t)),Hw=()=>{};function zw(t,e){function n(...s){return new Promise((r,i)=>{Promise.resolve(t(()=>e.apply(this,s),{fn:e,thisArg:this,args:s})).then(r).catch(i)})}return n}const mp=t=>t();function Qw(t=mp){const e=Ze(!0);function n(){e.value=!1}function s(){e.value=!0}const r=(...i)=>{e.value&&t(...i)};return{isActive:go(e),pause:n,resume:s,eventFilter:r}}function Yw(t,e=!1,n="Timeout"){return new Promise((s,r)=>{setTimeout(e?()=>r(n):s,t)})}function gp(t){return t}function Kw(t){return nd()}function Zw(t,e,n={}){const{eventFilter:s=mp,...r}=n;return et(t,zw(s,e),r)}function Jw(t,e,n={}){const{eventFilter:s,...r}=n,{eventFilter:i,pause:o,resume:a,isActive:c}=Qw(s);return{stop:Zw(t,e,{...r,eventFilter:i}),pause:o,resume:a,isActive:c}}function _p(t,e=!0,n){Kw()?ti(t,n):e?t():gs(t)}function Xw(t,e=1e3,n={}){const{immediate:s=!0,immediateCallback:r=!1}=n;let i=null;const o=Ze(!1);function a(){i&&(clearInterval(i),i=null)}function c(){o.value=!1,a()}function l(){const u=Ue(e);u<=0||(o.value=!0,r&&t(),a(),o.value&&(i=setInterval(t,u)))}if(s&&oc&&l(),ut(e)||typeof e=="function"){const u=et(e,()=>{o.value&&oc&&l()});hr(u)}return hr(c),{isActive:o,pause:c,resume:l}}function eA(t,e={}){var n;const s=Ze((n=e.initialValue)!=null?n:null);return et(t,()=>s.value=ac(),e),s}const fr=oc?window:void 0;function tA(t){var e;const n=Ue(t);return(e=n==null?void 0:n.$el)!=null?e:n}function cc(...t){let e,n,s,r;if(typeof t[0]=="string"||Array.isArray(t[0])?([n,s,r]=t,e=fr):[e,n,s,r]=t,!e)return Hw;Array.isArray(n)||(n=[n]),Array.isArray(s)||(s=[s]);const i=[],o=()=>{i.forEach(u=>u()),i.length=0},a=(u,h,f,d)=>(u.addEventListener(h,f,d),()=>u.removeEventListener(h,f,d)),c=et(()=>[tA(e),Ue(r)],([u,h])=>{if(o(),!u)return;const f=Gw(h)?{...h}:h;i.push(...n.flatMap(d=>s.map(p=>a(u,d,p,f))))},{immediate:!0,flush:"post"}),l=()=>{c(),o()};return hr(l),l}function nA(t){return typeof t=="function"?t:typeof t=="string"?e=>e.key===t:Array.isArray(t)?e=>t.includes(e.key):()=>!0}function zu(...t){let e,n,s={};t.length===3?(e=t[0],n=t[1],s=t[2]):t.length===2?typeof t[1]=="object"?(e=!0,n=t[0],s=t[1]):(e=t[0],n=t[1]):(e=!0,n=t[0]);const{target:r=fr,eventName:i="keydown",passive:o=!1,dedupe:a=!1}=s,c=nA(e);return cc(r,i,u=>{u.repeat&&Ue(a)||c(u)&&n(u)},o)}function sA(){const t=Ze(!1),e=nd();return e&&ti(()=>{t.value=!0},e),t}function rA(t){const e=sA();return pe(()=>(e.value,!!t()))}function El(t,e={}){const{immediate:n=!0,fpsLimit:s=void 0,window:r=fr}=e,i=Ze(!1),o=pe(()=>s?1e3/dg(s):null);let a=0,c=null;function l(f){if(!i.value||!r)return;a||(a=f);const d=f-a;if(o.value&&d<o.value){c=r.requestAnimationFrame(l);return}a=f,t({delta:d,timestamp:f}),c=r.requestAnimationFrame(l)}function u(){!i.value&&r&&(i.value=!0,a=0,c=r.requestAnimationFrame(l))}function h(){i.value=!1,c!=null&&r&&(r.cancelAnimationFrame(c),c=null)}return n&&u(),hr(h),{isActive:go(i),pause:h,resume:u}}function iA(t){const{name:e,window:n=fr}=t,s=rA(()=>n&&"BroadcastChannel"in n),r=Ze(!1),i=Ze(),o=Ze(),a=Mf(null),c=u=>{i.value&&i.value.postMessage(u)},l=()=>{i.value&&i.value.close(),r.value=!0};return s.value&&_p(()=>{a.value=null,i.value=new BroadcastChannel(e),i.value.addEventListener("message",u=>{o.value=u.data},{passive:!0}),i.value.addEventListener("messageerror",u=>{a.value=u},{passive:!0}),i.value.addEventListener("close",()=>{r.value=!0})}),hr(()=>{l()}),{isSupported:s,channel:i,data:o,post:c,close:l,error:a,isClosed:r}}const Mi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Si="__vueuse_ssr_handlers__",oA=aA();function aA(){return Si in Mi||(Mi[Si]=Mi[Si]||{}),Mi[Si]}function cA(t,e){return oA[t]||e}function lA(t){return t==null?"any":t instanceof Set?"set":t instanceof Map?"map":t instanceof Date?"date":typeof t=="boolean"?"boolean":typeof t=="string"?"string":typeof t=="object"?"object":Number.isNaN(t)?"any":"number"}const uA={boolean:{read:t=>t==="true",write:t=>String(t)},object:{read:t=>JSON.parse(t),write:t=>JSON.stringify(t)},number:{read:t=>Number.parseFloat(t),write:t=>String(t)},any:{read:t=>t,write:t=>String(t)},string:{read:t=>t,write:t=>String(t)},map:{read:t=>new Map(JSON.parse(t)),write:t=>JSON.stringify(Array.from(t.entries()))},set:{read:t=>new Set(JSON.parse(t)),write:t=>JSON.stringify(Array.from(t))},date:{read:t=>new Date(t),write:t=>t.toISOString()}},Qu="vueuse-storage";function Mt(t,e,n,s={}){var r;const{flush:i="pre",deep:o=!0,listenToStorageChanges:a=!0,writeDefaults:c=!0,mergeDefaults:l=!1,shallow:u,window:h=fr,eventFilter:f,onError:d=x=>{console.error(x)},initOnMounted:p}=s,g=(u?Mf:Ze)(typeof e=="function"?e():e);if(!n)try{n=cA("getDefaultStorage",()=>{var x;return(x=fr)==null?void 0:x.localStorage})()}catch(x){d(x)}if(!n)return g;const m=Ue(e),_=lA(m),w=(r=s.serializer)!=null?r:uA[_],{pause:A,resume:b}=Jw(g,()=>M(g.value),{flush:i,deep:o,eventFilter:f});h&&a&&_p(()=>{n instanceof Storage?cc(h,"storage",E):cc(h,Qu,B),p&&E()}),p||E();function y(x,O){if(h){const k={key:t,oldValue:x,newValue:O,storageArea:n};h.dispatchEvent(n instanceof Storage?new StorageEvent("storage",k):new CustomEvent(Qu,{detail:k}))}}function M(x){try{const O=n.getItem(t);if(x==null)y(O,null),n.removeItem(t);else{const k=w.write(x);O!==k&&(n.setItem(t,k),y(O,k))}}catch(O){d(O)}}function C(x){const O=x?x.newValue:n.getItem(t);if(O==null)return c&&m!=null&&n.setItem(t,w.write(m)),m;if(!x&&l){const k=w.read(O);return typeof l=="function"?l(k,m):_==="object"&&!Array.isArray(k)?{...m,...k}:k}else return typeof O!="string"?O:w.read(O)}function E(x){if(!(x&&x.storageArea!==n)){if(x&&x.key==null){g.value=m;return}if(!(x&&x.key!==t)){A();try{(x==null?void 0:x.newValue)!==w.write(g.value)&&(g.value=C(x))}catch(O){d(O)}finally{x?gs(b):b()}}}}function B(x){E(x.detail)}return g}function yp(t={}){const{controls:e=!1,offset:n=0,immediate:s=!0,interval:r="requestAnimationFrame",callback:i}=t,o=Ze(ac()+n),a=()=>o.value=ac()+n,c=i?()=>{a(),i(o.value)}:a,l=r==="requestAnimationFrame"?El(c,{immediate:s}):Xw(c,r,{immediate:s});return e?{timestamp:o,...l}:o}const hA={easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]},fA=Object.assign({},{linear:gp},hA);function dA([t,e,n,s]){const r=(u,h)=>1-3*h+3*u,i=(u,h)=>3*h-6*u,o=u=>3*u,a=(u,h,f)=>((r(h,f)*u+i(h,f))*u+o(h))*u,c=(u,h,f)=>3*r(h,f)*u*u+2*i(h,f)*u+o(h),l=u=>{let h=u;for(let f=0;f<4;++f){const d=c(h,t,n);if(d===0)return h;const p=a(h,t,n)-u;h-=p/d}return h};return u=>t===e&&n===s?u:a(l(u),e,s)}function Yu(t,e,n){return t+n*(e-t)}function pa(t){return(typeof t=="number"?[t]:t)||[]}function pA(t,e,n,s={}){var r,i;const o=Ue(e),a=Ue(n),c=pa(o),l=pa(a),u=(r=Ue(s.duration))!=null?r:1e3,h=Date.now(),f=Date.now()+u,d=typeof s.transition=="function"?s.transition:(i=Ue(s.transition))!=null?i:gp,p=typeof d=="function"?d:dA(d);return new Promise(g=>{t.value=o;const m=()=>{var _;if((_=s.abort)!=null&&_.call(s)){g();return}const w=Date.now(),A=p((w-h)/u),b=pa(t.value).map((y,M)=>Yu(c[M],l[M],A));Array.isArray(t.value)?t.value=b.map((y,M)=>{var C,E;return Yu((C=c[M])!=null?C:0,(E=l[M])!=null?E:0,A)}):typeof t.value=="number"&&(t.value=b[0]),w<f?requestAnimationFrame(m):(t.value=a,g())};m()})}function mA(t,e={}){let n=0;const s=()=>{const i=Ue(t);return typeof i=="number"?i:i.map(Ue)},r=Ze(s());return et(s,async i=>{var o,a;if(Ue(e.disabled))return;const c=++n;if(e.delay&&await Yw(Ue(e.delay)),c!==n)return;const l=Array.isArray(i)?i.map(Ue):Ue(i);(o=e.onStarted)==null||o.call(e),await pA(r,r.value,l,{...e,abort:()=>{var u;return c!==n||((u=e.abort)==null?void 0:u.call(e))}}),(a=e.onFinished)==null||a.call(e)},{deep:!0}),et(()=>Ue(e.disabled),i=>{i&&(n++,r.value=s())}),hr(()=>{n++}),pe(()=>Ue(e.disabled)?s():r.value)}let Js;const oo=Ze(!1),bp=eA(oo),gA=yp(),_A=pe(()=>gA.value-bp.value),yA={start(){Js||Nl(),Js.start(),oo.value=!0},async stop(){oo.value=!1;const t=await Js.stop(),e=URL.createObjectURL(t),n=document.createElement("a");n.download=bA("rec"),n.href=e,n.click()}};function Nl(){return Js||(Js=new io),{recorder:Js,record:yA,recording:oo,toggled:bp,duration:_A}}function bA(t,e){const n=new Date,s=o=>`${o}`.padStart(2,"0");return`${[`${s(n.getMonth()+1)}${s(n.getDate())}-${s(n.getHours())}${s(n.getMinutes())}`,t].filter(o=>!!o).join("-")}.webm`}function Tn(t,e,n){if(typeof t=="function"||ts(t))return pe(()=>da(Ue(t),Ue(e),Ue(n)));const s=Ze(t);return pe({get(){return s.value=da(s.value,Ue(e),Ue(n))},set(r){s.value=da(r,Ue(e),Ue(n))}})}const Ds=He({initiated:!1,mute:Mt("mute",!1),volume:Tn(1,0,1),meter:0}),rt=He({}),vp=Mn({});function vA(){if(!Ds.initiated){lp(),rt.context=Vs(new AudioContext),rt.destination=qw();const{recorder:t}=Nl();rt.stream=Vs(Tt().createMediaStreamDestination()),rt.meter=Vs(new Tl().toDestination()),rt.meter.normalRange=!0,rt.meter.connect(rt.stream),rt.meter.connect(t),El(()=>{Ds.meter=rt.meter.getValue()}),rt.limiter=Vs(new Wo(-18).connect(rt.meter)),rt.reverb=Vs(new Al({decay:1,wet:.5}).connect(rt.meter)),rt.limiter.connect(rt.reverb),et(()=>Ds.mute,e=>rt.destination.mute=e),et(()=>Ds.volume,e=>{rt.destination.volume.targetRampTo(ko(e),.1)}),Ds.initiated=!0}return{audio:Ds,master:rt,channels:vp}}function wA(t=(Math.random()*1e3).toFixed(0),e){const{master:n}=vA(),s=new xs().connect(n.limiter),{recorder:r}=Nl();s.connect(r);const i=new Wo(e).connect(s);return vp[t]={channel:i,volume:s}}function ao(t=0,e=0,n=1,s=1){return e===void 0&&(e=Math.floor(t/12)+4),`hsla(${t%12*30},${n*100}%,${Math.abs(e+2)*8}%,${s})`}function AA(t,e=440){return 12*(Math.log(Number(t)/e)/Math.log(2))}function TA(t,e,n){return t.split("")[(24+n-e)%12]=="1"}function Xs(t,e=1){return[...t.slice(e,t.length),...t.slice(0,e)]}class tn{constructor(e=!1){this.eventMap={},this.eventsSuspended=e==!0}addListener(e,n,s={}){if(typeof e=="string"&&e.length<1||e instanceof String&&e.length<1||typeof e!="string"&&!(e instanceof String)&&e!==tn.ANY_EVENT)throw new TypeError("The 'event' parameter must be a string or EventEmitter.ANY_EVENT.");if(typeof n!="function")throw new TypeError("The callback must be a function.");const r=new Ku(e,this,n,s);return this.eventMap[e]||(this.eventMap[e]=[]),s.prepend?this.eventMap[e].unshift(r):this.eventMap[e].push(r),r}addOneTimeListener(e,n,s={}){s.remaining=1,this.addListener(e,n,s)}static get ANY_EVENT(){return Symbol.for("Any event")}hasListener(e,n){return e===void 0?this.eventMap[tn.ANY_EVENT]&&this.eventMap[tn.ANY_EVENT].length>0?!0:Object.entries(this.eventMap).some(([,s])=>s.length>0):this.eventMap[e]&&this.eventMap[e].length>0?n instanceof Ku?this.eventMap[e].filter(r=>r===n).length>0:typeof n=="function"?this.eventMap[e].filter(r=>r.callback===n).length>0:n==null:!1}get eventNames(){return Object.keys(this.eventMap)}getListeners(e){return this.eventMap[e]||[]}suspendEvent(e){this.getListeners(e).forEach(n=>{n.suspended=!0})}unsuspendEvent(e){this.getListeners(e).forEach(n=>{n.suspended=!1})}getListenerCount(e){return this.getListeners(e).length}emit(e,...n){if(typeof e!="string"&&!(e instanceof String))throw new TypeError("The 'event' parameter must be a string.");if(this.eventsSuspended)return;let s=[],r=this.eventMap[tn.ANY_EVENT]||[];return this.eventMap[e]&&(r=r.concat(this.eventMap[e])),r.forEach(i=>{if(i.suspended)return;let o=[...n];Array.isArray(i.arguments)&&(o=o.concat(i.arguments)),i.remaining>0&&(s.push(i.callback.apply(i.context,o)),i.count++),--i.remaining<1&&i.remove()}),s}removeListener(e,n,s={}){if(e===void 0){this.eventMap={};return}else if(!this.eventMap[e])return;let r=this.eventMap[e].filter(i=>n&&i.callback!==n||s.remaining&&s.remaining!==i.remaining||s.context&&s.context!==i.context);r.length?this.eventMap[e]=r:delete this.eventMap[e]}async waitFor(e,n={}){return n.duration=parseInt(n.duration),(isNaN(n.duration)||n.duration<=0)&&(n.duration=1/0),new Promise((s,r)=>{let i,o=this.addListener(e,()=>{clearTimeout(i),s()},{remaining:1});n.duration!==1/0&&(i=setTimeout(()=>{o.remove(),r("The duration expired before the event was emitted.")},n.duration))})}get eventCount(){return Object.keys(this.eventMap).length}}class Ku{constructor(e,n,s,r={}){if(typeof e!="string"&&!(e instanceof String)&&e!==tn.ANY_EVENT)throw new TypeError("The 'event' parameter must be a string or EventEmitter.ANY_EVENT.");if(!n)throw new ReferenceError("The 'target' parameter is mandatory.");if(typeof s!="function")throw new TypeError("The 'callback' must be a function.");r.arguments!==void 0&&!Array.isArray(r.arguments)&&(r.arguments=[r.arguments]),r=Object.assign({context:n,remaining:1/0,arguments:void 0,duration:1/0},r),r.duration!==1/0&&setTimeout(()=>this.remove(),r.duration),this.arguments=r.arguments,this.callback=s,this.context=r.context,this.count=0,this.event=e,this.remaining=parseInt(r.remaining)>=1?parseInt(r.remaining):1/0,this.suspended=!1,this.target=n}remove(){this.target.removeListener(this.event,this.callback,{context:this.context,remaining:this.remaining})}}/**
 * The `Enumerations` class contains enumerations and arrays of elements used throughout the
 * library. All its properties are static and should be referenced using the class name. For
 * example: `Enumerations.CHANNEL_MESSAGES`.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class F{static get MIDI_CHANNEL_MESSAGES(){return this.validation&&console.warn("The MIDI_CHANNEL_MESSAGES enum has been deprecated. Use the Enumerations.CHANNEL_MESSAGES enum instead."),F.CHANNEL_MESSAGES}static get CHANNEL_MESSAGES(){return{noteoff:8,noteon:9,keyaftertouch:10,controlchange:11,programchange:12,channelaftertouch:13,pitchbend:14}}static get CHANNEL_NUMBERS(){return[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]}static get MIDI_CHANNEL_NUMBERS(){return this.validation&&console.warn("The MIDI_CHANNEL_NUMBERS array has been deprecated. Use the Enumerations.CHANNEL_NUMBERS array instead."),[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]}static get CHANNEL_MODE_MESSAGES(){return{allsoundoff:120,resetallcontrollers:121,localcontrol:122,allnotesoff:123,omnimodeoff:124,omnimodeon:125,monomodeon:126,polymodeon:127}}static get MIDI_CHANNEL_MODE_MESSAGES(){return this.validation&&console.warn("The MIDI_CHANNEL_MODE_MESSAGES enum has been deprecated. Use the Enumerations.CHANNEL_MODE_MESSAGES enum instead."),F.CHANNEL_MODE_MESSAGES}static get MIDI_CONTROL_CHANGE_MESSAGES(){return this.validation&&console.warn("The MIDI_CONTROL_CHANGE_MESSAGES enum has been deprecated. Use the Enumerations.CONTROL_CHANGE_MESSAGES array instead."),{bankselectcoarse:0,modulationwheelcoarse:1,breathcontrollercoarse:2,controller3:3,footcontrollercoarse:4,portamentotimecoarse:5,dataentrycoarse:6,volumecoarse:7,balancecoarse:8,controller9:9,pancoarse:10,expressioncoarse:11,effectcontrol1coarse:12,effectcontrol2coarse:13,controller14:14,controller15:15,generalpurposeslider1:16,generalpurposeslider2:17,generalpurposeslider3:18,generalpurposeslider4:19,controller20:20,controller21:21,controller22:22,controller23:23,controller24:24,controller25:25,controller26:26,controller27:27,controller28:28,controller29:29,controller30:30,controller31:31,bankselectfine:32,modulationwheelfine:33,breathcontrollerfine:34,controller35:35,footcontrollerfine:36,portamentotimefine:37,dataentryfine:38,volumefine:39,balancefine:40,controller41:41,panfine:42,expressionfine:43,effectcontrol1fine:44,effectcontrol2fine:45,controller46:46,controller47:47,controller48:48,controller49:49,controller50:50,controller51:51,controller52:52,controller53:53,controller54:54,controller55:55,controller56:56,controller57:57,controller58:58,controller59:59,controller60:60,controller61:61,controller62:62,controller63:63,holdpedal:64,portamento:65,sustenutopedal:66,softpedal:67,legatopedal:68,hold2pedal:69,soundvariation:70,resonance:71,soundreleasetime:72,soundattacktime:73,brightness:74,soundcontrol6:75,soundcontrol7:76,soundcontrol8:77,soundcontrol9:78,soundcontrol10:79,generalpurposebutton1:80,generalpurposebutton2:81,generalpurposebutton3:82,generalpurposebutton4:83,controller84:84,controller85:85,controller86:86,controller87:87,controller88:88,controller89:89,controller90:90,reverblevel:91,tremololevel:92,choruslevel:93,celestelevel:94,phaserlevel:95,databuttonincrement:96,databuttondecrement:97,nonregisteredparametercoarse:98,nonregisteredparameterfine:99,registeredparametercoarse:100,registeredparameterfine:101,controller102:102,controller103:103,controller104:104,controller105:105,controller106:106,controller107:107,controller108:108,controller109:109,controller110:110,controller111:111,controller112:112,controller113:113,controller114:114,controller115:115,controller116:116,controller117:117,controller118:118,controller119:119,allsoundoff:120,resetallcontrollers:121,localcontrol:122,allnotesoff:123,omnimodeoff:124,omnimodeon:125,monomodeon:126,polymodeon:127}}static get CONTROL_CHANGE_MESSAGES(){return[{number:0,name:"bankselectcoarse",description:"Bank Select (Coarse)",position:"msb"},{number:1,name:"modulationwheelcoarse",description:"Modulation Wheel (Coarse)",position:"msb"},{number:2,name:"breathcontrollercoarse",description:"Breath Controller (Coarse)",position:"msb"},{number:3,name:"controller3",description:"Undefined",position:"msb"},{number:4,name:"footcontrollercoarse",description:"Foot Controller (Coarse)",position:"msb"},{number:5,name:"portamentotimecoarse",description:"Portamento Time (Coarse)",position:"msb"},{number:6,name:"dataentrycoarse",description:"Data Entry (Coarse)",position:"msb"},{number:7,name:"volumecoarse",description:"Channel Volume (Coarse)",position:"msb"},{number:8,name:"balancecoarse",description:"Balance (Coarse)",position:"msb"},{number:9,name:"controller9",description:"Controller 9 (Coarse)",position:"msb"},{number:10,name:"pancoarse",description:"Pan (Coarse)",position:"msb"},{number:11,name:"expressioncoarse",description:"Expression Controller (Coarse)",position:"msb"},{number:12,name:"effectcontrol1coarse",description:"Effect Control 1 (Coarse)",position:"msb"},{number:13,name:"effectcontrol2coarse",description:"Effect Control 2 (Coarse)",position:"msb"},{number:14,name:"controller14",description:"Undefined",position:"msb"},{number:15,name:"controller15",description:"Undefined",position:"msb"},{number:16,name:"generalpurposecontroller1",description:"General Purpose Controller 1 (Coarse)",position:"msb"},{number:17,name:"generalpurposecontroller2",description:"General Purpose Controller 2 (Coarse)",position:"msb"},{number:18,name:"generalpurposecontroller3",description:"General Purpose Controller 3 (Coarse)",position:"msb"},{number:19,name:"generalpurposecontroller4",description:"General Purpose Controller 4 (Coarse)",position:"msb"},{number:20,name:"controller20",description:"Undefined",position:"msb"},{number:21,name:"controller21",description:"Undefined",position:"msb"},{number:22,name:"controller22",description:"Undefined",position:"msb"},{number:23,name:"controller23",description:"Undefined",position:"msb"},{number:24,name:"controller24",description:"Undefined",position:"msb"},{number:25,name:"controller25",description:"Undefined",position:"msb"},{number:26,name:"controller26",description:"Undefined",position:"msb"},{number:27,name:"controller27",description:"Undefined",position:"msb"},{number:28,name:"controller28",description:"Undefined",position:"msb"},{number:29,name:"controller29",description:"Undefined",position:"msb"},{number:30,name:"controller30",description:"Undefined",position:"msb"},{number:31,name:"controller31",description:"Undefined",position:"msb"},{number:32,name:"bankselectfine",description:"Bank Select (Fine)",position:"lsb"},{number:33,name:"modulationwheelfine",description:"Modulation Wheel (Fine)",position:"lsb"},{number:34,name:"breathcontrollerfine",description:"Breath Controller (Fine)",position:"lsb"},{number:35,name:"controller35",description:"Undefined",position:"lsb"},{number:36,name:"footcontrollerfine",description:"Foot Controller (Fine)",position:"lsb"},{number:37,name:"portamentotimefine",description:"Portamento Time (Fine)",position:"lsb"},{number:38,name:"dataentryfine",description:"Data Entry (Fine)",position:"lsb"},{number:39,name:"channelvolumefine",description:"Channel Volume (Fine)",position:"lsb"},{number:40,name:"balancefine",description:"Balance (Fine)",position:"lsb"},{number:41,name:"controller41",description:"Undefined",position:"lsb"},{number:42,name:"panfine",description:"Pan (Fine)",position:"lsb"},{number:43,name:"expressionfine",description:"Expression Controller (Fine)",position:"lsb"},{number:44,name:"effectcontrol1fine",description:"Effect control 1 (Fine)",position:"lsb"},{number:45,name:"effectcontrol2fine",description:"Effect control 2 (Fine)",position:"lsb"},{number:46,name:"controller46",description:"Undefined",position:"lsb"},{number:47,name:"controller47",description:"Undefined",position:"lsb"},{number:48,name:"controller48",description:"General Purpose Controller 1 (Fine)",position:"lsb"},{number:49,name:"controller49",description:"General Purpose Controller 2 (Fine)",position:"lsb"},{number:50,name:"controller50",description:"General Purpose Controller 3 (Fine)",position:"lsb"},{number:51,name:"controller51",description:"General Purpose Controller 4 (Fine)",position:"lsb"},{number:52,name:"controller52",description:"Undefined",position:"lsb"},{number:53,name:"controller53",description:"Undefined",position:"lsb"},{number:54,name:"controller54",description:"Undefined",position:"lsb"},{number:55,name:"controller55",description:"Undefined",position:"lsb"},{number:56,name:"controller56",description:"Undefined",position:"lsb"},{number:57,name:"controller57",description:"Undefined",position:"lsb"},{number:58,name:"controller58",description:"Undefined",position:"lsb"},{number:59,name:"controller59",description:"Undefined",position:"lsb"},{number:60,name:"controller60",description:"Undefined",position:"lsb"},{number:61,name:"controller61",description:"Undefined",position:"lsb"},{number:62,name:"controller62",description:"Undefined",position:"lsb"},{number:63,name:"controller63",description:"Undefined",position:"lsb"},{number:64,name:"damperpedal",description:"Damper Pedal On/Off"},{number:65,name:"portamento",description:"Portamento On/Off"},{number:66,name:"sostenuto",description:"Sostenuto On/Off"},{number:67,name:"softpedal",description:"Soft Pedal On/Off"},{number:68,name:"legatopedal",description:"Legato Pedal On/Off"},{number:69,name:"hold2",description:"Hold 2 On/Off"},{number:70,name:"soundvariation",description:"Sound Variation",position:"lsb"},{number:71,name:"resonance",description:"Resonance",position:"lsb"},{number:72,name:"releasetime",description:"Release Time",position:"lsb"},{number:73,name:"attacktime",description:"Attack Time",position:"lsb"},{number:74,name:"brightness",description:"Brightness",position:"lsb"},{number:75,name:"decaytime",description:"Decay Time",position:"lsb"},{number:76,name:"vibratorate",description:"Vibrato Rate",position:"lsb"},{number:77,name:"vibratodepth",description:"Vibrato Depth",position:"lsb"},{number:78,name:"vibratodelay",description:"Vibrato Delay",position:"lsb"},{number:79,name:"controller79",description:"Undefined",position:"lsb"},{number:80,name:"generalpurposecontroller5",description:"General Purpose Controller 5",position:"lsb"},{number:81,name:"generalpurposecontroller6",description:"General Purpose Controller 6",position:"lsb"},{number:82,name:"generalpurposecontroller7",description:"General Purpose Controller 7",position:"lsb"},{number:83,name:"generalpurposecontroller8",description:"General Purpose Controller 8",position:"lsb"},{number:84,name:"portamentocontrol",description:"Portamento Control",position:"lsb"},{number:85,name:"controller85",description:"Undefined"},{number:86,name:"controller86",description:"Undefined"},{number:87,name:"controller87",description:"Undefined"},{number:88,name:"highresolutionvelocityprefix",description:"High Resolution Velocity Prefix",position:"lsb"},{number:89,name:"controller89",description:"Undefined"},{number:90,name:"controller90",description:"Undefined"},{number:91,name:"effect1depth",description:"Effects 1 Depth (Reverb Send Level)"},{number:92,name:"effect2depth",description:"Effects 2 Depth"},{number:93,name:"effect3depth",description:"Effects 3 Depth (Chorus Send Level)"},{number:94,name:"effect4depth",description:"Effects 4 Depth"},{number:95,name:"effect5depth",description:"Effects 5 Depth"},{number:96,name:"dataincrement",description:"Data Increment"},{number:97,name:"datadecrement",description:"Data Decrement"},{number:98,name:"nonregisteredparameterfine",description:"Non-Registered Parameter Number (Fine)",position:"lsb"},{number:99,name:"nonregisteredparametercoarse",description:"Non-Registered Parameter Number (Coarse)",position:"msb"},{number:100,name:"registeredparameterfine",description:"Registered Parameter Number (Fine)",position:"lsb"},{number:101,name:"registeredparametercoarse",description:"Registered Parameter Number (Coarse)",position:"msb"},{number:102,name:"controller102",description:"Undefined"},{number:103,name:"controller103",description:"Undefined"},{number:104,name:"controller104",description:"Undefined"},{number:105,name:"controller105",description:"Undefined"},{number:106,name:"controller106",description:"Undefined"},{number:107,name:"controller107",description:"Undefined"},{number:108,name:"controller108",description:"Undefined"},{number:109,name:"controller109",description:"Undefined"},{number:110,name:"controller110",description:"Undefined"},{number:111,name:"controller111",description:"Undefined"},{number:112,name:"controller112",description:"Undefined"},{number:113,name:"controller113",description:"Undefined"},{number:114,name:"controller114",description:"Undefined"},{number:115,name:"controller115",description:"Undefined"},{number:116,name:"controller116",description:"Undefined"},{number:117,name:"controller117",description:"Undefined"},{number:118,name:"controller118",description:"Undefined"},{number:119,name:"controller119",description:"Undefined"},{number:120,name:"allsoundoff",description:"All Sound Off"},{number:121,name:"resetallcontrollers",description:"Reset All Controllers"},{number:122,name:"localcontrol",description:"Local Control On/Off"},{number:123,name:"allnotesoff",description:"All Notes Off"},{number:124,name:"omnimodeoff",description:"Omni Mode Off"},{number:125,name:"omnimodeon",description:"Omni Mode On"},{number:126,name:"monomodeon",description:"Mono Mode On"},{number:127,name:"polymodeon",description:"Poly Mode On"}]}static get REGISTERED_PARAMETERS(){return{pitchbendrange:[0,0],channelfinetuning:[0,1],channelcoarsetuning:[0,2],tuningprogram:[0,3],tuningbank:[0,4],modulationrange:[0,5],azimuthangle:[61,0],elevationangle:[61,1],gain:[61,2],distanceratio:[61,3],maximumdistance:[61,4],maximumdistancegain:[61,5],referencedistanceratio:[61,6],panspreadangle:[61,7],rollangle:[61,8]}}static get MIDI_REGISTERED_PARAMETERS(){return this.validation&&console.warn("The MIDI_REGISTERED_PARAMETERS enum has been deprecated. Use the Enumerations.REGISTERED_PARAMETERS enum instead."),F.MIDI_REGISTERED_PARAMETERS}static get SYSTEM_MESSAGES(){return{sysex:240,timecode:241,songposition:242,songselect:243,tunerequest:246,tuningrequest:246,sysexend:247,clock:248,start:250,continue:251,stop:252,activesensing:254,reset:255,midimessage:0,unknownsystemmessage:-1}}static get MIDI_SYSTEM_MESSAGES(){return this.validation&&console.warn("The MIDI_SYSTEM_MESSAGES enum has been deprecated. Use the Enumerations.SYSTEM_MESSAGES enum instead."),F.SYSTEM_MESSAGES}static get CHANNEL_EVENTS(){return["noteoff","controlchange","noteon","keyaftertouch","programchange","channelaftertouch","pitchbend","allnotesoff","allsoundoff","localcontrol","monomode","omnimode","resetallcontrollers","nrpn","nrpn-dataentrycoarse","nrpn-dataentryfine","nrpn-dataincrement","nrpn-datadecrement","rpn","rpn-dataentrycoarse","rpn-dataentryfine","rpn-dataincrement","rpn-datadecrement","nrpn-databuttonincrement","nrpn-databuttondecrement","rpn-databuttonincrement","rpn-databuttondecrement"]}}/**
 * The `Note` class represents a single musical note such as `"D3"`, `"G#4"`, `"F-1"`, `"Gb7"`, etc.
 *
 * `Note` objects can be played back on a single channel by calling
 * [`OutputChannel.playNote()`]{@link OutputChannel#playNote} or, on multiple channels of the same
 * output, by calling [`Output.playNote()`]{@link Output#playNote}.
 *
 * The note has [`attack`](#attack) and [`release`](#release) velocities set at `0.5` by default.
 * These can be changed by passing in the appropriate option. It is also possible to set a
 * system-wide default for attack and release velocities by using the
 * [`WebMidi.defaults`](WebMidi#defaults) property.
 *
 * If you prefer to work with raw MIDI values (`0` to `127`), you can use [`rawAttack`](#rawAttack) and
 * [`rawRelease`](#rawRelease) to both get and set the values.
 *
 * The note may have a [`duration`](#duration). If it does, playback will be automatically stopped
 * when the duration has elapsed by sending a `"noteoff"` event. By default, the duration is set to
 * `Infinity`. In this case, it will never stop playing unless explicitly stopped by calling a
 * method such as [`OutputChannel.stopNote()`]{@link OutputChannel#stopNote},
 * [`Output.stopNote()`]{@link Output#stopNote} or similar.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class ys{constructor(e,n={}){this.duration=j.defaults.note.duration,this.attack=j.defaults.note.attack,this.release=j.defaults.note.release,n.duration!=null&&(this.duration=n.duration),n.attack!=null&&(this.attack=n.attack),n.rawAttack!=null&&(this.attack=$.from7bitToFloat(n.rawAttack)),n.release!=null&&(this.release=n.release),n.rawRelease!=null&&(this.release=$.from7bitToFloat(n.rawRelease)),Number.isInteger(e)?this.identifier=$.toNoteIdentifier(e):this.identifier=e}get identifier(){return this._name+(this._accidental||"")+this._octave}set identifier(e){const n=$.getNoteDetails(e);if(j.validation&&!e)throw new Error("Invalid note identifier");this._name=n.name,this._accidental=n.accidental,this._octave=n.octave}get name(){return this._name}set name(e){if(j.validation&&(e=e.toUpperCase(),!["C","D","E","F","G","A","B"].includes(e)))throw new Error("Invalid name value");this._name=e}get accidental(){return this._accidental}set accidental(e){if(j.validation&&(e=e.toLowerCase(),!["#","##","b","bb"].includes(e)))throw new Error("Invalid accidental value");this._accidental=e}get octave(){return this._octave}set octave(e){if(j.validation&&(e=parseInt(e),isNaN(e)))throw new Error("Invalid octave value");this._octave=e}get duration(){return this._duration}set duration(e){if(j.validation&&(e=parseFloat(e),isNaN(e)||e===null||e<0))throw new RangeError("Invalid duration value.");this._duration=e}get attack(){return this._attack}set attack(e){if(j.validation&&(e=parseFloat(e),isNaN(e)||!(e>=0&&e<=1)))throw new RangeError("Invalid attack value.");this._attack=e}get release(){return this._release}set release(e){if(j.validation&&(e=parseFloat(e),isNaN(e)||!(e>=0&&e<=1)))throw new RangeError("Invalid release value.");this._release=e}get rawAttack(){return $.fromFloatTo7Bit(this._attack)}set rawAttack(e){this._attack=$.from7bitToFloat(e)}get rawRelease(){return $.fromFloatTo7Bit(this._release)}set rawRelease(e){this._release=$.from7bitToFloat(e)}get number(){return $.toNoteNumber(this.identifier)}getOffsetNumber(e=0,n=0){return j.validation&&(e=parseInt(e)||0,n=parseInt(n)||0),Math.min(Math.max(this.number+e*12+n,0),127)}}/**
 * The `Utilities` class contains general-purpose utility methods. All methods are static and
 * should be called using the class name. For example: `Utilities.getNoteDetails("C4")`.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class ${static toNoteNumber(e,n=0){if(n=n==null?0:parseInt(n),isNaN(n))throw new RangeError("Invalid 'octaveOffset' value");typeof e!="string"&&(e="");const s=this.getNoteDetails(e);if(!s)throw new TypeError("Invalid note identifier");const r={C:0,D:2,E:4,F:5,G:7,A:9,B:11};let i=(s.octave+1+n)*12;if(i+=r[s.name],s.accidental&&(s.accidental.startsWith("b")?i-=s.accidental.length:i+=s.accidental.length),i<0||i>127)throw new RangeError("Invalid octaveOffset value");return i}static getNoteDetails(e){Number.isInteger(e)&&(e=this.toNoteIdentifier(e));const n=e.match(/^([CDEFGAB])(#{0,2}|b{0,2})(-?\d+)$/i);if(!n)throw new TypeError("Invalid note identifier");const s=n[1].toUpperCase(),r=parseInt(n[3]);let i=n[2].toLowerCase();return i=i===""?void 0:i,{accidental:i,identifier:s+(i||"")+r,name:s,octave:r}}static sanitizeChannels(e){let n;if(j.validation){if(e==="all")n=["all"];else if(e==="none")return[]}return Array.isArray(e)?n=e:n=[e],n.indexOf("all")>-1&&(n=F.MIDI_CHANNEL_NUMBERS),n.map(function(s){return parseInt(s)}).filter(function(s){return s>=1&&s<=16})}static toTimestamp(e){let n=!1;const s=parseFloat(e);return isNaN(s)?!1:(typeof e=="string"&&e.substring(0,1)==="+"?s>=0&&(n=j.time+s):s>=0&&(n=s),n)}static guessNoteNumber(e,n){n=parseInt(n)||0;let s=!1;if(Number.isInteger(e)&&e>=0&&e<=127)s=parseInt(e);else if(parseInt(e)>=0&&parseInt(e)<=127)s=parseInt(e);else if(typeof e=="string"||e instanceof String)try{s=this.toNoteNumber(e.trim(),n)}catch{return!1}return s}static toNoteIdentifier(e,n){if(e=parseInt(e),isNaN(e)||e<0||e>127)throw new RangeError("Invalid note number");if(n=n==null?0:parseInt(n),isNaN(n))throw new RangeError("Invalid octaveOffset value");const s=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],r=Math.floor(e/12-1)+n;return s[e%12]+r.toString()}static buildNote(e,n={}){if(n.octaveOffset=parseInt(n.octaveOffset)||0,e instanceof ys)return e;let s=this.guessNoteNumber(e,n.octaveOffset);if(s===!1)throw new TypeError(`The input could not be parsed as a note (${e})`);return n.octaveOffset=void 0,new ys(s,n)}static buildNoteArray(e,n={}){let s=[];return Array.isArray(e)||(e=[e]),e.forEach(r=>{s.push(this.buildNote(r,n))}),s}static from7bitToFloat(e){return e===1/0&&(e=127),e=parseInt(e)||0,Math.min(Math.max(e/127,0),1)}static fromFloatTo7Bit(e){return e===1/0&&(e=1),e=parseFloat(e)||0,Math.min(Math.max(Math.round(e*127),0),127)}static fromMsbLsbToFloat(e,n=0){j.validation&&(e=Math.min(Math.max(parseInt(e)||0,0),127),n=Math.min(Math.max(parseInt(n)||0,0),127));const s=((e<<7)+n)/16383;return Math.min(Math.max(s,0),1)}static fromFloatToMsbLsb(e){j.validation&&(e=Math.min(Math.max(parseFloat(e)||0,0),1));const n=Math.round(e*16383);return{msb:n>>7,lsb:n&127}}static offsetNumber(e,n=0,s=0){if(j.validation){if(e=parseInt(e),isNaN(e))throw new Error("Invalid note number");n=parseInt(n)||0,s=parseInt(s)||0}return Math.min(Math.max(e+n*12+s,0),127)}static getPropertyByValue(e,n){return Object.keys(e).find(s=>e[s]===n)}static getCcNameByNumber(e){if(!(j.validation&&(e=parseInt(e),!(e>=0&&e<=127))))return F.CONTROL_CHANGE_MESSAGES[e].name}static getCcNumberByName(e){let n=F.CONTROL_CHANGE_MESSAGES.find(s=>s.name===e);return n?n.number:F.MIDI_CONTROL_CHANGE_MESSAGES[e]}static getChannelModeByNumber(e){if(!(e>=120&&e<=127))return!1;for(let n in F.CHANNEL_MODE_MESSAGES)if(F.CHANNEL_MODE_MESSAGES.hasOwnProperty(n)&&e===F.CHANNEL_MODE_MESSAGES[n])return n;return!1}static get isNode(){return typeof process<"u"&&process.versions!=null&&process.versions.node!=null}static get isBrowser(){return typeof window<"u"&&typeof window.document<"u"}}/**
 * The `OutputChannel` class represents a single output MIDI channel. `OutputChannel` objects are
 * provided by an [`Output`](Output) port which, itself, is made available by a device. The
 * `OutputChannel` object is derived from the host's MIDI subsystem and should not be instantiated
 * directly.
 *
 * All 16 `OutputChannel` objects can be found inside the parent output's
 * [`channels`]{@link Output#channels} property.
 *
 * @param {Output} output The [`Output`](Output) this channel belongs to.
 * @param {number} number The MIDI channel number (`1` - `16`).
 *
 * @extends EventEmitter
 * @license Apache-2.0
 * @since 3.0.0
 */class MA extends tn{constructor(e,n){super(),this._output=e,this._number=n,this._octaveOffset=0}destroy(){this._output=null,this._number=null,this._octaveOffset=0,this.removeListener()}send(e,n={time:0}){return this.output.send(e,n),this}sendKeyAftertouch(e,n,s={}){if(j.validation){if(s.useRawValue&&(s.rawValue=s.useRawValue),isNaN(parseFloat(n)))throw new RangeError("Invalid key aftertouch value.");if(s.rawValue){if(!(n>=0&&n<=127&&Number.isInteger(n)))throw new RangeError("Key aftertouch raw value must be an integer between 0 and 127.")}else if(!(n>=0&&n<=1))throw new RangeError("Key aftertouch value must be a float between 0 and 1.")}s.rawValue||(n=$.fromFloatTo7Bit(n));const r=j.octaveOffset+this.output.octaveOffset+this.octaveOffset;return Array.isArray(e)||(e=[e]),$.buildNoteArray(e).forEach(i=>{this.send([(F.CHANNEL_MESSAGES.keyaftertouch<<4)+(this.number-1),i.getOffsetNumber(r),n],{time:$.toTimestamp(s.time)})}),this}sendControlChange(e,n,s={}){if(typeof e=="string"&&(e=$.getCcNumberByName(e)),Array.isArray(n)||(n=[n]),j.validation){if(e===void 0)throw new TypeError("Control change must be identified with a valid name or an integer between 0 and 127.");if(!Number.isInteger(e)||!(e>=0&&e<=127))throw new TypeError("Control change number must be an integer between 0 and 127.");if(n=n.map(r=>{const i=Math.min(Math.max(parseInt(r),0),127);if(isNaN(i))throw new TypeError("Values must be integers between 0 and 127");return i}),n.length===2&&e>=32)throw new TypeError("To use a value array, the controller must be between 0 and 31")}return n.forEach((r,i)=>{this.send([(F.CHANNEL_MESSAGES.controlchange<<4)+(this.number-1),e+i*32,n[i]],{time:$.toTimestamp(s.time)})}),this}_selectNonRegisteredParameter(e,n={}){return this.sendControlChange(99,e[0],n),this.sendControlChange(98,e[1],n),this}_deselectRegisteredParameter(e={}){return this.sendControlChange(101,127,e),this.sendControlChange(100,127,e),this}_deselectNonRegisteredParameter(e={}){return this.sendControlChange(101,127,e),this.sendControlChange(100,127,e),this}_selectRegisteredParameter(e,n={}){return this.sendControlChange(101,e[0],n),this.sendControlChange(100,e[1],n),this}_setCurrentParameter(e,n={}){return e=[].concat(e),this.sendControlChange(6,e[0],n),e.length<2?this:(this.sendControlChange(38,e[1],n),this)}sendRpnDecrement(e,n={}){if(Array.isArray(e)||(e=F.REGISTERED_PARAMETERS[e]),j.validation){if(e===void 0)throw new TypeError("The specified registered parameter is invalid.");let s=!1;if(Object.getOwnPropertyNames(F.REGISTERED_PARAMETERS).forEach(r=>{F.REGISTERED_PARAMETERS[r][0]===e[0]&&F.REGISTERED_PARAMETERS[r][1]===e[1]&&(s=!0)}),!s)throw new TypeError("The specified registered parameter is invalid.")}return this._selectRegisteredParameter(e,n),this.sendControlChange(97,0,n),this._deselectRegisteredParameter(n),this}sendRpnIncrement(e,n={}){if(Array.isArray(e)||(e=F.REGISTERED_PARAMETERS[e]),j.validation){if(e===void 0)throw new TypeError("The specified registered parameter is invalid.");let s=!1;if(Object.getOwnPropertyNames(F.REGISTERED_PARAMETERS).forEach(r=>{F.REGISTERED_PARAMETERS[r][0]===e[0]&&F.REGISTERED_PARAMETERS[r][1]===e[1]&&(s=!0)}),!s)throw new TypeError("The specified registered parameter is invalid.")}return this._selectRegisteredParameter(e,n),this.sendControlChange(96,0,n),this._deselectRegisteredParameter(n),this}playNote(e,n={}){this.sendNoteOn(e,n);const s=Array.isArray(e)?e:[e];for(let r of s)if(parseInt(r.duration)>0){const i={time:($.toTimestamp(n.time)||j.time)+parseInt(r.duration),release:r.release,rawRelease:r.rawRelease};this.sendNoteOff(r,i)}else if(parseInt(n.duration)>0){const i={time:($.toTimestamp(n.time)||j.time)+parseInt(n.duration),release:n.release,rawRelease:n.rawRelease};this.sendNoteOff(r,i)}return this}sendNoteOff(e,n={}){if(j.validation){if(n.rawRelease!=null&&!(n.rawRelease>=0&&n.rawRelease<=127))throw new RangeError("The 'rawRelease' option must be an integer between 0 and 127");if(n.release!=null&&!(n.release>=0&&n.release<=1))throw new RangeError("The 'release' option must be an number between 0 and 1");n.rawVelocity&&(n.rawRelease=n.velocity,console.warn("The 'rawVelocity' option is deprecated. Use 'rawRelease' instead.")),n.velocity&&(n.release=n.velocity,console.warn("The 'velocity' option is deprecated. Use 'attack' instead."))}let s=64;n.rawRelease!=null?s=n.rawRelease:isNaN(n.release)||(s=Math.round(n.release*127));const r=j.octaveOffset+this.output.octaveOffset+this.octaveOffset;return $.buildNoteArray(e,{rawRelease:parseInt(s)}).forEach(i=>{this.send([(F.CHANNEL_MESSAGES.noteoff<<4)+(this.number-1),i.getOffsetNumber(r),i.rawRelease],{time:$.toTimestamp(n.time)})}),this}stopNote(e,n={}){return this.sendNoteOff(e,n)}sendNoteOn(e,n={}){if(j.validation){if(n.rawAttack!=null&&!(n.rawAttack>=0&&n.rawAttack<=127))throw new RangeError("The 'rawAttack' option must be an integer between 0 and 127");if(n.attack!=null&&!(n.attack>=0&&n.attack<=1))throw new RangeError("The 'attack' option must be an number between 0 and 1");n.rawVelocity&&(n.rawAttack=n.velocity,n.rawRelease=n.release,console.warn("The 'rawVelocity' option is deprecated. Use 'rawAttack' or 'rawRelease'.")),n.velocity&&(n.attack=n.velocity,console.warn("The 'velocity' option is deprecated. Use 'attack' instead."))}let s=64;n.rawAttack!=null?s=n.rawAttack:isNaN(n.attack)||(s=Math.round(n.attack*127));const r=j.octaveOffset+this.output.octaveOffset+this.octaveOffset;return $.buildNoteArray(e,{rawAttack:s}).forEach(i=>{this.send([(F.CHANNEL_MESSAGES.noteon<<4)+(this.number-1),i.getOffsetNumber(r),i.rawAttack],{time:$.toTimestamp(n.time)})}),this}sendChannelMode(e,n=0,s={}){if(typeof e=="string"&&(e=F.CHANNEL_MODE_MESSAGES[e]),j.validation){if(e===void 0)throw new TypeError("Invalid channel mode message name or number.");if(isNaN(e)||!(e>=120&&e<=127))throw new TypeError("Invalid channel mode message number.");if(isNaN(parseInt(n))||n<0||n>127)throw new RangeError("Value must be an integer between 0 and 127.")}return this.send([(F.CHANNEL_MESSAGES.controlchange<<4)+(this.number-1),e,n],{time:$.toTimestamp(s.time)}),this}sendOmniMode(e,n={}){return e===void 0||e?this.sendChannelMode("omnimodeon",0,n):this.sendChannelMode("omnimodeoff",0,n),this}sendChannelAftertouch(e,n={}){if(j.validation){if(isNaN(parseFloat(e)))throw new RangeError("Invalid channel aftertouch value.");if(n.rawValue){if(!(e>=0&&e<=127&&Number.isInteger(e)))throw new RangeError("Channel aftertouch raw value must be an integer between 0 and 127.")}else if(!(e>=0&&e<=1))throw new RangeError("Channel aftertouch value must be a float between 0 and 1.")}return n.rawValue||(e=$.fromFloatTo7Bit(e)),this.send([(F.CHANNEL_MESSAGES.channelaftertouch<<4)+(this.number-1),Math.round(e)],{time:$.toTimestamp(n.time)}),this}sendMasterTuning(e,n={}){if(e=parseFloat(e)||0,j.validation&&!(e>-65&&e<64))throw new RangeError("The value must be a decimal number larger than -65 and smaller than 64.");let s=Math.floor(e)+64,r=e-Math.floor(e);r=Math.round((r+1)/2*16383);let i=r>>7&127,o=r&127;return this.sendRpnValue("channelcoarsetuning",s,n),this.sendRpnValue("channelfinetuning",[i,o],n),this}sendModulationRange(e,n,s={}){if(j.validation){if(!Number.isInteger(e)||!(e>=0&&e<=127))throw new RangeError("The semitones value must be an integer between 0 and 127.");if(n!=null&&(!Number.isInteger(n)||!(n>=0&&n<=127)))throw new RangeError("If specified, the cents value must be an integer between 0 and 127.")}return n>=0&&n<=127||(n=0),this.sendRpnValue("modulationrange",[e,n],s),this}sendNrpnValue(e,n,s={}){if(n=[].concat(n),j.validation){if(!Array.isArray(e)||!Number.isInteger(e[0])||!Number.isInteger(e[1]))throw new TypeError("The specified NRPN is invalid.");if(!(e[0]>=0&&e[0]<=127))throw new RangeError("The first byte of the NRPN must be between 0 and 127.");if(!(e[1]>=0&&e[1]<=127))throw new RangeError("The second byte of the NRPN must be between 0 and 127.");n.forEach(r=>{if(!(r>=0&&r<=127))throw new RangeError("The data bytes of the NRPN must be between 0 and 127.")})}return this._selectNonRegisteredParameter(e,s),this._setCurrentParameter(n,s),this._deselectNonRegisteredParameter(s),this}sendPitchBend(e,n={}){if(j.validation)if(n.rawValue&&Array.isArray(e)){if(!(e[0]>=0&&e[0]<=127))throw new RangeError("The pitch bend MSB must be an integer between 0 and 127.");if(!(e[1]>=0&&e[1]<=127))throw new RangeError("The pitch bend LSB must be an integer between 0 and 127.")}else if(n.rawValue&&!Array.isArray(e)){if(!(e>=0&&e<=127))throw new RangeError("The pitch bend MSB must be an integer between 0 and 127.")}else{if(isNaN(e)||e===null)throw new RangeError("Invalid pitch bend value.");if(!(e>=-1&&e<=1))throw new RangeError("The pitch bend value must be a float between -1 and 1.")}let s=0,r=0;if(n.rawValue&&Array.isArray(e))s=e[0],r=e[1];else if(n.rawValue&&!Array.isArray(e))s=e;else{const i=$.fromFloatToMsbLsb((e+1)/2);s=i.msb,r=i.lsb}return this.send([(F.CHANNEL_MESSAGES.pitchbend<<4)+(this.number-1),r,s],{time:$.toTimestamp(n.time)}),this}sendPitchBendRange(e,n,s={}){if(j.validation){if(!Number.isInteger(e)||!(e>=0&&e<=127))throw new RangeError("The semitones value must be an integer between 0 and 127.");if(!Number.isInteger(n)||!(n>=0&&n<=127))throw new RangeError("The cents value must be an integer between 0 and 127.")}return this.sendRpnValue("pitchbendrange",[e,n],s),this}sendProgramChange(e,n={}){if(e=parseInt(e)||0,j.validation&&!(e>=0&&e<=127))throw new RangeError("The program number must be between 0 and 127.");return this.send([(F.CHANNEL_MESSAGES.programchange<<4)+(this.number-1),e],{time:$.toTimestamp(n.time)}),this}sendRpnValue(e,n,s={}){if(Array.isArray(e)||(e=F.REGISTERED_PARAMETERS[e]),j.validation){if(!Number.isInteger(e[0])||!Number.isInteger(e[1]))throw new TypeError("The specified NRPN is invalid.");if(!(e[0]>=0&&e[0]<=127))throw new RangeError("The first byte of the RPN must be between 0 and 127.");if(!(e[1]>=0&&e[1]<=127))throw new RangeError("The second byte of the RPN must be between 0 and 127.");[].concat(n).forEach(r=>{if(!(r>=0&&r<=127))throw new RangeError("The data bytes of the RPN must be between 0 and 127.")})}return this._selectRegisteredParameter(e,s),this._setCurrentParameter(n,s),this._deselectRegisteredParameter(s),this}sendTuningBank(e,n={}){if(j.validation&&(!Number.isInteger(e)||!(e>=0&&e<=127)))throw new RangeError("The tuning bank number must be between 0 and 127.");return this.sendRpnValue("tuningbank",e,n),this}sendTuningProgram(e,n={}){if(j.validation&&(!Number.isInteger(e)||!(e>=0&&e<=127)))throw new RangeError("The tuning program number must be between 0 and 127.");return this.sendRpnValue("tuningprogram",e,n),this}sendLocalControl(e,n={}){return e?this.sendChannelMode("localcontrol",127,n):this.sendChannelMode("localcontrol",0,n)}sendAllNotesOff(e={}){return this.sendChannelMode("allnotesoff",0,e)}sendAllSoundOff(e={}){return this.sendChannelMode("allsoundoff",0,e)}sendResetAllControllers(e={}){return this.sendChannelMode("resetallcontrollers",0,e)}sendPolyphonicMode(e,n={}){return e==="mono"?this.sendChannelMode("monomodeon",0,n):this.sendChannelMode("polymodeon",0,n)}get octaveOffset(){return this._octaveOffset}set octaveOffset(e){if(this.validation&&(e=parseInt(e),isNaN(e)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=e}get output(){return this._output}get number(){return this._number}}/**
 * The `Output` class represents a single MIDI output port (not to be confused with a MIDI channel).
 * A port is made available by a MIDI device. A MIDI device can advertise several input and output
 * ports. Each port has 16 MIDI channels which can be accessed via the [`channels`](#channels)
 * property.
 *
 * The `Output` object is automatically instantiated by the library according to the host's MIDI
 * subsystem and should not be directly instantiated.
 *
 * You can access all available `Output` objects by referring to the
 * [`WebMidi.outputs`](WebMidi#outputs) array or by using methods such as
 * [`WebMidi.getOutputByName()`](WebMidi#getOutputByName) or
 * [`WebMidi.getOutputById()`](WebMidi#getOutputById).
 *
 * @fires Output#opened
 * @fires Output#disconnected
 * @fires Output#closed
 *
 * @extends EventEmitter
 * @license Apache-2.0
 */class lc extends tn{constructor(e){super(),this._midiOutput=e,this._octaveOffset=0,this.channels=[];for(let n=1;n<=16;n++)this.channels[n]=new MA(this,n);this._midiOutput.onstatechange=this._onStateChange.bind(this)}async destroy(){this.removeListener(),this.channels.forEach(e=>e.destroy()),this.channels=[],this._midiOutput&&(this._midiOutput.onstatechange=null),await this.close(),this._midiOutput=null}_onStateChange(e){let n={timestamp:j.time};e.port.connection==="open"?(n.type="opened",n.target=this,n.port=n.target,this.emit("opened",n)):e.port.connection==="closed"&&e.port.state==="connected"?(n.type="closed",n.target=this,n.port=n.target,this.emit("closed",n)):e.port.connection==="closed"&&e.port.state==="disconnected"?(n.type="disconnected",n.port={connection:e.port.connection,id:e.port.id,manufacturer:e.port.manufacturer,name:e.port.name,state:e.port.state,type:e.port.type},this.emit("disconnected",n)):e.port.connection==="pending"&&e.port.state==="disconnected"||console.warn("This statechange event was not caught:",e.port.connection,e.port.state)}async open(){try{return await this._midiOutput.open(),Promise.resolve(this)}catch(e){return Promise.reject(e)}}async close(){this._midiOutput?await this._midiOutput.close():await Promise.resolve()}send(e,n={time:0},s=0){if(e instanceof wp&&(e=$.isNode?e.data:e.rawData),e instanceof Uint8Array&&$.isNode&&(e=Array.from(e)),j.validation){if(!Array.isArray(e)&&!(e instanceof Uint8Array)&&(e=[e],Array.isArray(n)&&(e=e.concat(n)),n=isNaN(s)?{time:0}:{time:s}),!(parseInt(e[0])>=128&&parseInt(e[0])<=255))throw new RangeError("The first byte (status) must be an integer between 128 and 255.");e.slice(1).forEach(r=>{if(r=parseInt(r),!(r>=0&&r<=255))throw new RangeError("Data bytes must be integers between 0 and 255.")}),n||(n={time:0})}return this._midiOutput.send(e,$.toTimestamp(n.time)),this}sendSysex(e,n=[],s={}){if(e=[].concat(e),n instanceof Uint8Array){const r=new Uint8Array(1+e.length+n.length+1);r[0]=F.SYSTEM_MESSAGES.sysex,r.set(Uint8Array.from(e),1),r.set(n,1+e.length),r[r.length-1]=F.SYSTEM_MESSAGES.sysexend,this.send(r,{time:s.time})}else{const r=e.concat(n,F.SYSTEM_MESSAGES.sysexend);this.send([F.SYSTEM_MESSAGES.sysex].concat(r),{time:s.time})}return this}clear(){return this._midiOutput.clear?this._midiOutput.clear():j.validation&&console.warn("The 'clear()' method has not yet been implemented in your environment."),this}sendTimecodeQuarterFrame(e,n={}){if(j.validation&&(e=parseInt(e),isNaN(e)||!(e>=0&&e<=127)))throw new RangeError("The value must be an integer between 0 and 127.");return this.send([F.SYSTEM_MESSAGES.timecode,e],{time:n.time}),this}sendSongPosition(e=0,n={}){e=Math.floor(e)||0;var s=e>>7&127,r=e&127;return this.send([F.SYSTEM_MESSAGES.songposition,s,r],{time:n.time}),this}sendSongSelect(e=0,n={}){if(j.validation&&(e=parseInt(e),isNaN(e)||!(e>=0&&e<=127)))throw new RangeError("The program value must be between 0 and 127");return this.send([F.SYSTEM_MESSAGES.songselect,e],{time:n.time}),this}sendTuneRequest(e={}){return this.send([F.SYSTEM_MESSAGES.tunerequest],{time:e.time}),this}sendClock(e={}){return this.send([F.SYSTEM_MESSAGES.clock],{time:e.time}),this}sendStart(e={}){return this.send([F.SYSTEM_MESSAGES.start],{time:e.time}),this}sendContinue(e={}){return this.send([F.SYSTEM_MESSAGES.continue],{time:e.time}),this}sendStop(e={}){return this.send([F.SYSTEM_MESSAGES.stop],{time:e.time}),this}sendActiveSensing(e={}){return this.send([F.SYSTEM_MESSAGES.activesensing],{time:e.time}),this}sendReset(e={}){return this.send([F.SYSTEM_MESSAGES.reset],{time:e.time}),this}sendTuningRequest(e={}){return j.validation&&console.warn("The sendTuningRequest() method has been deprecated. Use sendTuningRequest() instead."),this.sendTuneRequest(e)}sendKeyAftertouch(e,n,s={}){return s.channels==null&&(s.channels=F.MIDI_CHANNEL_NUMBERS),$.sanitizeChannels(s.channels).forEach(r=>{this.channels[r].sendKeyAftertouch(e,n,s)}),this}sendControlChange(e,n,s={},r={}){if(j.validation&&(Array.isArray(s)||Number.isInteger(s)||s==="all")){const i=s;s=r,s.channels=i,s.channels==="all"&&(s.channels=F.MIDI_CHANNEL_NUMBERS)}return s.channels==null&&(s.channels=F.MIDI_CHANNEL_NUMBERS),$.sanitizeChannels(s.channels).forEach(i=>{this.channels[i].sendControlChange(e,n,s)}),this}sendPitchBendRange(e=0,n=0,s={}){return s.channels==null&&(s.channels=F.MIDI_CHANNEL_NUMBERS),$.sanitizeChannels(s.channels).forEach(r=>{this.channels[r].sendPitchBendRange(e,n,s)}),this}setPitchBendRange(e=0,n=0,s="all",r={}){return j.validation&&(console.warn("The setPitchBendRange() method is deprecated. Use sendPitchBendRange() instead."),r.channels=s,r.channels==="all"&&(r.channels=F.MIDI_CHANNEL_NUMBERS)),this.sendPitchBendRange(e,n,r)}sendRpnValue(e,n,s={}){return s.channels==null&&(s.channels=F.MIDI_CHANNEL_NUMBERS),$.sanitizeChannels(s.channels).forEach(r=>{this.channels[r].sendRpnValue(e,n,s)}),this}setRegisteredParameter(e,n=[],s="all",r={}){return j.validation&&(console.warn("The setRegisteredParameter() method is deprecated. Use sendRpnValue() instead."),r.channels=s,r.channels==="all"&&(r.channels=F.MIDI_CHANNEL_NUMBERS)),this.sendRpnValue(e,n,r)}sendChannelAftertouch(e,n={},s={}){if(j.validation&&(Array.isArray(n)||Number.isInteger(n)||n==="all")){const r=n;n=s,n.channels=r,n.channels==="all"&&(n.channels=F.MIDI_CHANNEL_NUMBERS)}return n.channels==null&&(n.channels=F.MIDI_CHANNEL_NUMBERS),$.sanitizeChannels(n.channels).forEach(r=>{this.channels[r].sendChannelAftertouch(e,n)}),this}sendPitchBend(e,n={},s={}){if(j.validation&&(Array.isArray(n)||Number.isInteger(n)||n==="all")){const r=n;n=s,n.channels=r,n.channels==="all"&&(n.channels=F.MIDI_CHANNEL_NUMBERS)}return n.channels==null&&(n.channels=F.MIDI_CHANNEL_NUMBERS),$.sanitizeChannels(n.channels).forEach(r=>{this.channels[r].sendPitchBend(e,n)}),this}sendProgramChange(e=0,n={},s={}){if(j.validation&&(Array.isArray(n)||Number.isInteger(n)||n==="all")){const r=n;n=s,n.channels=r,n.channels==="all"&&(n.channels=F.MIDI_CHANNEL_NUMBERS)}return n.channels==null&&(n.channels=F.MIDI_CHANNEL_NUMBERS),$.sanitizeChannels(n.channels).forEach(r=>{this.channels[r].sendProgramChange(e,n)}),this}sendModulationRange(e,n,s={}){return s.channels==null&&(s.channels=F.MIDI_CHANNEL_NUMBERS),$.sanitizeChannels(s.channels).forEach(r=>{this.channels[r].sendModulationRange(e,n,s)}),this}setModulationRange(e=0,n=0,s="all",r={}){return j.validation&&(console.warn("The setModulationRange() method is deprecated. Use sendModulationRange() instead."),r.channels=s,r.channels==="all"&&(r.channels=F.MIDI_CHANNEL_NUMBERS)),this.sendModulationRange(e,n,r)}sendMasterTuning(e,n={}){return n.channels==null&&(n.channels=F.MIDI_CHANNEL_NUMBERS),$.sanitizeChannels(n.channels).forEach(s=>{this.channels[s].sendMasterTuning(e,n)}),this}setMasterTuning(e,n={},s={}){return j.validation&&(console.warn("The setMasterTuning() method is deprecated. Use sendMasterTuning() instead."),s.channels=n,s.channels==="all"&&(s.channels=F.MIDI_CHANNEL_NUMBERS)),this.sendMasterTuning(e,s)}sendTuningProgram(e,n={}){return n.channels==null&&(n.channels=F.MIDI_CHANNEL_NUMBERS),$.sanitizeChannels(n.channels).forEach(s=>{this.channels[s].sendTuningProgram(e,n)}),this}setTuningProgram(e,n="all",s={}){return j.validation&&(console.warn("The setTuningProgram() method is deprecated. Use sendTuningProgram() instead."),s.channels=n,s.channels==="all"&&(s.channels=F.MIDI_CHANNEL_NUMBERS)),this.sendTuningProgram(e,s)}sendTuningBank(e=0,n={}){return n.channels==null&&(n.channels=F.MIDI_CHANNEL_NUMBERS),$.sanitizeChannels(n.channels).forEach(s=>{this.channels[s].sendTuningBank(e,n)}),this}setTuningBank(e,n="all",s={}){return j.validation&&(console.warn("The setTuningBank() method is deprecated. Use sendTuningBank() instead."),s.channels=n,s.channels==="all"&&(s.channels=F.MIDI_CHANNEL_NUMBERS)),this.sendTuningBank(e,s)}sendChannelMode(e,n=0,s={},r={}){if(j.validation&&(Array.isArray(s)||Number.isInteger(s)||s==="all")){const i=s;s=r,s.channels=i,s.channels==="all"&&(s.channels=F.MIDI_CHANNEL_NUMBERS)}return s.channels==null&&(s.channels=F.MIDI_CHANNEL_NUMBERS),$.sanitizeChannels(s.channels).forEach(i=>{this.channels[i].sendChannelMode(e,n,s)}),this}sendAllSoundOff(e={}){return e.channels==null&&(e.channels=F.MIDI_CHANNEL_NUMBERS),$.sanitizeChannels(e.channels).forEach(n=>{this.channels[n].sendAllSoundOff(e)}),this}sendAllNotesOff(e={}){return e.channels==null&&(e.channels=F.MIDI_CHANNEL_NUMBERS),$.sanitizeChannels(e.channels).forEach(n=>{this.channels[n].sendAllNotesOff(e)}),this}sendResetAllControllers(e={},n={}){if(j.validation&&(Array.isArray(e)||Number.isInteger(e)||e==="all")){const s=e;e=n,e.channels=s,e.channels==="all"&&(e.channels=F.MIDI_CHANNEL_NUMBERS)}return e.channels==null&&(e.channels=F.MIDI_CHANNEL_NUMBERS),$.sanitizeChannels(e.channels).forEach(s=>{this.channels[s].sendResetAllControllers(e)}),this}sendPolyphonicMode(e,n={},s={}){if(j.validation&&(Array.isArray(n)||Number.isInteger(n)||n==="all")){const r=n;n=s,n.channels=r,n.channels==="all"&&(n.channels=F.MIDI_CHANNEL_NUMBERS)}return n.channels==null&&(n.channels=F.MIDI_CHANNEL_NUMBERS),$.sanitizeChannels(n.channels).forEach(r=>{this.channels[r].sendPolyphonicMode(e,n)}),this}sendLocalControl(e,n={},s={}){if(j.validation&&(Array.isArray(n)||Number.isInteger(n)||n==="all")){const r=n;n=s,n.channels=r,n.channels==="all"&&(n.channels=F.MIDI_CHANNEL_NUMBERS)}return n.channels==null&&(n.channels=F.MIDI_CHANNEL_NUMBERS),$.sanitizeChannels(n.channels).forEach(r=>{this.channels[r].sendLocalControl(e,n)}),this}sendOmniMode(e,n={},s={}){if(j.validation&&(Array.isArray(n)||Number.isInteger(n)||n==="all")){const r=n;n=s,n.channels=r,n.channels==="all"&&(n.channels=F.MIDI_CHANNEL_NUMBERS)}return n.channels==null&&(n.channels=F.MIDI_CHANNEL_NUMBERS),$.sanitizeChannels(n.channels).forEach(r=>{this.channels[r].sendOmniMode(e,n)}),this}sendNrpnValue(e,n,s={}){return s.channels==null&&(s.channels=F.MIDI_CHANNEL_NUMBERS),$.sanitizeChannels(s.channels).forEach(r=>{this.channels[r].sendNrpnValue(e,n,s)}),this}setNonRegisteredParameter(e,n=[],s="all",r={}){return j.validation&&(console.warn("The setNonRegisteredParameter() method is deprecated. Use sendNrpnValue() instead."),r.channels=s,r.channels==="all"&&(r.channels=F.MIDI_CHANNEL_NUMBERS)),this.sendNrpnValue(e,n,r)}sendRpnIncrement(e,n={}){return n.channels==null&&(n.channels=F.MIDI_CHANNEL_NUMBERS),$.sanitizeChannels(n.channels).forEach(s=>{this.channels[s].sendRpnIncrement(e,n)}),this}incrementRegisteredParameter(e,n="all",s={}){return j.validation&&(console.warn("The incrementRegisteredParameter() method is deprecated. Use sendRpnIncrement() instead."),s.channels=n,s.channels==="all"&&(s.channels=F.MIDI_CHANNEL_NUMBERS)),this.sendRpnIncrement(e,s)}sendRpnDecrement(e,n={}){return n.channels==null&&(n.channels=F.MIDI_CHANNEL_NUMBERS),$.sanitizeChannels(n.channels).forEach(s=>{this.channels[s].sendRpnDecrement(e,n)}),this}decrementRegisteredParameter(e,n="all",s={}){return j.validation&&(console.warn("The decrementRegisteredParameter() method is deprecated. Use sendRpnDecrement() instead."),s.channels=n,s.channels==="all"&&(s.channels=F.MIDI_CHANNEL_NUMBERS)),this.sendRpnDecrement(e,s)}sendNoteOff(e,n={},s={}){if(j.validation&&(Array.isArray(n)||Number.isInteger(n)||n==="all")){const r=n;n=s,n.channels=r,n.channels==="all"&&(n.channels=F.MIDI_CHANNEL_NUMBERS)}return n.channels==null&&(n.channels=F.MIDI_CHANNEL_NUMBERS),$.sanitizeChannels(n.channels).forEach(r=>{this.channels[r].sendNoteOff(e,n)}),this}stopNote(e,n){return this.sendNoteOff(e,n)}playNote(e,n={},s={}){if(j.validation&&(n.rawVelocity&&console.warn("The 'rawVelocity' option is deprecated. Use 'rawAttack' instead."),n.velocity&&console.warn("The 'velocity' option is deprecated. Use 'velocity' instead."),Array.isArray(n)||Number.isInteger(n)||n==="all")){const r=n;n=s,n.channels=r,n.channels==="all"&&(n.channels=F.MIDI_CHANNEL_NUMBERS)}return n.channels==null&&(n.channels=F.MIDI_CHANNEL_NUMBERS),$.sanitizeChannels(n.channels).forEach(r=>{this.channels[r].playNote(e,n)}),this}sendNoteOn(e,n={},s={}){if(j.validation&&(Array.isArray(n)||Number.isInteger(n)||n==="all")){const r=n;n=s,n.channels=r,n.channels==="all"&&(n.channels=F.MIDI_CHANNEL_NUMBERS)}return n.channels==null&&(n.channels=F.MIDI_CHANNEL_NUMBERS),$.sanitizeChannels(n.channels).forEach(r=>{this.channels[r].sendNoteOn(e,n)}),this}get name(){return this._midiOutput.name}get id(){return this._midiOutput.id}get connection(){return this._midiOutput.connection}get manufacturer(){return this._midiOutput.manufacturer}get state(){return this._midiOutput.state}get type(){return this._midiOutput.type}get octaveOffset(){return this._octaveOffset}set octaveOffset(e){if(this.validation&&(e=parseInt(e),isNaN(e)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=e}}/**
 * The `Forwarder` class allows the forwarding of MIDI messages to predetermined outputs. When you
 * call its [`forward()`](#forward) method, it will send the specified [`Message`](Message) object
 * to all the outputs listed in its [`destinations`](#destinations) property.
 *
 * If specific channels or message types have been defined in the [`channels`](#channels) or
 * [`types`](#types) properties, only messages matching the channels/types will be forwarded.
 *
 * While it can be manually instantiated, you are more likely to come across a `Forwarder` object as
 * the return value of the [`Input.addForwarder()`](Input#addForwarder) method.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class Zu{constructor(e=[],n={}){this.destinations=[],this.types=[...Object.keys(F.SYSTEM_MESSAGES),...Object.keys(F.CHANNEL_MESSAGES)],this.channels=F.MIDI_CHANNEL_NUMBERS,this.suspended=!1,Array.isArray(e)||(e=[e]),n.types&&!Array.isArray(n.types)&&(n.types=[n.types]),n.channels&&!Array.isArray(n.channels)&&(n.channels=[n.channels]),j.validation&&(e.forEach(s=>{if(!(s instanceof lc))throw new TypeError("Destinations must be of type 'Output'.")}),n.types!==void 0&&n.types.forEach(s=>{if(!F.SYSTEM_MESSAGES.hasOwnProperty(s)&&!F.CHANNEL_MESSAGES.hasOwnProperty(s))throw new TypeError("Type must be a valid message type.")}),n.channels!==void 0&&n.channels.forEach(s=>{if(!F.MIDI_CHANNEL_NUMBERS.includes(s))throw new TypeError("MIDI channel must be between 1 and 16.")})),this.destinations=e,n.types&&(this.types=n.types),n.channels&&(this.channels=n.channels)}forward(e){this.suspended||this.types.includes(e.type)&&(e.channel&&!this.channels.includes(e.channel)||this.destinations.forEach(n=>{j.validation&&!(n instanceof lc)||n.send(e)}))}}/**
 * The `InputChannel` class represents a single MIDI input channel (1-16) from a single input
 * device. This object is derived from the host's MIDI subsystem and should not be instantiated
 * directly.
 *
 * All 16 `InputChannel` objects can be found inside the input's [`channels`](Input#channels)
 * property.
 *
 * @fires InputChannel#midimessage
 * @fires InputChannel#unknownmessage
 *
 * @fires InputChannel#noteoff
 * @fires InputChannel#noteon
 * @fires InputChannel#keyaftertouch
 * @fires InputChannel#programchange
 * @fires InputChannel#channelaftertouch
 * @fires InputChannel#pitchbend
 *
 * @fires InputChannel#allnotesoff
 * @fires InputChannel#allsoundoff
 * @fires InputChannel#localcontrol
 * @fires InputChannel#monomode
 * @fires InputChannel#omnimode
 * @fires InputChannel#resetallcontrollers
 *
 * @fires InputChannel#event:nrpn
 * @fires InputChannel#event:nrpn-dataentrycoarse
 * @fires InputChannel#event:nrpn-dataentryfine
 * @fires InputChannel#event:nrpn-dataincrement
 * @fires InputChannel#event:nrpn-datadecrement
 * @fires InputChannel#event:rpn
 * @fires InputChannel#event:rpn-dataentrycoarse
 * @fires InputChannel#event:rpn-dataentryfine
 * @fires InputChannel#event:rpn-dataincrement
 * @fires InputChannel#event:rpn-datadecrement
 *
 * @fires InputChannel#controlchange
 * @fires InputChannel#event:controlchange-controllerxxx
 * @fires InputChannel#event:controlchange-bankselectcoarse
 * @fires InputChannel#event:controlchange-modulationwheelcoarse
 * @fires InputChannel#event:controlchange-breathcontrollercoarse
 * @fires InputChannel#event:controlchange-footcontrollercoarse
 * @fires InputChannel#event:controlchange-portamentotimecoarse
 * @fires InputChannel#event:controlchange-dataentrycoarse
 * @fires InputChannel#event:controlchange-volumecoarse
 * @fires InputChannel#event:controlchange-balancecoarse
 * @fires InputChannel#event:controlchange-pancoarse
 * @fires InputChannel#event:controlchange-expressioncoarse
 * @fires InputChannel#event:controlchange-effectcontrol1coarse
 * @fires InputChannel#event:controlchange-effectcontrol2coarse
 * @fires InputChannel#event:controlchange-generalpurposecontroller1
 * @fires InputChannel#event:controlchange-generalpurposecontroller2
 * @fires InputChannel#event:controlchange-generalpurposecontroller3
 * @fires InputChannel#event:controlchange-generalpurposecontroller4
 * @fires InputChannel#event:controlchange-bankselectfine
 * @fires InputChannel#event:controlchange-modulationwheelfine
 * @fires InputChannel#event:controlchange-breathcontrollerfine
 * @fires InputChannel#event:controlchange-footcontrollerfine
 * @fires InputChannel#event:controlchange-portamentotimefine
 * @fires InputChannel#event:controlchange-dataentryfine
 * @fires InputChannel#event:controlchange-channelvolumefine
 * @fires InputChannel#event:controlchange-balancefine
 * @fires InputChannel#event:controlchange-panfine
 * @fires InputChannel#event:controlchange-expressionfine
 * @fires InputChannel#event:controlchange-effectcontrol1fine
 * @fires InputChannel#event:controlchange-effectcontrol2fine
 * @fires InputChannel#event:controlchange-damperpedal
 * @fires InputChannel#event:controlchange-portamento
 * @fires InputChannel#event:controlchange-sostenuto
 * @fires InputChannel#event:controlchange-softpedal
 * @fires InputChannel#event:controlchange-legatopedal
 * @fires InputChannel#event:controlchange-hold2
 * @fires InputChannel#event:controlchange-soundvariation
 * @fires InputChannel#event:controlchange-resonance
 * @fires InputChannel#event:controlchange-releasetime
 * @fires InputChannel#event:controlchange-attacktime
 * @fires InputChannel#event:controlchange-brightness
 * @fires InputChannel#event:controlchange-decaytime
 * @fires InputChannel#event:controlchange-vibratorate
 * @fires InputChannel#event:controlchange-vibratodepth
 * @fires InputChannel#event:controlchange-vibratodelay
 * @fires InputChannel#event:controlchange-generalpurposecontroller5
 * @fires InputChannel#event:controlchange-generalpurposecontroller6
 * @fires InputChannel#event:controlchange-generalpurposecontroller7
 * @fires InputChannel#event:controlchange-generalpurposecontroller8
 * @fires InputChannel#event:controlchange-portamentocontrol
 * @fires InputChannel#event:controlchange-highresolutionvelocityprefix
 * @fires InputChannel#event:controlchange-effect1depth
 * @fires InputChannel#event:controlchange-effect2depth
 * @fires InputChannel#event:controlchange-effect3depth
 * @fires InputChannel#event:controlchange-effect4depth
 * @fires InputChannel#event:controlchange-effect5depth
 * @fires InputChannel#event:controlchange-dataincrement
 * @fires InputChannel#event:controlchange-datadecrement
 * @fires InputChannel#event:controlchange-nonregisteredparameterfine
 * @fires InputChannel#event:controlchange-nonregisteredparametercoarse
 * @fires InputChannel#event:controlchange-registeredparameterfine
 * @fires InputChannel#event:controlchange-registeredparametercoarse
 * @fires InputChannel#event:controlchange-allsoundoff
 * @fires InputChannel#event:controlchange-resetallcontrollers
 * @fires InputChannel#event:controlchange-localcontrol
 * @fires InputChannel#event:controlchange-allnotesoff
 * @fires InputChannel#event:controlchange-omnimodeoff
 * @fires InputChannel#event:controlchange-omnimodeon
 * @fires InputChannel#event:controlchange-monomodeon
 * @fires InputChannel#event:controlchange-polymodeon
 * @fires InputChannel#event:
 *
 * @extends EventEmitter
 * @license Apache-2.0
 * @since 3.0.0
 */class SA extends tn{constructor(e,n){super(),this._input=e,this._number=n,this._octaveOffset=0,this._nrpnBuffer=[],this._rpnBuffer=[],this.parameterNumberEventsEnabled=!0,this.notesState=new Array(128).fill(!1)}destroy(){this._input=null,this._number=null,this._octaveOffset=0,this._nrpnBuffer=[],this.notesState=new Array(128).fill(!1),this.parameterNumberEventsEnabled=!1,this.removeListener()}_processMidiMessageEvent(e){const n=Object.assign({},e);n.port=this.input,n.target=this,n.type="midimessage",this.emit(n.type,n),this._parseEventForStandardMessages(n)}_parseEventForStandardMessages(e){const n=Object.assign({},e);n.type=n.message.type||"unknownmessage";const s=e.message.dataBytes[0],r=e.message.dataBytes[1];if(n.type==="noteoff"||n.type==="noteon"&&r===0)this.notesState[s]=!1,n.type="noteoff",n.note=new ys($.offsetNumber(s,this.octaveOffset+this.input.octaveOffset+j.octaveOffset),{rawAttack:0,rawRelease:r}),n.value=$.from7bitToFloat(r),n.rawValue=r,n.velocity=n.note.release,n.rawVelocity=n.note.rawRelease;else if(n.type==="noteon")this.notesState[s]=!0,n.note=new ys($.offsetNumber(s,this.octaveOffset+this.input.octaveOffset+j.octaveOffset),{rawAttack:r}),n.value=$.from7bitToFloat(r),n.rawValue=r,n.velocity=n.note.attack,n.rawVelocity=n.note.rawAttack;else if(n.type==="keyaftertouch")n.note=new ys($.offsetNumber(s,this.octaveOffset+this.input.octaveOffset+j.octaveOffset)),n.value=$.from7bitToFloat(r),n.rawValue=r,n.identifier=n.note.identifier,n.key=n.note.number,n.rawKey=s;else if(n.type==="controlchange"){n.controller={number:s,name:F.CONTROL_CHANGE_MESSAGES[s].name,description:F.CONTROL_CHANGE_MESSAGES[s].description,position:F.CONTROL_CHANGE_MESSAGES[s].position},n.subtype=n.controller.name||"controller"+s,n.value=$.from7bitToFloat(r),n.rawValue=r;const i=Object.assign({},n);i.type=`${n.type}-controller${s}`,delete i.subtype,this.emit(i.type,i);const o=Object.assign({},n);o.type=`${n.type}-`+F.CONTROL_CHANGE_MESSAGES[s].name,delete o.subtype,o.type.indexOf("controller")!==0&&this.emit(o.type,o),n.message.dataBytes[0]>=120&&this._parseChannelModeMessage(n),this.parameterNumberEventsEnabled&&this._isRpnOrNrpnController(n.message.dataBytes[0])&&this._parseEventForParameterNumber(n)}else n.type==="programchange"?(n.value=s,n.rawValue=n.value):n.type==="channelaftertouch"?(n.value=$.from7bitToFloat(s),n.rawValue=s):n.type==="pitchbend"?(n.value=((r<<7)+s-8192)/8192,n.rawValue=(r<<7)+s):n.type="unknownmessage";this.emit(n.type,n)}_parseChannelModeMessage(e){const n=Object.assign({},e);n.type=n.controller.name,n.type==="localcontrol"&&(n.value=n.message.data[2]===127,n.rawValue=n.message.data[2]),n.type==="omnimodeon"?(n.type="omnimode",n.value=!0,n.rawValue=n.message.data[2]):n.type==="omnimodeoff"&&(n.type="omnimode",n.value=!1,n.rawValue=n.message.data[2]),n.type==="monomodeon"?(n.type="monomode",n.value=!0,n.rawValue=n.message.data[2]):n.type==="polymodeon"&&(n.type="monomode",n.value=!1,n.rawValue=n.message.data[2]),this.emit(n.type,n)}_parseEventForParameterNumber(e){const n=e.message.dataBytes[0],s=e.message.dataBytes[1];n===99||n===101?(this._nrpnBuffer=[],this._rpnBuffer=[],n===99?this._nrpnBuffer=[e.message]:s!==127&&(this._rpnBuffer=[e.message])):n===98||n===100?n===98?(this._rpnBuffer=[],this._nrpnBuffer.length===1?this._nrpnBuffer.push(e.message):this._nrpnBuffer=[]):(this._nrpnBuffer=[],this._rpnBuffer.length===1&&s!==127?this._rpnBuffer.push(e.message):this._rpnBuffer=[]):(n===6||n===38||n===96||n===97)&&(this._rpnBuffer.length===2?this._dispatchParameterNumberEvent("rpn",this._rpnBuffer[0].dataBytes[1],this._rpnBuffer[1].dataBytes[1],e):this._nrpnBuffer.length===2?this._dispatchParameterNumberEvent("nrpn",this._nrpnBuffer[0].dataBytes[1],this._nrpnBuffer[1].dataBytes[1],e):(this._nrpnBuffer=[],this._rpnBuffer=[]))}_isRpnOrNrpnController(e){return e===6||e===38||e===96||e===97||e===98||e===99||e===100||e===101}_dispatchParameterNumberEvent(e,n,s,r){e=e==="nrpn"?"nrpn":"rpn";const i={target:r.target,timestamp:r.timestamp,message:r.message,parameterMsb:n,parameterLsb:s,value:$.from7bitToFloat(r.message.dataBytes[1]),rawValue:r.message.dataBytes[1]};e==="rpn"?i.parameter=Object.keys(F.REGISTERED_PARAMETERS).find(c=>F.REGISTERED_PARAMETERS[c][0]===n&&F.REGISTERED_PARAMETERS[c][1]===s):i.parameter=(n<<7)+s;const o=F.CONTROL_CHANGE_MESSAGES[r.message.dataBytes[0]].name;i.type=`${e}-${o}`,this.emit(i.type,i);const a=Object.assign({},i);a.type==="nrpn-dataincrement"?a.type="nrpn-databuttonincrement":a.type==="nrpn-datadecrement"?a.type="nrpn-databuttondecrement":a.type==="rpn-dataincrement"?a.type="rpn-databuttonincrement":a.type==="rpn-datadecrement"&&(a.type="rpn-databuttondecrement"),this.emit(a.type,a),i.type=e,i.subtype=o,this.emit(i.type,i)}getChannelModeByNumber(e){return j.validation&&(console.warn("The 'getChannelModeByNumber()' method has been moved to the 'Utilities' class."),e=Math.floor(e)),$.getChannelModeByNumber(e)}getCcNameByNumber(e){if(j.validation&&(console.warn("The 'getCcNameByNumber()' method has been moved to the 'Utilities' class."),e=parseInt(e),!(e>=0&&e<=127)))throw new RangeError("Invalid control change number.");return $.getCcNameByNumber(e)}getNoteState(e){e instanceof ys&&(e=e.identifier);const n=$.guessNoteNumber(e,j.octaveOffset+this.input.octaveOffset+this.octaveOffset);return this.notesState[n]}get octaveOffset(){return this._octaveOffset}set octaveOffset(e){if(this.validation&&(e=parseInt(e),isNaN(e)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=e}get input(){return this._input}get number(){return this._number}get nrpnEventsEnabled(){return this.parameterNumberEventsEnabled}set nrpnEventsEnabled(e){this.validation&&(e=!!e),this.parameterNumberEventsEnabled=e}}/**
 * The `Message` class represents a single MIDI message. It has several properties that make it
 * easy to make sense of the binary data it contains.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class wp{constructor(e){this.rawData=e,this.data=Array.from(this.rawData),this.statusByte=this.rawData[0],this.rawDataBytes=this.rawData.slice(1),this.dataBytes=this.data.slice(1),this.isChannelMessage=!1,this.isSystemMessage=!1,this.command=void 0,this.channel=void 0,this.manufacturerId=void 0,this.type=void 0,this.statusByte<240?(this.isChannelMessage=!0,this.command=this.statusByte>>4,this.channel=(this.statusByte&15)+1):(this.isSystemMessage=!0,this.command=this.statusByte),this.isChannelMessage?this.type=$.getPropertyByValue(F.CHANNEL_MESSAGES,this.command):this.isSystemMessage&&(this.type=$.getPropertyByValue(F.SYSTEM_MESSAGES,this.command)),this.statusByte===F.SYSTEM_MESSAGES.sysex&&(this.dataBytes[0]===0?(this.manufacturerId=this.dataBytes.slice(0,3),this.dataBytes=this.dataBytes.slice(3,this.rawDataBytes.length-1),this.rawDataBytes=this.rawDataBytes.slice(3,this.rawDataBytes.length-1)):(this.manufacturerId=[this.dataBytes[0]],this.dataBytes=this.dataBytes.slice(1,this.dataBytes.length-1),this.rawDataBytes=this.rawDataBytes.slice(1,this.rawDataBytes.length-1)))}}/**
 * The `Input` class represents a single MIDI input port. This object is automatically instantiated
 * by the library according to the host's MIDI subsystem and does not need to be directly
 * instantiated. Instead, you can access all `Input` objects by referring to the
 * [`WebMidi.inputs`](WebMidi#inputs) array. You can also retrieve inputs by using methods such as
 * [`WebMidi.getInputByName()`](WebMidi#getInputByName) and
 * [`WebMidi.getInputById()`](WebMidi#getInputById).
 *
 * Note that a single MIDI device may expose several inputs and/or outputs.
 *
 * **Important**: the `Input` class does not directly fire channel-specific MIDI messages
 * (such as [`noteon`](InputChannel#event:noteon) or
 * [`controlchange`](InputChannel#event:controlchange), etc.). The [`InputChannel`](InputChannel)
 * object does that. However, you can still use the
 * [`Input.addListener()`](#addListener) method to listen to channel-specific events on multiple
 * [`InputChannel`](InputChannel) objects at once.
 *
 * @fires Input#opened
 * @fires Input#disconnected
 * @fires Input#closed
 * @fires Input#midimessage
 *
 * @fires Input#sysex
 * @fires Input#timecode
 * @fires Input#songposition
 * @fires Input#songselect
 * @fires Input#tunerequest
 * @fires Input#clock
 * @fires Input#start
 * @fires Input#continue
 * @fires Input#stop
 * @fires Input#activesensing
 * @fires Input#reset
 *
 * @fires Input#unknownmidimessage
 *
 * @extends EventEmitter
 * @license Apache-2.0
 */class EA extends tn{constructor(e){super(),this._midiInput=e,this._octaveOffset=0,this.channels=[];for(let n=1;n<=16;n++)this.channels[n]=new SA(this,n);this._forwarders=[],this._midiInput.onstatechange=this._onStateChange.bind(this),this._midiInput.onmidimessage=this._onMidiMessage.bind(this)}async destroy(){this.removeListener(),this.channels.forEach(e=>e.destroy()),this.channels=[],this._forwarders=[],this._midiInput&&(this._midiInput.onstatechange=null,this._midiInput.onmidimessage=null),await this.close(),this._midiInput=null}_onStateChange(e){let n={timestamp:j.time,target:this,port:this};e.port.connection==="open"?(n.type="opened",this.emit("opened",n)):e.port.connection==="closed"&&e.port.state==="connected"?(n.type="closed",this.emit("closed",n)):e.port.connection==="closed"&&e.port.state==="disconnected"?(n.type="disconnected",n.port={connection:e.port.connection,id:e.port.id,manufacturer:e.port.manufacturer,name:e.port.name,state:e.port.state,type:e.port.type},this.emit("disconnected",n)):e.port.connection==="pending"&&e.port.state==="disconnected"||console.warn("This statechange event was not caught: ",e.port.connection,e.port.state)}_onMidiMessage(e){const n=new wp(e.data),s={port:this,target:this,message:n,timestamp:e.timeStamp,type:"midimessage",data:n.data,rawData:n.data,statusByte:n.data[0],dataBytes:n.dataBytes};this.emit("midimessage",s),n.isSystemMessage?this._parseEvent(s):n.isChannelMessage&&this.channels[n.channel]._processMidiMessageEvent(s),this._forwarders.forEach(r=>r.forward(n))}_parseEvent(e){const n=Object.assign({},e);n.type=n.message.type||"unknownmidimessage",n.type==="songselect"&&(n.song=e.data[1]+1,n.value=e.data[1],n.rawValue=n.value),this.emit(n.type,n)}async open(){try{await this._midiInput.open()}catch(e){return Promise.reject(e)}return Promise.resolve(this)}async close(){if(!this._midiInput)return Promise.resolve(this);try{await this._midiInput.close()}catch(e){return Promise.reject(e)}return Promise.resolve(this)}getChannelModeByNumber(){j.validation&&console.warn("The 'getChannelModeByNumber()' method has been moved to the 'Utilities' class.")}addListener(e,n,s={}){if(j.validation&&typeof s=="function"){let r=n!=null?[].concat(n):void 0;n=s,s={channels:r}}if(F.CHANNEL_EVENTS.includes(e)){s.channels===void 0&&(s.channels=F.MIDI_CHANNEL_NUMBERS);let r=[];return $.sanitizeChannels(s.channels).forEach(i=>{r.push(this.channels[i].addListener(e,n,s))}),r}else return super.addListener(e,n,s)}addOneTimeListener(e,n,s={}){return s.remaining=1,this.addListener(e,n,s)}on(e,n,s,r){return this.addListener(e,n,s,r)}hasListener(e,n,s={}){if(j.validation&&typeof s=="function"){let r=[].concat(n);n=s,s={channels:r}}return F.CHANNEL_EVENTS.includes(e)?(s.channels===void 0&&(s.channels=F.MIDI_CHANNEL_NUMBERS),$.sanitizeChannels(s.channels).every(r=>this.channels[r].hasListener(e,n))):super.hasListener(e,n)}removeListener(e,n,s={}){if(j.validation&&typeof s=="function"){let r=[].concat(n);n=s,s={channels:r}}if(s.channels===void 0&&(s.channels=F.MIDI_CHANNEL_NUMBERS),e==null)return $.sanitizeChannels(s.channels).forEach(r=>{this.channels[r]&&this.channels[r].removeListener()}),super.removeListener();F.CHANNEL_EVENTS.includes(e)?$.sanitizeChannels(s.channels).forEach(r=>{this.channels[r].removeListener(e,n,s)}):super.removeListener(e,n,s)}addForwarder(e,n={}){let s;return e instanceof Zu?s=e:s=new Zu(e,n),this._forwarders.push(s),s}removeForwarder(e){this._forwarders=this._forwarders.filter(n=>n!==e)}hasForwarder(e){return this._forwarders.includes(e)}get name(){return this._midiInput.name}get id(){return this._midiInput.id}get connection(){return this._midiInput.connection}get manufacturer(){return this._midiInput.manufacturer}get octaveOffset(){return this._octaveOffset}set octaveOffset(e){if(this.validation&&(e=parseInt(e),isNaN(e)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=e}get state(){return this._midiInput.state}get type(){return this._midiInput.type}get nrpnEventsEnabled(){return j.validation&&console.warn("The 'nrpnEventsEnabled' property has been moved to the 'InputChannel' class."),!1}}/**
 * The `WebMidi` object makes it easier to work with the low-level Web MIDI API. Basically, it
 * simplifies sending outgoing MIDI messages and reacting to incoming MIDI messages.
 *
 * When using the WebMidi.js library, you should know that the `WebMidi` class has already been
 * instantiated. You cannot instantiate it yourself. If you use the **IIFE** version, you should
 * simply use the global object called `WebMidi`. If you use the **CJS** (CommonJS) or **ESM** (ES6
 * module) version, you get an already-instantiated object when you import the module.
 *
 * @fires WebMidi#connected
 * @fires WebMidi#disabled
 * @fires WebMidi#disconnected
 * @fires WebMidi#enabled
 * @fires WebMidi#error
 * @fires WebMidi#midiaccessgranted
 * @fires WebMidi#portschanged
 *
 * @extends EventEmitter
 * @license Apache-2.0
 */class NA extends tn{constructor(){super(),this.defaults={note:{attack:$.from7bitToFloat(64),release:$.from7bitToFloat(64),duration:1/0}},this.interface=null,this.validation=!0,this._inputs=[],this._disconnectedInputs=[],this._outputs=[],this._disconnectedOutputs=[],this._stateChangeQueue=[],this._octaveOffset=0}async enable(e={},n=!1){if($.isNode)try{window.navigator}catch{let a=await Object.getPrototypeOf(async function(){}).constructor(`
        let jzz = await import("jzz");
        return jzz.default;
        `)();global.navigator||(global.navigator={}),Object.assign(global.navigator,a)}if(this.validation=e.validation!==!1,this.validation&&(typeof e=="function"&&(e={callback:e,sysex:n}),n&&(e.sysex=!0)),this.enabled)return typeof e.callback=="function"&&e.callback(),Promise.resolve();const s={timestamp:this.time,target:this,type:"error",error:void 0},r={timestamp:this.time,target:this,type:"midiaccessgranted"},i={timestamp:this.time,target:this,type:"enabled"};try{typeof e.requestMIDIAccessFunction=="function"?this.interface=await e.requestMIDIAccessFunction({sysex:e.sysex,software:e.software}):this.interface=await navigator.requestMIDIAccess({sysex:e.sysex,software:e.software})}catch(o){return s.error=o,this.emit("error",s),typeof e.callback=="function"&&e.callback(o),Promise.reject(o)}this.emit("midiaccessgranted",r),this.interface.onstatechange=this._onInterfaceStateChange.bind(this);try{await this._updateInputsAndOutputs()}catch(o){return s.error=o,this.emit("error",s),typeof e.callback=="function"&&e.callback(o),Promise.reject(o)}return this.emit("enabled",i),typeof e.callback=="function"&&e.callback(),Promise.resolve(this)}async disable(){return this.interface&&(this.interface.onstatechange=void 0),this._destroyInputsAndOutputs().then(()=>{navigator&&typeof navigator.close=="function"&&navigator.close(),this.interface=null;let e={timestamp:this.time,target:this,type:"disabled"};this.emit("disabled",e),this.removeListener()})}getInputById(e,n={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!e)return}if(n.disconnected){for(let s=0;s<this._disconnectedInputs.length;s++)if(this._disconnectedInputs[s].id===e.toString())return this._disconnectedInputs[s]}else for(let s=0;s<this.inputs.length;s++)if(this.inputs[s].id===e.toString())return this.inputs[s]}getInputByName(e,n={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!e)return;e=e.toString()}if(n.disconnected){for(let s=0;s<this._disconnectedInputs.length;s++)if(~this._disconnectedInputs[s].name.indexOf(e))return this._disconnectedInputs[s]}else for(let s=0;s<this.inputs.length;s++)if(~this.inputs[s].name.indexOf(e))return this.inputs[s]}getOutputByName(e,n={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!e)return;e=e.toString()}if(n.disconnected){for(let s=0;s<this._disconnectedOutputs.length;s++)if(~this._disconnectedOutputs[s].name.indexOf(e))return this._disconnectedOutputs[s]}else for(let s=0;s<this.outputs.length;s++)if(~this.outputs[s].name.indexOf(e))return this.outputs[s]}getOutputById(e,n={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!e)return}if(n.disconnected){for(let s=0;s<this._disconnectedOutputs.length;s++)if(this._disconnectedOutputs[s].id===e.toString())return this._disconnectedOutputs[s]}else for(let s=0;s<this.outputs.length;s++)if(this.outputs[s].id===e.toString())return this.outputs[s]}noteNameToNumber(e){return this.validation&&console.warn("The noteNameToNumber() method is deprecated. Use Utilities.toNoteNumber() instead."),$.toNoteNumber(e,this.octaveOffset)}getOctave(e){return this.validation&&(console.warn("The getOctave()is deprecated. Use Utilities.getNoteDetails() instead"),e=parseInt(e)),!isNaN(e)&&e>=0&&e<=127?$.getNoteDetails($.offsetNumber(e,this.octaveOffset)).octave:!1}sanitizeChannels(e){return this.validation&&console.warn("The sanitizeChannels() method has been moved to the utilities class."),$.sanitizeChannels(e)}toMIDIChannels(e){return this.validation&&console.warn("The toMIDIChannels() method has been deprecated. Use Utilities.sanitizeChannels() instead."),$.sanitizeChannels(e)}guessNoteNumber(e){return this.validation&&console.warn("The guessNoteNumber() method has been deprecated. Use Utilities.guessNoteNumber() instead."),$.guessNoteNumber(e,this.octaveOffset)}getValidNoteArray(e,n={}){return this.validation&&console.warn("The getValidNoteArray() method has been moved to the Utilities.buildNoteArray()"),$.buildNoteArray(e,n)}convertToTimestamp(e){return this.validation&&console.warn("The convertToTimestamp() method has been moved to Utilities.toTimestamp()."),$.toTimestamp(e)}async _destroyInputsAndOutputs(){let e=[];return this.inputs.forEach(n=>e.push(n.destroy())),this.outputs.forEach(n=>e.push(n.destroy())),Promise.all(e).then(()=>{this._inputs=[],this._outputs=[]})}_onInterfaceStateChange(e){this._updateInputsAndOutputs();let n={timestamp:e.timeStamp,type:e.port.state,target:this};if(e.port.state==="connected"&&e.port.connection==="open"){e.port.type==="output"?n.port=this.getOutputById(e.port.id):e.port.type==="input"&&(n.port=this.getInputById(e.port.id)),this.emit(e.port.state,n);const s=Object.assign({},n);s.type="portschanged",this.emit(s.type,s)}else if(e.port.state==="disconnected"&&e.port.connection==="pending"){e.port.type==="input"?n.port=this.getInputById(e.port.id,{disconnected:!0}):e.port.type==="output"&&(n.port=this.getOutputById(e.port.id,{disconnected:!0})),this.emit(e.port.state,n);const s=Object.assign({},n);s.type="portschanged",this.emit(s.type,s)}}async _updateInputsAndOutputs(){return Promise.all([this._updateInputs(),this._updateOutputs()])}async _updateInputs(){if(!this.interface)return;for(let n=this._inputs.length-1;n>=0;n--){const s=this._inputs[n];Array.from(this.interface.inputs.values()).find(i=>i===s._midiInput)||(this._disconnectedInputs.push(s),this._inputs.splice(n,1))}let e=[];return this.interface.inputs.forEach(n=>{if(!this._inputs.find(s=>s._midiInput===n)){let s=this._disconnectedInputs.find(r=>r._midiInput===n);s||(s=new EA(n)),this._inputs.push(s),e.push(s.open())}}),Promise.all(e)}async _updateOutputs(){if(!this.interface)return;for(let n=this._outputs.length-1;n>=0;n--){const s=this._outputs[n];Array.from(this.interface.outputs.values()).find(i=>i===s._midiOutput)||(this._disconnectedOutputs.push(s),this._outputs.splice(n,1))}let e=[];return this.interface.outputs.forEach(n=>{if(!this._outputs.find(s=>s._midiOutput===n)){let s=this._disconnectedOutputs.find(r=>r._midiOutput===n);s||(s=new lc(n)),this._outputs.push(s),e.push(s.open())}}),Promise.all(e)}get enabled(){return this.interface!==null}get inputs(){return this._inputs}get isNode(){return this.validation&&console.warn("WebMidi.isNode has been deprecated. Use Utilities.isNode instead."),$.isNode}get isBrowser(){return this.validation&&console.warn("WebMidi.isBrowser has been deprecated. Use Utilities.isBrowser instead."),$.isBrowser}get octaveOffset(){return this._octaveOffset}set octaveOffset(e){if(this.validation&&(e=parseInt(e),isNaN(e)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=e}get outputs(){return this._outputs}get supported(){return typeof navigator<"u"&&!!navigator.requestMIDIAccess}get sysexEnabled(){return!!(this.interface&&this.interface.sysexEnabled)}get time(){return performance.now()}get version(){return"3.1.12"}get flavour(){return"esm"}get CHANNEL_EVENTS(){return this.validation&&console.warn("The CHANNEL_EVENTS enum has been moved to Enumerations.CHANNEL_EVENTS."),F.CHANNEL_EVENTS}get MIDI_SYSTEM_MESSAGES(){return this.validation&&console.warn("The MIDI_SYSTEM_MESSAGES enum has been moved to Enumerations.SYSTEM_MESSAGES."),F.SYSTEM_MESSAGES}get MIDI_CHANNEL_MODE_MESSAGES(){return this.validation&&console.warn("The MIDI_CHANNEL_MODE_MESSAGES enum has been moved to Enumerations.CHANNEL_MODE_MESSAGES."),F.CHANNEL_MODE_MESSAGES}get MIDI_CONTROL_CHANGE_MESSAGES(){return this.validation&&console.warn("The MIDI_CONTROL_CHANGE_MESSAGES enum has been replaced by the Enumerations.CONTROL_CHANGE_MESSAGES array."),F.MIDI_CONTROL_CHANGE_MESSAGES}get MIDI_REGISTERED_PARAMETER(){return this.validation&&console.warn("The MIDI_REGISTERED_PARAMETER enum has been moved to Enumerations.REGISTERED_PARAMETERS."),F.REGISTERED_PARAMETERS}get NOTES(){return this.validation&&console.warn("The NOTES enum has been deprecated."),["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"]}}const j=new NA;j.constructor=null;function Ap(t){return t!==null&&typeof t=="object"&&"name"in t&&typeof t.name=="string"}function Tp(t){return t!==null&&typeof t=="object"&&"step"in t&&typeof t.step=="number"&&"alt"in t&&typeof t.alt=="number"&&!isNaN(t.step)&&!isNaN(t.alt)}var Mp=[0,2,4,-1,1,3,5],Sp=Mp.map(t=>Math.floor(t*7/12));function Ep(t){const{step:e,alt:n,oct:s,dir:r=1}=t,i=Mp[e]+7*n;if(s===void 0)return[r*i];const o=s-Sp[e]-4*n;return[r*i,r*o]}var CA=[3,0,4,1,5,2,6];function xA(t){const[e,n,s]=t,r=CA[IA(e)],i=Math.floor((e+1)/7);if(n===void 0)return{step:r,alt:i,dir:s};const o=n+4*i+Sp[r];return{step:r,alt:i,oct:o,dir:s}}function IA(t){const e=(t+1)%7;return e<0?7+e:e}var Ju=(t,e)=>Array(Math.abs(e)+1).join(t),uc=Object.freeze({empty:!0,name:"",num:NaN,q:"",type:"",step:NaN,alt:NaN,dir:NaN,simple:NaN,semitones:NaN,chroma:NaN,coord:[],oct:NaN}),PA="([-+]?\\d+)(d{1,4}|m|M|P|A{1,4})",kA="(AA|A|P|M|m|d|dd)([-+]?\\d+)",OA=new RegExp("^"+PA+"|"+kA+"$");function RA(t){const e=OA.exec(`${t}`);return e===null?["",""]:e[1]?[e[1],e[2]]:[e[4],e[3]]}var Xu={};function co(t){return typeof t=="string"?Xu[t]||(Xu[t]=DA(t)):Tp(t)?co(BA(t)):Ap(t)?co(t.name):uc}var eh=[0,2,4,5,7,9,11],Np="PMMPPMM";function DA(t){const e=RA(t);if(e[0]==="")return uc;const n=+e[0],s=e[1],r=(Math.abs(n)-1)%7,i=Np[r];if(i==="M"&&s==="P")return uc;const o=i==="M"?"majorable":"perfectable",a=""+n+s,c=n<0?-1:1,l=n===8||n===-8?n:c*(r+1),u=FA(o,s),h=Math.floor((Math.abs(n)-1)/7),f=c*(eh[r]+u+12*h),d=(c*(eh[r]+u)%12+12)%12,p=Ep({step:r,alt:u,oct:h,dir:c});return{empty:!1,name:a,num:n,q:s,step:r,alt:u,dir:c,type:o,simple:l,semitones:f,chroma:d,coord:p,oct:h}}function FA(t,e){return e==="M"&&t==="majorable"||e==="P"&&t==="perfectable"?0:e==="m"&&t==="majorable"?-1:/^A+$/.test(e)?e.length:/^d+$/.test(e)?-1*(t==="perfectable"?e.length:e.length+1):0}function BA(t){const{step:e,alt:n,oct:s=0,dir:r}=t;if(!r)return"";const i=e+1+7*s,o=i===0?e+1:i,a=r<0?"-":"",c=Np[e]==="M"?"majorable":"perfectable";return a+o+VA(c,n)}function VA(t,e){return e===0?t==="majorable"?"M":"P":e===-1&&t==="majorable"?"m":e>0?Ju("A",e):Ju("d",t==="perfectable"?e:e+1)}var th=(t,e)=>Array(Math.abs(e)+1).join(t),Cp=Object.freeze({empty:!0,name:"",letter:"",acc:"",pc:"",step:NaN,alt:NaN,chroma:NaN,height:NaN,coord:[],midi:null,freq:null}),nh=new Map,LA=t=>"CDEFGAB".charAt(t),UA=t=>t<0?th("b",-t):th("#",t),jA=t=>t[0]==="b"?-t.length:t.length;function ft(t){const e=JSON.stringify(t),n=nh.get(e);if(n)return n;const s=typeof t=="string"?HA(t):Tp(t)?ft(zA(t)):Ap(t)?ft(t.name):Cp;return nh.set(e,s),s}var qA=/^([a-gA-G]?)(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)$/;function $A(t){const e=qA.exec(t);return e?[e[1].toUpperCase(),e[2].replace(/x/g,"##"),e[3],e[4]]:["","","",""]}function WA(t){return ft(xA(t))}var GA=(t,e)=>(t%e+e)%e,ma=[0,2,4,5,7,9,11];function HA(t){const e=$A(t);if(e[0]===""||e[3]!=="")return Cp;const n=e[0],s=e[1],r=e[2],i=(n.charCodeAt(0)+3)%7,o=jA(s),a=r.length?+r:void 0,c=Ep({step:i,alt:o,oct:a}),l=n+s+r,u=n+s,h=(ma[i]+o+120)%12,f=a===void 0?GA(ma[i]+o,12)-12*99:ma[i]+o+12*(a+1),d=f>=0&&f<=127?f:null,p=a===void 0?null:Math.pow(2,(f-69)/12)*440;return{empty:!1,acc:s,alt:o,chroma:h,coord:c,freq:p,height:f,letter:n,midi:d,name:l,oct:a,pc:u,step:i}}function zA(t){const{step:e,alt:n,oct:s}=t,r=LA(e);if(!r)return"";const i=r+UA(n);return s||s===0?i+s:i}function xp(t,e){const n=ft(t),s=Array.isArray(e)?e:co(e).coord;if(n.empty||!s||s.length<2)return"";const r=n.coord,i=r.length===1?[r[0]+s[0]]:[r[0]+s[0],r[1]+s[1]];return WA(i).name}function Go(t,e){const n=e.length,s=(t%n+n)%n;return e.slice(s,n).concat(e.slice(0,s))}function QA(t){return t.filter(e=>e===0||e)}var Ss={empty:!0,name:"",setNum:0,chroma:"000000000000",normalized:"000000000000",intervals:[]},Ip=t=>Number(t).toString(2).padStart(12,"0"),sh=t=>parseInt(t,2),YA=/^[01]{12}$/;function Pp(t){return YA.test(t)}var KA=t=>typeof t=="number"&&t>=0&&t<=4095,ZA=t=>t&&Pp(t.chroma),rh={[Ss.chroma]:Ss};function Ho(t){const e=Pp(t)?t:KA(t)?Ip(t):Array.isArray(t)?rT(t):ZA(t)?t.chroma:Ss.chroma;return rh[e]=rh[e]||sT(e)}var JA=["1P","2m","2M","3m","3M","4P","5d","5P","6m","6M","7m","7M"];function XA(t){const e=[];for(let n=0;n<12;n++)t.charAt(n)==="1"&&e.push(JA[n]);return e}function eT(t,e=!0){const s=Ho(t).chroma.split("");return QA(s.map((r,i)=>{const o=Go(i,s);return e&&o[0]==="0"?null:o.join("")}))}function tT(t){const e=Ho(t);return n=>{const s=ft(n);return e&&!s.empty&&e.chroma.charAt(s.chroma)==="1"}}function nT(t){const e=t.split("");return e.map((n,s)=>Go(s,e).join(""))}function sT(t){const e=sh(t),n=nT(t).map(sh).filter(i=>i>=2048).sort()[0],s=Ip(n),r=XA(t);return{empty:!1,name:"",setNum:e,chroma:t,normalized:s,intervals:r}}function rT(t){if(t.length===0)return Ss.chroma;let e;const n=[0,0,0,0,0,0,0,0,0,0,0,0];for(let s=0;s<t.length;s++)e=ft(t[s]),e.empty&&(e=co(t[s])),e.empty||(n[e.chroma]=1);return n.join("")}var iT=[["1P 3M 5P","major","M ^  maj"],["1P 3M 5P 7M","major seventh","maj7 Δ ma7 M7 Maj7 ^7"],["1P 3M 5P 7M 9M","major ninth","maj9 Δ9 ^9"],["1P 3M 5P 7M 9M 13M","major thirteenth","maj13 Maj13 ^13"],["1P 3M 5P 6M","sixth","6 add6 add13 M6"],["1P 3M 5P 6M 9M","sixth added ninth","6add9 6/9 69 M69"],["1P 3M 6m 7M","major seventh flat sixth","M7b6 ^7b6"],["1P 3M 5P 7M 11A","major seventh sharp eleventh","maj#4 Δ#4 Δ#11 M7#11 ^7#11 maj7#11"],["1P 3m 5P","minor","m min -"],["1P 3m 5P 7m","minor seventh","m7 min7 mi7 -7"],["1P 3m 5P 7M","minor/major seventh","m/ma7 m/maj7 mM7 mMaj7 m/M7 -Δ7 mΔ -^7 -maj7"],["1P 3m 5P 6M","minor sixth","m6 -6"],["1P 3m 5P 7m 9M","minor ninth","m9 -9"],["1P 3m 5P 7M 9M","minor/major ninth","mM9 mMaj9 -^9"],["1P 3m 5P 7m 9M 11P","minor eleventh","m11 -11"],["1P 3m 5P 7m 9M 13M","minor thirteenth","m13 -13"],["1P 3m 5d","diminished","dim ° o"],["1P 3m 5d 7d","diminished seventh","dim7 °7 o7"],["1P 3m 5d 7m","half-diminished","m7b5 ø -7b5 h7 h"],["1P 3M 5P 7m","dominant seventh","7 dom"],["1P 3M 5P 7m 9M","dominant ninth","9"],["1P 3M 5P 7m 9M 13M","dominant thirteenth","13"],["1P 3M 5P 7m 11A","lydian dominant seventh","7#11 7#4"],["1P 3M 5P 7m 9m","dominant flat ninth","7b9"],["1P 3M 5P 7m 9A","dominant sharp ninth","7#9"],["1P 3M 7m 9m","altered","alt7"],["1P 4P 5P","suspended fourth","sus4 sus"],["1P 2M 5P","suspended second","sus2"],["1P 4P 5P 7m","suspended fourth seventh","7sus4 7sus"],["1P 5P 7m 9M 11P","eleventh","11"],["1P 4P 5P 7m 9m","suspended fourth flat ninth","b9sus phryg 7b9sus 7b9sus4"],["1P 5P","fifth","5"],["1P 3M 5A","augmented","aug + +5 ^#5"],["1P 3m 5A","minor augmented","m#5 -#5 m+"],["1P 3M 5A 7M","augmented seventh","maj7#5 maj7+5 +maj7 ^7#5"],["1P 3M 5P 7M 9M 11A","major sharp eleventh (lydian)","maj9#11 Δ9#11 ^9#11"],["1P 2M 4P 5P","","sus24 sus4add9"],["1P 3M 5A 7M 9M","","maj9#5 Maj9#5"],["1P 3M 5A 7m","","7#5 +7 7+ 7aug aug7"],["1P 3M 5A 7m 9A","","7#5#9 7#9#5 7alt"],["1P 3M 5A 7m 9M","","9#5 9+"],["1P 3M 5A 7m 9M 11A","","9#5#11"],["1P 3M 5A 7m 9m","","7#5b9 7b9#5"],["1P 3M 5A 7m 9m 11A","","7#5b9#11"],["1P 3M 5A 9A","","+add#9"],["1P 3M 5A 9M","","M#5add9 +add9"],["1P 3M 5P 6M 11A","","M6#11 M6b5 6#11 6b5"],["1P 3M 5P 6M 7M 9M","","M7add13"],["1P 3M 5P 6M 9M 11A","","69#11"],["1P 3m 5P 6M 9M","","m69 -69"],["1P 3M 5P 6m 7m","","7b6"],["1P 3M 5P 7M 9A 11A","","maj7#9#11"],["1P 3M 5P 7M 9M 11A 13M","","M13#11 maj13#11 M13+4 M13#4"],["1P 3M 5P 7M 9m","","M7b9"],["1P 3M 5P 7m 11A 13m","","7#11b13 7b5b13"],["1P 3M 5P 7m 13M","","7add6 67 7add13"],["1P 3M 5P 7m 9A 11A","","7#9#11 7b5#9 7#9b5"],["1P 3M 5P 7m 9A 11A 13M","","13#9#11"],["1P 3M 5P 7m 9A 11A 13m","","7#9#11b13"],["1P 3M 5P 7m 9A 13M","","13#9"],["1P 3M 5P 7m 9A 13m","","7#9b13"],["1P 3M 5P 7m 9M 11A","","9#11 9+4 9#4"],["1P 3M 5P 7m 9M 11A 13M","","13#11 13+4 13#4"],["1P 3M 5P 7m 9M 11A 13m","","9#11b13 9b5b13"],["1P 3M 5P 7m 9m 11A","","7b9#11 7b5b9 7b9b5"],["1P 3M 5P 7m 9m 11A 13M","","13b9#11"],["1P 3M 5P 7m 9m 11A 13m","","7b9b13#11 7b9#11b13 7b5b9b13"],["1P 3M 5P 7m 9m 13M","","13b9"],["1P 3M 5P 7m 9m 13m","","7b9b13"],["1P 3M 5P 7m 9m 9A","","7b9#9"],["1P 3M 5P 9M","","Madd9 2 add9 add2"],["1P 3M 5P 9m","","Maddb9"],["1P 3M 5d","","Mb5"],["1P 3M 5d 6M 7m 9M","","13b5"],["1P 3M 5d 7M","","M7b5"],["1P 3M 5d 7M 9M","","M9b5"],["1P 3M 5d 7m","","7b5"],["1P 3M 5d 7m 9M","","9b5"],["1P 3M 7m","","7no5"],["1P 3M 7m 13m","","7b13"],["1P 3M 7m 9M","","9no5"],["1P 3M 7m 9M 13M","","13no5"],["1P 3M 7m 9M 13m","","9b13"],["1P 3m 4P 5P","","madd4"],["1P 3m 5P 6m 7M","","mMaj7b6"],["1P 3m 5P 6m 7M 9M","","mMaj9b6"],["1P 3m 5P 7m 11P","","m7add11 m7add4"],["1P 3m 5P 9M","","madd9"],["1P 3m 5d 6M 7M","","o7M7"],["1P 3m 5d 7M","","oM7"],["1P 3m 6m 7M","","mb6M7"],["1P 3m 6m 7m","","m7#5"],["1P 3m 6m 7m 9M","","m9#5"],["1P 3m 5A 7m 9M 11P","","m11A"],["1P 3m 6m 9m","","mb6b9"],["1P 2M 3m 5d 7m","","m9b5"],["1P 4P 5A 7M","","M7#5sus4"],["1P 4P 5A 7M 9M","","M9#5sus4"],["1P 4P 5A 7m","","7#5sus4"],["1P 4P 5P 7M","","M7sus4"],["1P 4P 5P 7M 9M","","M9sus4"],["1P 4P 5P 7m 9M","","9sus4 9sus"],["1P 4P 5P 7m 9M 13M","","13sus4 13sus"],["1P 4P 5P 7m 9m 13m","","7sus4b9b13 7b9b13sus4"],["1P 4P 7m 10m","","4 quartal"],["1P 5P 7m 9m 11P","","11b9"]],oT=iT,aT={...Ss,name:"",quality:"Unknown",intervals:[],aliases:[]},Cl=[],Br={};function ih(t){return Br[t]||aT}function cT(){return Cl.slice()}function kp(t,e,n){const s=uT(t),r={...Ho(t),name:n||"",quality:s,intervals:t,aliases:e};Cl.push(r),r.name&&(Br[r.name]=r),Br[r.setNum]=r,Br[r.chroma]=r,r.aliases.forEach(i=>lT(r,i))}function lT(t,e){Br[e]=t}function uT(t){const e=n=>t.indexOf(n)!==-1;return e("5A")?"Augmented":e("3M")?"Major":e("5d")?"Diminished":e("3m")?"Minor":"Unknown"}oT.forEach(([t,e,n])=>kp(t.split(" "),n.split(" "),e));Cl.sort((t,e)=>t.setNum-e.setNum);var hT=t=>{const e=t.reduce((n,s)=>{const r=ft(s).chroma;return r!==void 0&&(n[r]=n[r]||ft(s).name),n},{});return n=>e[n]};function fT(t,e={}){const n=t.map(r=>ft(r).pc).filter(r=>r);return ft.length===0?[]:bT(n,1,e).filter(r=>r.weight).sort((r,i)=>i.weight-r.weight).map(r=>r.name)}var zo={anyThirds:384,perfectFifth:16,nonPerfectFifths:40,anySeventh:3},Qo=t=>e=>!!(e&t),dT=Qo(zo.anyThirds),pT=Qo(zo.perfectFifth),mT=Qo(zo.anySeventh),gT=Qo(zo.nonPerfectFifths);function _T(t){const e=parseInt(t.chroma,2);return dT(e)&&pT(e)&&mT(e)}function yT(t){const e=parseInt(t,2);return gT(e)?t:(e|16).toString(2)}function bT(t,e,n){const s=t[0],r=ft(s).chroma,i=hT(t),o=eT(t,!1),a=[];return o.forEach((c,l)=>{const u=n.assumePerfectFifth&&yT(c);cT().filter(f=>n.assumePerfectFifth&&_T(f)?f.chroma===u:f.chroma===c).forEach(f=>{const d=f.aliases[0],p=i(l);l!==r?a.push({weight:.5*e,name:`${p}${d}/${s}`}):a.push({weight:1*e,name:`${p}${d}`})})}),a}var vT=[["1P 2M 3M 5P 6M","major pentatonic","pentatonic"],["1P 2M 3M 4P 5P 6M 7M","major","ionian"],["1P 2M 3m 4P 5P 6m 7m","minor","aeolian"],["1P 2M 3m 3M 5P 6M","major blues"],["1P 3m 4P 5d 5P 7m","minor blues","blues"],["1P 2M 3m 4P 5P 6M 7M","melodic minor"],["1P 2M 3m 4P 5P 6m 7M","harmonic minor"],["1P 2M 3M 4P 5P 6M 7m 7M","bebop"],["1P 2M 3m 4P 5d 6m 6M 7M","diminished","whole-half diminished"],["1P 2M 3m 4P 5P 6M 7m","dorian"],["1P 2M 3M 4A 5P 6M 7M","lydian"],["1P 2M 3M 4P 5P 6M 7m","mixolydian","dominant"],["1P 2m 3m 4P 5P 6m 7m","phrygian"],["1P 2m 3m 4P 5d 6m 7m","locrian"],["1P 3M 4P 5P 7M","ionian pentatonic"],["1P 3M 4P 5P 7m","mixolydian pentatonic","indian"],["1P 2M 4P 5P 6M","ritusen"],["1P 2M 4P 5P 7m","egyptian"],["1P 3M 4P 5d 7m","neopolitan major pentatonic"],["1P 3m 4P 5P 6m","vietnamese 1"],["1P 2m 3m 5P 6m","pelog"],["1P 2m 4P 5P 6m","kumoijoshi"],["1P 2M 3m 5P 6m","hirajoshi"],["1P 2m 4P 5d 7m","iwato"],["1P 2m 4P 5P 7m","in-sen"],["1P 3M 4A 5P 7M","lydian pentatonic","chinese"],["1P 3m 4P 6m 7m","malkos raga"],["1P 3m 4P 5d 7m","locrian pentatonic","minor seven flat five pentatonic"],["1P 3m 4P 5P 7m","minor pentatonic","vietnamese 2"],["1P 3m 4P 5P 6M","minor six pentatonic"],["1P 2M 3m 5P 6M","flat three pentatonic","kumoi"],["1P 2M 3M 5P 6m","flat six pentatonic"],["1P 2m 3M 5P 6M","scriabin"],["1P 3M 5d 6m 7m","whole tone pentatonic"],["1P 3M 4A 5A 7M","lydian #5P pentatonic"],["1P 3M 4A 5P 7m","lydian dominant pentatonic"],["1P 3m 4P 5P 7M","minor #7M pentatonic"],["1P 3m 4d 5d 7m","super locrian pentatonic"],["1P 2M 3m 4P 5P 7M","minor hexatonic"],["1P 2A 3M 5P 5A 7M","augmented"],["1P 2M 4P 5P 6M 7m","piongio"],["1P 2m 3M 4A 6M 7m","prometheus neopolitan"],["1P 2M 3M 4A 6M 7m","prometheus"],["1P 2m 3M 5d 6m 7m","mystery #1"],["1P 2m 3M 4P 5A 6M","six tone symmetric"],["1P 2M 3M 4A 5A 6A","whole tone","messiaen's mode #1"],["1P 2m 4P 4A 5P 7M","messiaen's mode #5"],["1P 2M 3M 4P 5d 6m 7m","locrian major","arabian"],["1P 2m 3M 4A 5P 6m 7M","double harmonic lydian"],["1P 2m 2A 3M 4A 6m 7m","altered","super locrian","diminished whole tone","pomeroy"],["1P 2M 3m 4P 5d 6m 7m","locrian #2","half-diminished","aeolian b5"],["1P 2M 3M 4P 5P 6m 7m","mixolydian b6","melodic minor fifth mode","hindu"],["1P 2M 3M 4A 5P 6M 7m","lydian dominant","lydian b7","overtone"],["1P 2M 3M 4A 5A 6M 7M","lydian augmented"],["1P 2m 3m 4P 5P 6M 7m","dorian b2","phrygian #6","melodic minor second mode"],["1P 2m 3m 4d 5d 6m 7d","ultralocrian","superlocrian bb7","superlocrian diminished"],["1P 2m 3m 4P 5d 6M 7m","locrian 6","locrian natural 6","locrian sharp 6"],["1P 2A 3M 4P 5P 5A 7M","augmented heptatonic"],["1P 2M 3m 4A 5P 6M 7m","dorian #4","ukrainian dorian","romanian minor","altered dorian"],["1P 2M 3m 4A 5P 6M 7M","lydian diminished"],["1P 2M 3M 4A 5A 7m 7M","leading whole tone"],["1P 2M 3M 4A 5P 6m 7m","lydian minor"],["1P 2m 3M 4P 5P 6m 7m","phrygian dominant","spanish","phrygian major"],["1P 2m 3m 4P 5P 6m 7M","balinese"],["1P 2m 3m 4P 5P 6M 7M","neopolitan major"],["1P 2M 3M 4P 5P 6m 7M","harmonic major"],["1P 2m 3M 4P 5P 6m 7M","double harmonic major","gypsy"],["1P 2M 3m 4A 5P 6m 7M","hungarian minor"],["1P 2A 3M 4A 5P 6M 7m","hungarian major"],["1P 2m 3M 4P 5d 6M 7m","oriental"],["1P 2m 3m 3M 4A 5P 7m","flamenco"],["1P 2m 3m 4A 5P 6m 7M","todi raga"],["1P 2m 3M 4P 5d 6m 7M","persian"],["1P 2m 3M 5d 6m 7m 7M","enigmatic"],["1P 2M 3M 4P 5A 6M 7M","major augmented","major #5","ionian augmented","ionian #5"],["1P 2A 3M 4A 5P 6M 7M","lydian #9"],["1P 2m 2M 4P 4A 5P 6m 7M","messiaen's mode #4"],["1P 2m 3M 4P 4A 5P 6m 7M","purvi raga"],["1P 2m 3m 3M 4P 5P 6m 7m","spanish heptatonic"],["1P 2M 3m 3M 4P 5P 6M 7m","bebop minor"],["1P 2M 3M 4P 5P 5A 6M 7M","bebop major"],["1P 2m 3m 4P 5d 5P 6m 7m","bebop locrian"],["1P 2M 3m 4P 5P 6m 7m 7M","minor bebop"],["1P 2M 3M 4P 5d 5P 6M 7M","ichikosucho"],["1P 2M 3m 4P 5P 6m 6M 7M","minor six diminished"],["1P 2m 3m 3M 4A 5P 6M 7m","half-whole diminished","dominant diminished","messiaen's mode #2"],["1P 3m 3M 4P 5P 6M 7m 7M","kafi raga"],["1P 2M 3M 4P 4A 5A 6A 7M","messiaen's mode #6"],["1P 2M 3m 3M 4P 5d 5P 6M 7m","composite blues"],["1P 2M 3m 3M 4A 5P 6m 7m 7M","messiaen's mode #3"],["1P 2m 2M 3m 4P 4A 5P 6m 6M 7M","messiaen's mode #7"],["1P 2m 2M 3m 3M 4P 5d 5P 6m 6M 7m 7M","chromatic"]],wT=vT,AT={...Ss,intervals:[],aliases:[]},Vr={};function Jr(t){return Vr[t]||AT}function TT(t,e,n=[]){const s={...Ho(t),name:e,intervals:t,aliases:n};return Vr[s.name]=s,Vr[s.setNum]=s,Vr[s.chroma]=s,s.aliases.forEach(r=>MT(s,r)),s}function MT(t,e){Vr[e]=t}wT.forEach(([t,e,...n])=>TT(t.split(" "),e,n));var ST="C C# D D# E F F# G G# A A# B".split(" "),ET="C Db D Eb E F Gb G Ab A Bb B".split(" ");function NT(t,e={}){if(isNaN(t)||t===-1/0||t===1/0)return"";t=Math.round(t);const s=(e.sharps===!0?ST:ET)[t%12];if(e.pitchClass)return s;const r=Math.floor(t/12)-1;return s+r}var CT=t=>t.name,xT=t=>t.map(ft).filter(e=>!e.empty),IT=ft,oh=t=>IT(t).pc,Op=(t,e)=>t.height-e.height;function PT(t,e){return e=e||Op,xT(t).sort(e).map(CT)}function kT(t){return PT(t,Op).filter((e,n,s)=>n===0||e!==s[n-1])}var xl=[[0,2773,0,"ionian","","Maj7","major"],[1,2902,2,"dorian","m","m7"],[2,3418,4,"phrygian","m","m7"],[3,2741,-1,"lydian","","Maj7"],[4,2774,1,"mixolydian","","7"],[5,2906,3,"aeolian","m","m7","minor"],[6,3434,5,"locrian","dim","m7b5"]],ah={...Ss,name:"",alt:0,modeNum:NaN,triad:"",seventh:"",aliases:[]},OT=xl.map(RT),hc={};OT.forEach(t=>{hc[t.name]=t,t.aliases.forEach(e=>{hc[e]=t})});function Rp(t){return typeof t=="string"?hc[t.toLowerCase()]||ah:t&&t.name?Rp(t.name):ah}function RT(t){const[e,n,s,r,i,o,a]=t,c=a?[a]:[],l=Number(n).toString(2);return{empty:!1,intervals:Jr(r).intervals,modeNum:e,chroma:l,normalized:l,name:r,setNum:n,alt:s,triad:i,seventh:o,aliases:c}}function Dp(t){return(e,n)=>{const s=Rp(e);if(s.empty)return[];const r=Go(s.modeNum,t),i=s.intervals.map(o=>xp(n,o));return r.map((o,a)=>i[a]+o)}}Dp(xl.map(t=>t[4]));Dp(xl.map(t=>t[5]));var DT={empty:!0,name:"",type:"",tonic:null,setNum:NaN,chroma:"",normalized:"",aliases:[],notes:[],intervals:[]};function FT(t){if(typeof t!="string")return["",""];const e=t.indexOf(" "),n=ft(t.substring(0,e));if(n.empty){const r=ft(t);return r.empty?["",t]:[r.name,""]}const s=t.substring(n.name.length+1).toLowerCase();return[n.name,s.length?s:""]}function BT(t){const e=Array.isArray(t)?t:FT(t),n=ft(e[0]).name,s=Jr(e[1]);if(s.empty)return DT;const r=s.name,i=n?s.intervals.map(a=>xp(n,a)):[],o=n?n+" "+r:r;return{...s,name:o,type:r,tonic:n,notes:i}}function VT(t){const e=t.map(r=>ft(r).pc).filter(r=>r),n=e[0],s=kT(e);return Go(s.indexOf(n),s)}const Fs={KeyQ:{note:"F",offset:1},Digit2:{note:"F#",offset:1},KeyW:{note:"G",offset:1},Digit3:{note:"G#",offset:1},KeyE:{note:"A",offset:1},Digit4:{note:"A#",offset:1},KeyR:{note:"B",offset:1},KeyT:{note:"C",offset:2},Digit6:{note:"C#",offset:2},KeyY:{note:"D",offset:2},Digit7:{note:"D#",offset:2},KeyU:{note:"E",offset:2},KeyI:{note:"F",offset:2},Digit9:{note:"F#",offset:2},KeyO:{note:"G",offset:2},Digit0:{note:"G#",offset:2},KeyP:{note:"A",offset:2},Minus:{note:"A#",offset:2},BracketLeft:{note:"B",offset:2},BracketRIght:{note:"C",offset:3},KeyZ:{note:"C",offset:0},KeyS:{note:"C#",offset:0},KeyX:{note:"D",offset:0},KeyD:{note:"D#",offset:0},KeyC:{note:"E",offset:0},KeyV:{note:"F",offset:0},KeyG:{note:"F#",offset:0},KeyB:{note:"G",offset:0},KeyH:{note:"G#",offset:0},KeyN:{note:"A",offset:0},KeyJ:{note:"A#",offset:0},KeyM:{note:"B",offset:0},Comma:{note:"C",offset:1},KeyL:{note:"C#",offset:1},Period:{note:"D",offset:1},Semicolon:{note:"D#",offset:1},Slash:{note:"E",offset:1}};function LT(){document.addEventListener("keydown",t=>{t.code=="Digit1"&&se.offset--,t.code=="Equal"&&se.offset++,!(t.repeat||!se.keyboard||!Fs[t.code])&&(t.ctrlKey||t.altKey||t.metaKey||(t.code=="Slash"&&t.preventDefault(),lo(Fs[t.code].note+(Fs[t.code].offset+4+se.offset),1)))}),document.addEventListener("keyup",t=>{Fs[t.code]&&lo(Fs[t.code].note+(Fs[t.code].offset+4+se.offset),0)})}function UT(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function jT(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function s(){return this instanceof s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(s){var r=Object.getOwnPropertyDescriptor(t,s);Object.defineProperty(n,s,r.get?r:{enumerable:!0,get:function(){return t[s]}})}),n}var fc={exports:{}},qT=fc.exports,ch;function $T(){return ch||(ch=1,function(t,e){(function(n,s){t.exports=s()})(qT,function(){const n=(a,c,l,u)=>{const h=(c*l+2*a)/l**3,f=-(2*c*l+3*a)/l**2,d=c,p=a;return h*u**3+f*u**2+d*u+p},s=(a,c,l,u)=>{const h=(c*l+2*a)/l**3,f=-(2*c*l+3*a)/l**2,d=c;return 3*h*u**2+2*f*u+d},r=function(a,c){Object.entries(typeof a=="number"?{value:a}:a).map(([l,u])=>c(u,l))};function i(a,c){this.start=new Date/1e3,this.time=c,this.from=a,this.current=a,this.to=a,this.speed=0}i.prototype.get=function(a){const c=a/1e3-this.start;if(c<0)throw new Error("Cannot read in the past");return c>=this.time?this.to:this.to-n(this.to-this.from,this.speed,this.time,c)},i.prototype.getSpeed=function(a){const c=a/1e3-this.start;return c>=this.time?0:s(this.to-this.from,this.speed,this.time,c)},i.prototype.set=function(a,c){const l=new Date,u=this.get(l);return this.speed=this.getSpeed(l),this.start=l/1e3,this.from=u,this.to=a,c&&(this.time=c),u};function o(a,c=300){return typeof a=="number"&&(a={value:a}),r(a,(l,u)=>{const h=new i(l,c/1e3);Object.defineProperty(a,"_"+u,{value:h}),Object.defineProperty(a,"$"+u,{get:()=>h.to}),Object.defineProperty(a,u,{get:()=>h.get(new Date),set:f=>h.set(f),enumerable:!0})}),Object.defineProperty(a,"get",{get:()=>function(l="value",u=new Date){return this["_"+l].get(u)}}),Object.defineProperty(a,"set",{get:()=>function(l,u=0){r(l,(h,f)=>{this["_"+f].set(h,u/1e3)})}}),a}return o})}(fc)),fc.exports}var WT=$T();const GT=UT(WT),HT="global-midi-channel",zT="global-midi-filter",se=He({enabled:!1,initiated:!1,playing:!1,stopped:!1,out:!0,channel:Mt(HT,1),note:{pitch:0,channel:1,velocity:0},offset:Tn(0,-3,3),keyboard:!0,cc:{},ccLearn:{},filter:Mt(zT,{}),monoAftertouch:{},polyAftertouch:{},pitchbend:{}}),At=He({}),nn=Mn({}),Yo=Mn({}),QT=Ze(null),Fp=Ze(0),Fi=Mn([]),YT=Mn({}),KT=pe(()=>Object.keys(Yo).length>0),Ko=pe(()=>Object.values(At).reduce((t,e)=>({...t,...e.activeNotes}),{})),ZT=pe(()=>{const t=new Array(12).fill(0);return Object.keys(Ko.value).forEach(e=>{const n=(Number(e)-9)%12;t[n]=1}),t.join("")}),JT=pe(()=>{const t=Object.keys(Ko.value).map(e=>NT(Number(e),{sharps:!0}));return t.length>2?fT(t):[]}),XT=pe(()=>{const t=new Array(12).fill(0);return Object.keys(Ko.value).forEach(e=>{const n=(Number(e)-9)%12;t[n]=Number(e)}),t});function Il(t=69,e=0,n=1,s=!0){requestAnimationFrame(()=>{const r=new ys(t,{attack:e,release:e,duration:n});dc({type:e==0?"noteoff":"noteon",note:r,port:{id:"Chromatone.center"},timestamp:Fp.value,target:{number:0},channel:0,message:{}}),s&&(e>0?Pl(r.number,{attack:e}):kl(r.number,{attack:e}))})}function eM(){return se.initiated||(se.initiated=!0,ti(()=>{LT(),nM()}),i0(()=>{if(!se.out)return;const t=se.playing?"sendContinue":"sendStop";Object.values(j.outputs).forEach(e=>e[t]())}),se.stopped=!1),{log:Fi,midi:se,clock:Fp,channels:At,inputs:nn,outputs:Yo,forwards:YT,activeNotes:Ko,available:KT,guessChords:JT,activeChroma:ZT,activeChromaMidi:XT,midiAttack:mM,midiRelease:gM,midiOnce:_M,setCC:yM,midiPlay:Pl,midiStop:kl,playKey:Il,stopAll:Ol,getPitchBend:pM,sendPitchBend:bM,getMonoAftertouch:t=>se.monoAftertouch[t]||0,getPolyAftertouch:(t,e)=>{var n;return((n=se.polyAftertouch[t])==null?void 0:n[e])||0}}}async function tM(){if(navigator.permissions)try{const t=await navigator.permissions.query({name:"midi",sysex:!0});return t.addEventListener("change",e=>console.log(e)),t.state==="granted"?!0:t.state==="prompt"?null:!1}catch(t){console.error("Error checking MIDI permission:",t)}return null}async function nM(){if(await tM()===!1){console.error("MIDI permission denied. Please enable MIDI access in your browser settings.");return}try{await j.enable({sysex:!0}),se.enabled=!0,lh(),j.addListener("connected",lh),j.addListener("disconnected",fM)}catch(t){console.error("Failed to enable WebMidi:",t)}}function lh(){se.enabled=!0,j.inputs.forEach(sM),j.outputs.forEach(hM)}function sM(t){nn[t.id]={name:t.name,manufacturer:t.manufacturer,forwarder:t.addForwarder(),clock:0,event:null,note:null,cc:null},t.removeListener(),rM(t)}function rM(t){Object.entries({start:()=>{se.playing=!0,se.stopped=!1},stop:()=>{se.playing=!1,se.stopped=Date.now()},clock:iM(t),midimessage:oM(t),noteon:e=>nn[t.id].note=dc(e),noteoff:e=>nn[t.id].note=dc(e),controlchange:aM(t),channelaftertouch:lM(),keyaftertouch:uM(),pitchbend:cM()}).forEach(([e,n])=>{t.addListener(e,n)})}function iM(t){const e=[],n=GT({value:15});return s=>{const r=s.timestamp-nn[t.id].clock;e.push(r),e.length>50&&e.shift(),n.value=e.reduce((i,o)=>i+o,0)/e.length,nn[t.id].diff=n.value,nn[t.id].bpm=1e3/n.value/24*60,nn[t.id].clock=s.timestamp}}function oM(t){return e=>{var n;((n=e==null?void 0:e.message)==null?void 0:n.type)!=="clock"&&(nn[t.id].event=e,QT.value=e.message,Fi.unshift(e),Fi.length>100&&Fi.pop())}}function aM(t){return e=>{const n=dM(e);n&&(nn[t.id].cc=n,se.cc=n)}}function cM(t){return e=>{se.pitchbend[e.port.name]=e.value}}function lM(t){return e=>{let n=e.channel||0;Zo(n),se.monoAftertouch[n]=e.value,At[n].monoAftertouch=e.value}}function uM(t){return e=>{let n=e.channel||0;Zo(n),se.polyAftertouch[n]||(se.polyAftertouch[n]={}),se.polyAftertouch[n][e.note.number]=e.value,At[n].polyAftertouch[e.note.number]=e.value}}function hM(t){Yo[t.id]={name:t.name,manufacturer:t.manufacturer}}function fM(t){t.port.type=="input"?delete nn[t.port.id]:t.port.type=="output"&&delete Yo[t.port.id]}function dc(t){var e;const n={...t.note,port:t.port.id,type:t.type,timestamp:t.timestamp,channel:t.target.number,velocity:0,number:t.note.number,pitch:(t.note.number+3)%12,octA:Math.floor((t.note.number+3)/12)-1};if(!se.filter[n.channel])return Zo(n.channel),At[n.channel].notes[n.number]=n,t.type==="noteoff"?(n.velocity=0,delete At[n.channel].activeNotes[n.number],(e=se.polyAftertouch[n.channel])==null||delete e[n.number]):(n.velocity=120*(t.note.attack||1),At[n.channel].activeNotes[n.number]=t.note.attack),se.note=n,n}function dM(t){if(se.filter[t.message.channel])return;const e={channel:t.message.channel,timestamp:t.timestamp,number:t.controller.number,value:Number(t.value),raw:t.rawValue,port:t.port.id};return Zo(e.channel),At[e.channel].cc[e.number]=e,e}function Zo(t){At[t]||(At[t]=He({num:t,activeNotes:{},notes:{},cc:{},monoAftertouch:0,polyAftertouch:{},pitchbend:0}))}function pM(t){return se.pitchbend[t]||0}function Bp(t,e,n){At[t]=At[t]||{notes:{}},At[t].notes[e]=At[t].notes[e]||{velocity:0},At[t].notes[e].velocity=n}function mM(t,e,n=100){if(!se.out)return;const s=(t==null?void 0:t.channel)||se.channel;Bp(s,t==null?void 0:t.number,n),j.outputs.forEach(r=>{r.playNote(t.number,{channels:s,...e})})}function Pl(t,e){se.out&&j.outputs.forEach(n=>{n.playNote(t,{channels:se.channel,...e})})}function kl(t,e){se.out&&(t?j.outputs.forEach(n=>{n.stopNote(t,{channels:se.channel,...e})}):(j.outputs.forEach(n=>{n.sendAllNotesOff(),n.sendAllSoundOff({time:"+1"})}),se.stopped=!0))}function gM(t){if(se.out)if(t){const e=(t==null?void 0:t.channel)||se.channel;Bp(e,t==null?void 0:t.number,0),j.outputs.forEach(n=>{n.stopNote(t.number,{channels:e})})}else j.outputs.forEach(e=>{e.sendAllNotesOff(),e.sendAllSoundOff({time:"+1"})})}function _M(t,e,n=300){!se.out||se.filter[se.channel]||(Pl(t,e),setTimeout(()=>{kl(t,e)},n))}function yM(t,e){se.out&&j.outputs.forEach(n=>{n.sendControlChange(Number(t.number),e,t.channel)})}function bM(t,e={}){if(!se.out)return;const n=e.channel||se.channel;j.outputs.forEach(s=>{s.sendPitchBend(t,{channels:n,...e})})}function Ol(){se.out&&(Object.assign(At,{}),se.monoAftertouch={},se.polyAftertouch={},se.playing=!1,j.outputs.forEach(t=>{t.sendAllNotesOff(),t.sendAllSoundOff(),t.sendReset(),t.sendSongPosition(0),t.sendPitchBend(0)}),se.stopped=!0)}function lo(t,e=.9){Array.isArray(t)?t.forEach(n=>lo(n)):Il($.guessNoteNumber(t),e)}function Vp(t){if(!t){Ol();return}Array.isArray(t)?t.forEach(e=>Vp(e)):Il($.guessNoteNumber(t),0)}const uh={"minor second":[["1P","2m"],["2m"]],"major second":[["1P","2M"],["2M"]],"minor third":[["1P","3m"],["3m"]],"major third":[["1P","3M"],["3M"]],"perfect fourth":[["1P","4P"],["4P"]],tritone:[["1P","5d"],["TT"]],"perfect fifth":[["1P","5P"],["5P"]],"minor sixth":[["1P","6m"],["6m"]],"major sixth":[["1P","6M"],["6M"]],"minor seventh":[["1P","7m"],["7m"]],"major seventh":[["1P","7M"],["7M"]]},Lp=["A","A#","B","C","C#","D","D#","E","F","F#","G","G#"],vM=["G##","A#","A##","B#","C#","C##","D#","D##","E#","F#","F##","G#"],Up=["Bbb","Bb","Cb","Dbb","Db","Ebb","Eb","Fb","Gbb","Gb","Abb","Ab"];[...Lp,...vM,...Up];const $s=Lp;for(let t in uh)kp(...uh[t],t);const wM=[...$s].map((t,e)=>({name:t,pitch:e})),yt=He({tonic:Tn(Mt("global-tonic",0),0,11),note:pe(()=>wM[yt.tonic]),chroma:Mt("global-chroma","101011010101"),set:pe(()=>Jr(yt.chroma)),full:pe(()=>{let t=yt.note.name+"4 "+yt.set.name;return BT(t)}),pcs:pe(()=>VT(yt.full.notes)),isIn:pe(()=>tT(yt.pcs))});function jp(t=yt.chroma,e=yt.tonic,n=0){const s=Array(12).fill(!0).map((r,i)=>i+e+57).filter((r,i)=>{if(Xs(t.split(""),-e)[i]=="1")return!0});return n<=0||n>=s.length?s:[...s.slice(n),...s.slice(0,n)].map((r,i)=>i>=s.length-n?r+12:r)}function AM(t,e,n){lo(jp(t,e,n))}function ga(t,e,n){Vp(jp(t,e,n))}var TM={grad:.9,turn:360,rad:360/(2*Math.PI)},On=function(t){return typeof t=="string"?t.length>0:typeof t=="number"},ot=function(t,e,n){return e===void 0&&(e=0),n===void 0&&(n=Math.pow(10,e)),Math.round(n*t)/n+0},zt=function(t,e,n){return e===void 0&&(e=0),n===void 0&&(n=1),t>n?n:t>e?t:e},qp=function(t){return(t=isFinite(t)?t%360:0)>0?t:t+360},hh=function(t){return{r:zt(t.r,0,255),g:zt(t.g,0,255),b:zt(t.b,0,255),a:zt(t.a)}},_a=function(t){return{r:ot(t.r),g:ot(t.g),b:ot(t.b),a:ot(t.a,3)}},MM=/^#([0-9a-f]{3,8})$/i,Ei=function(t){var e=t.toString(16);return e.length<2?"0"+e:e},$p=function(t){var e=t.r,n=t.g,s=t.b,r=t.a,i=Math.max(e,n,s),o=i-Math.min(e,n,s),a=o?i===e?(n-s)/o:i===n?2+(s-e)/o:4+(e-n)/o:0;return{h:60*(a<0?a+6:a),s:i?o/i*100:0,v:i/255*100,a:r}},Wp=function(t){var e=t.h,n=t.s,s=t.v,r=t.a;e=e/360*6,n/=100,s/=100;var i=Math.floor(e),o=s*(1-n),a=s*(1-(e-i)*n),c=s*(1-(1-e+i)*n),l=i%6;return{r:255*[s,a,o,o,c,s][l],g:255*[c,s,s,a,o,o][l],b:255*[o,o,c,s,s,a][l],a:r}},fh=function(t){return{h:qp(t.h),s:zt(t.s,0,100),l:zt(t.l,0,100),a:zt(t.a)}},dh=function(t){return{h:ot(t.h),s:ot(t.s),l:ot(t.l),a:ot(t.a,3)}},ph=function(t){return Wp((n=(e=t).s,{h:e.h,s:(n*=((s=e.l)<50?s:100-s)/100)>0?2*n/(s+n)*100:0,v:s+n,a:e.a}));var e,n,s},Lr=function(t){return{h:(e=$p(t)).h,s:(r=(200-(n=e.s))*(s=e.v)/100)>0&&r<200?n*s/100/(r<=100?r:200-r)*100:0,l:r/2,a:e.a};var e,n,s,r},SM=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,EM=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,NM=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,CM=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,pc={string:[[function(t){var e=MM.exec(t);return e?(t=e[1]).length<=4?{r:parseInt(t[0]+t[0],16),g:parseInt(t[1]+t[1],16),b:parseInt(t[2]+t[2],16),a:t.length===4?ot(parseInt(t[3]+t[3],16)/255,2):1}:t.length===6||t.length===8?{r:parseInt(t.substr(0,2),16),g:parseInt(t.substr(2,2),16),b:parseInt(t.substr(4,2),16),a:t.length===8?ot(parseInt(t.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(t){var e=NM.exec(t)||CM.exec(t);return e?e[2]!==e[4]||e[4]!==e[6]?null:hh({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(t){var e=SM.exec(t)||EM.exec(t);if(!e)return null;var n,s,r=fh({h:(n=e[1],s=e[2],s===void 0&&(s="deg"),Number(n)*(TM[s]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return ph(r)},"hsl"]],object:[[function(t){var e=t.r,n=t.g,s=t.b,r=t.a,i=r===void 0?1:r;return On(e)&&On(n)&&On(s)?hh({r:Number(e),g:Number(n),b:Number(s),a:Number(i)}):null},"rgb"],[function(t){var e=t.h,n=t.s,s=t.l,r=t.a,i=r===void 0?1:r;if(!On(e)||!On(n)||!On(s))return null;var o=fh({h:Number(e),s:Number(n),l:Number(s),a:Number(i)});return ph(o)},"hsl"],[function(t){var e=t.h,n=t.s,s=t.v,r=t.a,i=r===void 0?1:r;if(!On(e)||!On(n)||!On(s))return null;var o=function(a){return{h:qp(a.h),s:zt(a.s,0,100),v:zt(a.v,0,100),a:zt(a.a)}}({h:Number(e),s:Number(n),v:Number(s),a:Number(i)});return Wp(o)},"hsv"]]},mh=function(t,e){for(var n=0;n<e.length;n++){var s=e[n][0](t);if(s)return[s,e[n][1]]}return[null,void 0]},xM=function(t){return typeof t=="string"?mh(t.trim(),pc.string):typeof t=="object"&&t!==null?mh(t,pc.object):[null,void 0]},ya=function(t,e){var n=Lr(t);return{h:n.h,s:zt(n.s+100*e,0,100),l:n.l,a:n.a}},ba=function(t){return(299*t.r+587*t.g+114*t.b)/1e3/255},gh=function(t,e){var n=Lr(t);return{h:n.h,s:n.s,l:zt(n.l+100*e,0,100),a:n.a}},mc=function(){function t(e){this.parsed=xM(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return t.prototype.isValid=function(){return this.parsed!==null},t.prototype.brightness=function(){return ot(ba(this.rgba),2)},t.prototype.isDark=function(){return ba(this.rgba)<.5},t.prototype.isLight=function(){return ba(this.rgba)>=.5},t.prototype.toHex=function(){return e=_a(this.rgba),n=e.r,s=e.g,r=e.b,o=(i=e.a)<1?Ei(ot(255*i)):"","#"+Ei(n)+Ei(s)+Ei(r)+o;var e,n,s,r,i,o},t.prototype.toRgb=function(){return _a(this.rgba)},t.prototype.toRgbString=function(){return e=_a(this.rgba),n=e.r,s=e.g,r=e.b,(i=e.a)<1?"rgba("+n+", "+s+", "+r+", "+i+")":"rgb("+n+", "+s+", "+r+")";var e,n,s,r,i},t.prototype.toHsl=function(){return dh(Lr(this.rgba))},t.prototype.toHslString=function(){return e=dh(Lr(this.rgba)),n=e.h,s=e.s,r=e.l,(i=e.a)<1?"hsla("+n+", "+s+"%, "+r+"%, "+i+")":"hsl("+n+", "+s+"%, "+r+"%)";var e,n,s,r,i},t.prototype.toHsv=function(){return e=$p(this.rgba),{h:ot(e.h),s:ot(e.s),v:ot(e.v),a:ot(e.a,3)};var e},t.prototype.invert=function(){return Fe({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},t.prototype.saturate=function(e){return e===void 0&&(e=.1),Fe(ya(this.rgba,e))},t.prototype.desaturate=function(e){return e===void 0&&(e=.1),Fe(ya(this.rgba,-e))},t.prototype.grayscale=function(){return Fe(ya(this.rgba,-1))},t.prototype.lighten=function(e){return e===void 0&&(e=.1),Fe(gh(this.rgba,e))},t.prototype.darken=function(e){return e===void 0&&(e=.1),Fe(gh(this.rgba,-e))},t.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},t.prototype.alpha=function(e){return typeof e=="number"?Fe({r:(n=this.rgba).r,g:n.g,b:n.b,a:e}):ot(this.rgba.a,3);var n},t.prototype.hue=function(e){var n=Lr(this.rgba);return typeof e=="number"?Fe({h:e,s:n.s,l:n.l,a:n.a}):ot(n.h)},t.prototype.isEqual=function(e){return this.toHex()===Fe(e).toHex()},t}(),Fe=function(t){return t instanceof mc?t:new mc(t)},_h=[],IM=function(t){t.forEach(function(e){_h.indexOf(e)<0&&(e(mc,pc),_h.push(e))})},PM={grad:.9,turn:360,rad:360/(2*Math.PI)},va=function(t){return typeof t=="string"?t.length>0:typeof t=="number"},Ws=function(t,e,n){return e===void 0&&(e=0),n===void 0&&(n=Math.pow(10,e)),Math.round(n*t)/n+0},Vn=function(t,e,n){return e===void 0&&(e=0),n===void 0&&(n=1),t>n?n:t>e?t:e},wa=function(t){var e=t/255;return e<.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)},Aa=function(t){return 255*(t>.0031308?1.055*Math.pow(t,1/2.4)-.055:12.92*t)},Rl=96.422,Dl=100,Fl=82.521,kM=function(t){var e,n,s={x:.9555766*(e=t).x+-.0230393*e.y+.0631636*e.z,y:-.0282895*e.x+1.0099416*e.y+.0210077*e.z,z:.0122982*e.x+-.020483*e.y+1.3299098*e.z};return n={r:Aa(.032404542*s.x-.015371385*s.y-.004985314*s.z),g:Aa(-.00969266*s.x+.018760108*s.y+41556e-8*s.z),b:Aa(556434e-9*s.x-.002040259*s.y+.010572252*s.z),a:t.a},{r:Vn(n.r,0,255),g:Vn(n.g,0,255),b:Vn(n.b,0,255),a:Vn(n.a)}},OM=function(t){var e=wa(t.r),n=wa(t.g),s=wa(t.b);return function(r){return{x:Vn(r.x,0,Rl),y:Vn(r.y,0,Dl),z:Vn(r.z,0,Fl),a:Vn(r.a)}}(function(r){return{x:1.0478112*r.x+.0228866*r.y+-.050127*r.z,y:.0295424*r.x+.9904844*r.y+-.0170491*r.z,z:-.0092345*r.x+.0150436*r.y+.7521316*r.z,a:r.a}}({x:100*(.4124564*e+.3575761*n+.1804375*s),y:100*(.2126729*e+.7151522*n+.072175*s),z:100*(.0193339*e+.119192*n+.9503041*s),a:t.a}))},Ur=216/24389,er=24389/27,Gp=function(t){return{l:Vn(t.l,0,100),c:t.c,h:(e=t.h,(e=isFinite(e)?e%360:0)>0?e:e+360),a:t.a};var e},yh=function(t){return{l:Ws(t.l,2),c:Ws(t.c,2),h:Ws(t.h,2),a:Ws(t.a,3)}},RM=function(t){var e=t.l,n=t.c,s=t.h,r=t.a,i=r===void 0?1:r;if(!va(e)||!va(n)||!va(s))return null;var o=Gp({l:Number(e),c:Number(n),h:Number(s),a:Number(i)});return Hp(o)},bh=function(t){var e=function(i){var o=OM(i),a=o.x/Rl,c=o.y/Dl,l=o.z/Fl;return a=a>Ur?Math.cbrt(a):(er*a+16)/116,{l:116*(c=c>Ur?Math.cbrt(c):(er*c+16)/116)-16,a:500*(a-c),b:200*(c-(l=l>Ur?Math.cbrt(l):(er*l+16)/116)),alpha:o.a}}(t),n=Ws(e.a,3),s=Ws(e.b,3),r=Math.atan2(s,n)/Math.PI*180;return{l:e.l,c:Math.sqrt(n*n+s*s),h:r<0?r+360:r,a:e.alpha}},Hp=function(t){return e={l:t.l,a:t.c*Math.cos(t.h*Math.PI/180),b:t.c*Math.sin(t.h*Math.PI/180),alpha:t.a},s=e.a/500+(n=(e.l+16)/116),r=n-e.b/200,kM({x:(Math.pow(s,3)>Ur?Math.pow(s,3):(116*s-16)/er)*Rl,y:(e.l>8?Math.pow((e.l+16)/116,3):e.l/er)*Dl,z:(Math.pow(r,3)>Ur?Math.pow(r,3):(116*r-16)/er)*Fl,a:e.alpha});var e,n,s,r},DM=/^lch\(\s*([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)\s+([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,FM=function(t){var e=DM.exec(t);if(!e)return null;var n,s,r=Gp({l:Number(e[1]),c:Number(e[2]),h:(n=e[3],s=e[4],s===void 0&&(s="deg"),Number(n)*(PM[s]||1)),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return Hp(r)};function BM(t,e){t.prototype.toLch=function(){return yh(bh(this.rgba))},t.prototype.toLchString=function(){return n=yh(bh(this.rgba)),s=n.l,r=n.c,i=n.h,(o=n.a)<1?"lch("+s+"% "+r+" "+i+" / "+o+")":"lch("+s+"% "+r+" "+i+")";var n,s,r,i,o},e.string.push([FM,"lch"]),e.object.push([RM,"lch"])}var bn=function(t,e,n){return e===void 0&&(e=0),n===void 0&&(n=1),t>n?n:t>e?t:e},Ta=function(t){var e=t/255;return e<.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)},Ma=function(t){return 255*(t>.0031308?1.055*Math.pow(t,1/2.4)-.055:12.92*t)},Bl=96.422,Vl=100,Ll=82.521,VM=function(t){var e,n,s={x:.9555766*(e=t).x+-.0230393*e.y+.0631636*e.z,y:-.0282895*e.x+1.0099416*e.y+.0210077*e.z,z:.0122982*e.x+-.020483*e.y+1.3299098*e.z};return n={r:Ma(.032404542*s.x-.015371385*s.y-.004985314*s.z),g:Ma(-.00969266*s.x+.018760108*s.y+41556e-8*s.z),b:Ma(556434e-9*s.x-.002040259*s.y+.010572252*s.z),a:t.a},{r:bn(n.r,0,255),g:bn(n.g,0,255),b:bn(n.b,0,255),a:bn(n.a)}},LM=function(t){var e=Ta(t.r),n=Ta(t.g),s=Ta(t.b);return function(r){return{x:bn(r.x,0,Bl),y:bn(r.y,0,Vl),z:bn(r.z,0,Ll),a:bn(r.a)}}(function(r){return{x:1.0478112*r.x+.0228866*r.y+-.050127*r.z,y:.0295424*r.x+.9904844*r.y+-.0170491*r.z,z:-.0092345*r.x+.0150436*r.y+.7521316*r.z,a:r.a}}({x:100*(.4124564*e+.3575761*n+.1804375*s),y:100*(.2126729*e+.7151522*n+.072175*s),z:100*(.0193339*e+.119192*n+.9503041*s),a:t.a}))},jr=216/24389,tr=24389/27,vh=function(t){var e=LM(t),n=e.x/Bl,s=e.y/Vl,r=e.z/Ll;return n=n>jr?Math.cbrt(n):(tr*n+16)/116,{l:116*(s=s>jr?Math.cbrt(s):(tr*s+16)/116)-16,a:500*(n-s),b:200*(s-(r=r>jr?Math.cbrt(r):(tr*r+16)/116)),alpha:e.a}},UM=function(t,e,n){var s,r=vh(t),i=vh(e);return function(o){var a=(o.l+16)/116,c=o.a/500+a,l=a-o.b/200;return VM({x:(Math.pow(c,3)>jr?Math.pow(c,3):(116*c-16)/tr)*Bl,y:(o.l>8?Math.pow((o.l+16)/116,3):o.l/tr)*Vl,z:(Math.pow(l,3)>jr?Math.pow(l,3):(116*l-16)/tr)*Ll,a:o.alpha})}({l:bn((s={l:r.l*(1-n)+i.l*n,a:r.a*(1-n)+i.a*n,b:r.b*(1-n)+i.b*n,alpha:r.alpha*(1-n)+i.alpha*n}).l,0,400),a:s.a,b:s.b,alpha:bn(s.alpha)})};function jM(t){function e(n,s,r){r===void 0&&(r=5);for(var i=[],o=1/(r-1),a=0;a<=r-1;a++)i.push(n.mix(s,o*a));return i}t.prototype.mix=function(n,s){s===void 0&&(s=.5);var r=n instanceof t?n:new t(n),i=UM(this.toRgb(),r.toRgb(),s);return new t(i)},t.prototype.tints=function(n){return e(this,"#fff",n)},t.prototype.shades=function(n){return e(this,"#000",n)},t.prototype.tones=function(n){return e(this,"#808080",n)}}function qM(t,e){var n={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},s={};for(var r in n)s[n[r]]=r;var i={};t.prototype.toName=function(o){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var a,c,l=s[this.toHex()];if(l)return l;if(o!=null&&o.closest){var u=this.toRgb(),h=1/0,f="black";if(!i.length)for(var d in n)i[d]=new t(n[d]).toRgb();for(var p in n){var g=(a=u,c=i[p],Math.pow(a.r-c.r,2)+Math.pow(a.g-c.g,2)+Math.pow(a.b-c.b,2));g<h&&(h=g,f=p)}return f}},e.string.push([function(o){var a=o.toLowerCase(),c=a==="transparent"?"#0000":n[a];return c?new t(c).toRgb():null},"name"])}var Sa=function(t){return typeof t=="string"?t.length>0:typeof t=="number"},Tr=function(t,e,n){return e===void 0&&(e=0),n===void 0&&(n=Math.pow(10,e)),Math.round(n*t)/n+0},sn=function(t,e,n){return e===void 0&&(e=0),n===void 0&&(n=1),t>n?n:t>e?t:e},Ea=function(t){var e=t/255;return e<.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)},Na=function(t){return 255*(t>.0031308?1.055*Math.pow(t,1/2.4)-.055:12.92*t)},Ul=96.422,jl=100,ql=82.521,$M=function(t){var e,n,s={x:.9555766*(e=t).x+-.0230393*e.y+.0631636*e.z,y:-.0282895*e.x+1.0099416*e.y+.0210077*e.z,z:.0122982*e.x+-.020483*e.y+1.3299098*e.z};return n={r:Na(.032404542*s.x-.015371385*s.y-.004985314*s.z),g:Na(-.00969266*s.x+.018760108*s.y+41556e-8*s.z),b:Na(556434e-9*s.x-.002040259*s.y+.010572252*s.z),a:t.a},{r:sn(n.r,0,255),g:sn(n.g,0,255),b:sn(n.b,0,255),a:sn(n.a)}},WM=function(t){var e=Ea(t.r),n=Ea(t.g),s=Ea(t.b);return function(r){return{x:sn(r.x,0,Ul),y:sn(r.y,0,jl),z:sn(r.z,0,ql),a:sn(r.a)}}(function(r){return{x:1.0478112*r.x+.0228866*r.y+-.050127*r.z,y:.0295424*r.x+.9904844*r.y+-.0170491*r.z,z:-.0092345*r.x+.0150436*r.y+.7521316*r.z,a:r.a}}({x:100*(.4124564*e+.3575761*n+.1804375*s),y:100*(.2126729*e+.7151522*n+.072175*s),z:100*(.0193339*e+.119192*n+.9503041*s),a:t.a}))},qr=216/24389,nr=24389/27,GM=function(t){var e=t.l,n=t.a,s=t.b,r=t.alpha,i=r===void 0?1:r;if(!Sa(e)||!Sa(n)||!Sa(s))return null;var o=function(a){return{l:sn(a.l,0,400),a:a.a,b:a.b,alpha:sn(a.alpha)}}({l:Number(e),a:Number(n),b:Number(s),alpha:Number(i)});return HM(o)},HM=function(t){var e=(t.l+16)/116,n=t.a/500+e,s=e-t.b/200;return $M({x:(Math.pow(n,3)>qr?Math.pow(n,3):(116*n-16)/nr)*Ul,y:(t.l>8?Math.pow((t.l+16)/116,3):t.l/nr)*jl,z:(Math.pow(s,3)>qr?Math.pow(s,3):(116*s-16)/nr)*ql,a:t.alpha})};function zM(t,e){t.prototype.toLab=function(){return s=WM(this.rgba),i=s.y/jl,o=s.z/ql,r=(r=s.x/Ul)>qr?Math.cbrt(r):(nr*r+16)/116,n={l:116*(i=i>qr?Math.cbrt(i):(nr*i+16)/116)-16,a:500*(r-i),b:200*(i-(o=o>qr?Math.cbrt(o):(nr*o+16)/116)),alpha:s.a},{l:Tr(n.l,2),a:Tr(n.a,2),b:Tr(n.b,2),alpha:Tr(n.alpha,3)};var n,s,r,i,o},t.prototype.delta=function(n){n===void 0&&(n="#FFF");var s=n instanceof t?n:new t(n),r=function(i,o){var a=i.l,c=i.a,l=i.b,u=o.l,h=o.a,f=o.b,d=180/Math.PI,p=Math.PI/180,g=Math.pow(Math.pow(c,2)+Math.pow(l,2),.5),m=Math.pow(Math.pow(h,2)+Math.pow(f,2),.5),_=(a+u)/2,w=Math.pow((g+m)/2,7),A=.5*(1-Math.pow(w/(w+Math.pow(25,7)),.5)),b=c*(1+A),y=h*(1+A),M=Math.pow(Math.pow(b,2)+Math.pow(l,2),.5),C=Math.pow(Math.pow(y,2)+Math.pow(f,2),.5),E=(M+C)/2,B=b===0&&l===0?0:Math.atan2(l,b)*d,x=y===0&&f===0?0:Math.atan2(f,y)*d;B<0&&(B+=360),x<0&&(x+=360);var O=x-B,k=Math.abs(x-B);k>180&&x<=B?O+=360:k>180&&x>B&&(O-=360);var G=B+x;k<=180?G/=2:G=(B+x<360?G+360:G-360)/2;var Q=1-.17*Math.cos(p*(G-30))+.24*Math.cos(2*p*G)+.32*Math.cos(p*(3*G+6))-.2*Math.cos(p*(4*G-63)),ee=u-a,H=C-M,W=2*Math.sin(p*O/2)*Math.pow(M*C,.5),K=1+.015*Math.pow(_-50,2)/Math.pow(20+Math.pow(_-50,2),.5),Z=1+.045*E,ae=1+.015*E*Q,ne=30*Math.exp(-1*Math.pow((G-275)/25,2)),de=-2*Math.pow(w/(w+Math.pow(25,7)),.5)*Math.sin(2*p*ne);return Math.pow(Math.pow(ee/1/K,2)+Math.pow(H/1/Z,2)+Math.pow(W/1/ae,2)+de*H*W/(1*Z*1*ae),.5)}(this.toLab(),s.toLab())/100;return sn(Tr(r,3))},e.object.push([GM,"lab"])}var Ni=function(t){return typeof t=="string"?t.length>0:typeof t=="number"},Ht=function(t,e,n){return e===void 0&&(e=0),n===void 0&&(n=Math.pow(10,e)),Math.round(n*t)/n+0},Mr=function(t,e,n){return e===void 0&&(e=0),n===void 0&&(n=1),t>n?n:t>e?t:e},zp=function(t){return{c:Mr(t.c,0,100),m:Mr(t.m,0,100),y:Mr(t.y,0,100),k:Mr(t.k,0,100),a:Mr(t.a)}},wh=function(t){return{c:Ht(t.c,2),m:Ht(t.m,2),y:Ht(t.y,2),k:Ht(t.k,2),a:Ht(t.a,3)}};function Qp(t){return{r:Ht(255*(1-t.c/100)*(1-t.k/100)),g:Ht(255*(1-t.m/100)*(1-t.k/100)),b:Ht(255*(1-t.y/100)*(1-t.k/100)),a:t.a}}function Ah(t){var e=1-Math.max(t.r/255,t.g/255,t.b/255),n=(1-t.r/255-e)/(1-e),s=(1-t.g/255-e)/(1-e),r=(1-t.b/255-e)/(1-e);return{c:isNaN(n)?0:Ht(100*n),m:isNaN(s)?0:Ht(100*s),y:isNaN(r)?0:Ht(100*r),k:Ht(100*e),a:t.a}}function QM(t){var e=t.c,n=t.m,s=t.y,r=t.k,i=t.a,o=i===void 0?1:i;return Ni(e)&&Ni(n)&&Ni(s)&&Ni(r)?Qp(zp({c:Number(e),m:Number(n),y:Number(s),k:Number(r),a:Number(o)})):null}var YM=/^device-cmyk\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,KM=function(t){var e=YM.exec(t);return e?Qp(zp({c:Number(e[1])*(e[2]?1:100),m:Number(e[3])*(e[4]?1:100),y:Number(e[5])*(e[6]?1:100),k:Number(e[7])*(e[8]?1:100),a:e[9]===void 0?1:Number(e[9])/(e[10]?100:1)})):null};function ZM(t,e){t.prototype.toCmyk=function(){return wh(Ah(this.rgba))},t.prototype.toCmykString=function(){return n=wh(Ah(this.rgba)),s=n.c,r=n.m,i=n.y,o=n.k,(a=n.a)<1?"device-cmyk("+s+"% "+r+"% "+i+"% "+o+"% / "+a+")":"device-cmyk("+s+"% "+r+"% "+i+"% "+o+"%)";var n,s,r,i,o,a},e.object.push([QM,"cmyk"]),e.string.push([KM,"cmyk"])}var JM={grad:.9,turn:360,rad:360/(2*Math.PI)},Ca=function(t){return typeof t=="string"?t.length>0:typeof t=="number"},Ci=function(t,e,n){return e===void 0&&(e=0),n===void 0&&(n=Math.pow(10,e)),Math.round(n*t)/n+0},xa=function(t,e,n){return e===void 0&&(e=0),n===void 0&&(n=1),t>n?n:t>e?t:e},Yp=function(t){return{h:(e=t.h,(e=isFinite(e)?e%360:0)>0?e:e+360),w:xa(t.w,0,100),b:xa(t.b,0,100),a:xa(t.a)};var e},Th=function(t){return{h:Ci(t.h),w:Ci(t.w),b:Ci(t.b),a:Ci(t.a,3)}},Mh=function(t){return{h:function(e){var n=e.r,s=e.g,r=e.b,i=e.a,o=Math.max(n,s,r),a=o-Math.min(n,s,r),c=a?o===n?(s-r)/a:o===s?2+(r-n)/a:4+(n-s)/a:0;return{h:60*(c<0?c+6:c),s:o?a/o*100:0,v:o/255*100,a:i}}(t).h,w:Math.min(t.r,t.g,t.b)/255*100,b:100-Math.max(t.r,t.g,t.b)/255*100,a:t.a}},Kp=function(t){return function(e){var n=e.h,s=e.s,r=e.v,i=e.a;n=n/360*6,s/=100,r/=100;var o=Math.floor(n),a=r*(1-s),c=r*(1-(n-o)*s),l=r*(1-(1-n+o)*s),u=o%6;return{r:255*[r,c,a,a,l,r][u],g:255*[l,r,r,c,a,a][u],b:255*[a,a,l,r,r,c][u],a:i}}({h:t.h,s:t.b===100?0:100-t.w/(100-t.b)*100,v:100-t.b,a:t.a})},XM=function(t){var e=t.h,n=t.w,s=t.b,r=t.a,i=r===void 0?1:r;if(!Ca(e)||!Ca(n)||!Ca(s))return null;var o=Yp({h:Number(e),w:Number(n),b:Number(s),a:Number(i)});return Kp(o)},eS=/^hwb\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,tS=function(t){var e=eS.exec(t);if(!e)return null;var n,s,r=Yp({h:(n=e[1],s=e[2],s===void 0&&(s="deg"),Number(n)*(JM[s]||1)),w:Number(e[3]),b:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return Kp(r)};function nS(t,e){t.prototype.toHwb=function(){return Th(Mh(this.rgba))},t.prototype.toHwbString=function(){return n=Th(Mh(this.rgba)),s=n.h,r=n.w,i=n.b,(o=n.a)<1?"hwb("+s+" "+r+"% "+i+"% / "+o+")":"hwb("+s+" "+r+"% "+i+"%)";var n,s,r,i,o},e.string.push([tS,"hwb"]),e.object.push([XM,"hwb"])}IM([jM,BM,qM,zM,ZM,nS]);const xi=Array(12).fill(!0).map((t,e)=>Fe(ao(e)).toHex()),$r=He({default:[...xi],custom:Mt("custom-colors",[...xi]),isDefault:pe(()=>$r.custom.every((t,e)=>t==xi[e])),customize:!1,reset(){$r.custom=[...xi]}});function yn(t=0,e=2,n=1,s=1){e+=Math.floor(t/12);const r=e-2;return $r.custom[t%12]!=$r.default[t%12]?Fe($r.custom[t%12]).lighten(r*.1).alpha(s).toHex():ao(t,e,n,s)}function Sh(t=0,e=12,n=1,s=20,r=60){let i=`lch(${r}% ${s} ${t*(360/e)} / ${n})`;return Fe(i).toHslString()}function sS(t,e,n=.2,s=4){let r=Fe(ao(e)),i=Fe(Sh(e,12,1,40,6*s));return t.split("").forEach((o,a)=>{TA(t,e,a)&&(r=r.mix(ao(a,s),n),i=i.mix(Sh(a,12,1,40,6*s),n))}),{hsl:r.toHslString(),lch:i.toHslString()}}const Zp=Tn(Mt("tempo-bpm",100),10,500),ye=He({initialized:!1,bpm:Zp,midiClock:Mt("midi-clock",!0),tabSync:Mt("tab-sync",!1),blink:!1,started:!1,playing:!1,stopped:!1,mute:Mt("tempo-mute",!0),volume:Tn(Mt("tempo-volume",.5),0,1),progress:0,position:null,ticks:0,hz:pe(()=>(ye.bpm/60).toFixed(2)),note:pe(()=>oh($u(ye.hz).toNote())),tune:pe(()=>oh(ye.note)+4),pitch:pe(()=>AA(Number(ye.hz))),digit:pe(()=>($u(ye.hz).toMidi()+12*10+3)%12),color:pe(()=>yn(ye.digit)),set(t){ye.bpm=Math.round(t+ye.bpm)}});function rS(){if(ye.initialized)return ye;const t=$w(),e=jw(),n=Mn({counter:0,pluck:null,clock:null,loop:null});ti(()=>{const{channel:i}=wA("tempo-tick");n.pluck=new mi({urls:{E1:Eh.low,E2:Eh.high},volume:-20,attack:.001,release:2}).connect(i),n.clock=new so(o=>{ye.midiClock&&t.schedule(()=>{j.outputs.forEach(a=>a.sendClock())},o)},"8i").start(0),n.loop=new so(o=>{let a=n.counter%2==0;a?t.schedule(()=>{ye.blink=!1},o):t.schedule(()=>{ye.blink=!0},o),ye.mute||n.pluck.triggerAttackRelease(a?"E1":"E2","16n",o,a?1:.2),n.counter++},"8n").start(0),El(()=>{ye.position=e.position,ye.ticks=e.ticks,ye.progress=n.loop.progress}),zu(" ",o=>{const a=o.target;["TEXTAREA","INPUT"].includes(a.nodeName)||(o.preventDefault(),ye.playing=!ye.playing)}),zu("Enter",o=>{const a=o.target;["TEXTAREA","INPUT"].includes(a.nodeName)||(o.preventDefault(),ye.stopped=Date.now())})});const{data:s,post:r}=iA({name:"chromatone-tempo"});return et(s,i=>{ye.tabSync&&(ye.playing=!!(i!=null&&i.playing),ye.stopped=!!(i!=null&&i.stopped))}),et(()=>ye.volume,i=>{var o,a;return(a=(o=n==null?void 0:n.pluck)==null?void 0:o.volume)==null?void 0:a.rampTo(ko(i))},{immediate:!0}),et(Zp,i=>e.bpm.rampTo(i,"4n"),{immediate:!0}),et(()=>ye.stopped,i=>{i&&(e.stop(),Ol(),ye.playing=!1,ye.tabSync&&r({stopped:i}))}),et(()=>ye.playing,i=>{i?(ye.started||(lp(),ye.started=!0),ye.stopped=!1,e.start(),se.playing=!0,ye.tabSync&&r({playing:!0})):(se.playing=!1,e.pause(),ye.tabSync&&r({playing:!1}))},{immediate:!0}),et(()=>se.playing,i=>ye.playing=i),et(()=>se.stopped,i=>ye.stopped=i),ye.initialized=!0,ye}const gt=He({timer:null,last:0,diff:0,timeout:2e3,times:[],bpm:null,tap:iS,refresh:Jp});function iS(){let t=performance.now();gt.last&&(gt.diff=t-gt.last,gt.times.push(gt.diff),Jp()),gt.last=t,clearTimeout(gt.timer),gt.timer=setTimeout(function(){gt.times=[gt.diff],gt.last=null},gt.timeout)}function Jp(){if(gt.times.length>2){let t=1/(gt.times.reduce((e,n)=>e+=n)/gt.times.length/1e3)*60;gt.bpm=t}}const Eh={low:"data:@file/wav;base64,UklGRqoEAABXQVZFZm10IBAAAAABAAEARKwAAMwEAgADABgAZGF0YYYEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADr1BAakh+PpCsipjQ1XzoAxjyZ+zsgRzhiDzJd0ykpIiCrkhWHuwqoKwDEY/YG0e0eyea/h+GhLd7fwNysLt0cTt/T4+JZpufJQu2kYfN9q/lQzf9KfAXheAojkQ4qohG7mBMKcRTENRR0/hJh7RALLQ537QpjYQeJuwMhLACt3vwm+Pmrlfeey/VPpfQYJfTpRPQ39/Q3KPZTv/e6oPkBr/u2zP3Y3f8cyQH+eAOE3ATE5wUZlAYR4AYazwYAaQYvuQXhzQQztwM0hgL5SwHIGABT+/4iAP4XMf0rlfxEMPxHA/xADPy1RvwMrPwMNP1e1f0fhv5lPP+87v+alACzJgFEnwE8+gFONQLwTwI9SwLHKQJe7wHEoAFiQwHz3AA5cwCwCwBQq/9YVv8iEP8Q2/58uP65qP4oq/5Ovv743/5lDf9zQ//Qfv8jvP8++P8+MACpYQCLigCAqQC+vQARxwDTxQDeugB4pwA3jQDtbQCHSwD0JwAQBQCH5P/Jx//7r//rnf8Skv+PjP8ujf9zk/+hnv/Mrf/pv//Y0/966P+7/P+jDwBaIAA3LgC/OACuPwDxQgCjQgANPwCcOADYLwBcJQDPGQDYDQAVAgAa9/9h7f9P5f8q3/8b2/8u2f9T2f9f2/8V3/8m5P836v/p8P/a9/+t/v8PBQC2CgBpDwD/EgBfFQCCFgByFgBGFQAiEwA1EACyDADRCADKBADUAAAf/f/V+f8Z9/8C9f+e8//y8v/58v+k8//f9P+Q9v+Z+P/Y+v8u/f97//+iAQCMAwAjBQBbBgAsBwCRBwCPBwAtBwB3BgB9BQBQBAADAwCoAQBSAAAS///1/f8I/f9S/P/Y+/+c+/+c+//U+/89/P/N/P98/f89/v8G///M//+GAAAsAQC2AQAgAgBoAgCLAgCLAgBrAgAvAgDcAQB3AQAHAQCSAAAfAACz//9T//8C///E/v+b/v+G/v+F/v+X/v+6/v/q/v8l//9m//+p///s//8rAABjAACSAAC2AADOAADbAADbAADRAAC9AAChAAB/AABZAAAyAAALAADn///G//+r//+W//+I//+B//+A//+G//+S//+i//+1///L///i///4//8NAAAgAAAwAAA9AABFAABJAABJAABGAAA/AAA2AAArAAAeAAARAAAEAAD4///t///j///c///X///V///V///X///a///g///m///u///1///9//8EAAAKAAAQAAAUAAAXAAAYAAAYAAAXAAAVAAASAAAOAAAKAAAGAAABAAD9///5///2///0///y///x///x///y///z///1///4///6///9//8AAAAAAAACAAAEAAAFAAAFAAAGAAAGAAAGAAAFAAAEAAACAAACAAABAAAAAAAAAAD////+///+///+///+///+///+///+//////////////8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=",high:"data:@file/wav;base64,UklGRhgFAABXQVZFZm10IBAAAAABAAEARKwAAMwEAgADABgAZGF0YY8EAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABv+wgYUREH2hjDdR+0CiVYhilW3SxfCy/wEjDn/C8I2C5UuCxftimA7iUHgCFkjBxNNhfsoBEN7wtjQgbTugDYdfv8jfZkGvJ7Lu6z2epfJ+irHuaiwuRaEuQlCeTenuRDyOVgd+f6m+kPJOxN/O6VEPJzTPWam/hS6vvjJf/wPALKHwWwwAcJFAqIEAxArw216w7Mww/BNxAEShAP/w8yXQ9abA7ONQ3qwwvUIQo2Wwj0ewbljwSRogLzvgBE7/7JPP2qr/vUTvrhH/kGJ/gTZ/dv4fYllvb3g/ZxqPYJAPdBhvfMNfi2CPmR+Pmb/vrrE/yaMf3rUP5sa/8aewB7egG6ZAK1NQMO6gM2fwRv8wTLRQUpdgUphQUhdAULRQVy+gRdlwQ3HwS2lQPD/gJhXgKWuAFSEQFdbABAzf81N/8brf5oMf4gxv3RbP2QJv348/wq1fzayfxN0fxq6vzAE/2WS/31j/263v2iNf5Ykv6E8v7ZU/8itP9IEQBmaQDHugD1AwG5QwEkeQGLowGJwgEC1gEb3gE32wHyzQEetwG1lwHXcAHAQwHAEQEv3ABspADOawChMwAe/f9lyf93mf8ybv9RSP9mKP/ZDv/o+/6t7/4U6v7q6v7Y8f5o/v4LEP8dJv/mP/+nXP+Ve//nm//SvP+V3f94/f/RGwAJOACaUQAWaAAkewCFigAQlgC2nQB7oQB9oQDsnQAKlwAojQCkgADocQBiYQCITwDPPACtKQCUFgDvAwAi8v+I4f9u0v8Yxf+6uf98sP92qf+1pP82ov/qof+3o/94p///rP8WtP+AvP/9xf9J0P8g2/895v9e8f9E/P+0BgB4EABhGQBJIQAQKACcLQDfMQDRNAByNgDKNgDnNQDdMwDIMADGLAD5JwCHIgCXHABRFgDdDwBhCQADAwDm/P8o9//m8f837f8u6f/a5f9F4/904f9n4P8b4P+H4P+g4f9X4/+a5f9X6P926//i7v+D8v9C9v8I+v/A/f9VAQC1BADPBwCUCgD7DAD5DgCJEACnEQBTEgCOEgBeEgDHEQDUEACNDwD+DQA0DAA8CgAjCAD2BQDEAwCYAQB///+E/f+w+/8M+v+f+P9t9/989v/M9f9f9f809f9I9f+Y9f8f9v/X9v+59//A+P/i+f8Y+/9b/P+i/f/m/v8hAABLAQBeAgBXAwAwBADmBAB4BQDjBQAoBgBGBgA/BgAVBgDLBQBkBQDjBABNBACmAwDzAgA4AgB5AQC8AAAEAABW//+z/v8g/v+g/f8z/f/b/P+Z/P9u/P9a/P9b/P9x/P+Z/P/T/P8c/f9y/f/S/f86/v+m/v8V//+D///u//9VAAC0AAALAQBYAQCZAQDNAQD1AQAQAgAeAgAfAgAUAgDuAQDAAQCNAQBVAQAbAQDfAAClAABuAAA7AAAMAADk///A//+k//+O//9+//90//9v//9x//92//9+//+K//+X//+m//+1///E///S///f///q///z///6//////8BAAABAAAATElTVFwAAABJTkZPSUNSRAsAAAAyMDA1LTA2LTA3AABJRU5HFgAAAEdSQUJBQ0lPTkVTX01JVElDQVMgIABJU0ZUHgAAAFNvbmljIEZvdW5kcnkgU291bmQgRm9yZ2UgNS4wAA=="};var Bs={},Ia={},Pa,Nh;function oS(){if(Nh)return Pa;Nh=1;function t(r){var i=new s(r),o=i.readChunk();if(o.id!="MThd")throw"Bad MIDI file.  Expected 'MHdr', got: '"+o.id+"'";for(var a=e(o.data),c=[],l=0;!i.eof()&&l<a.numTracks;l++){var u=i.readChunk();if(u.id!="MTrk")throw"Bad MIDI file.  Expected 'MTrk', got: '"+u.id+"'";var h=n(u.data);c.push(h)}return{header:a,tracks:c}}function e(r){var i=new s(r),o=i.readUInt16(),a=i.readUInt16(),c={format:o,numTracks:a},l=i.readUInt16();return l&32768?(c.framesPerSecond=256-(l>>8),c.ticksPerFrame=l&255):c.ticksPerBeat=l,c}function n(r){for(var i=new s(r),o=[];!i.eof();){var a=l();o.push(a)}return o;var c;function l(){var u={};u.deltaTime=i.readVarInt();var h=i.readUInt8();if((h&240)===240)if(h===255){u.meta=!0;var f=i.readUInt8(),d=i.readVarInt();switch(f){case 0:if(u.type="sequenceNumber",d!==2)throw"Expected length for sequenceNumber event is 2, got "+d;return u.number=i.readUInt16(),u;case 1:return u.type="text",u.text=i.readString(d),u;case 2:return u.type="copyrightNotice",u.text=i.readString(d),u;case 3:return u.type="trackName",u.text=i.readString(d),u;case 4:return u.type="instrumentName",u.text=i.readString(d),u;case 5:return u.type="lyrics",u.text=i.readString(d),u;case 6:return u.type="marker",u.text=i.readString(d),u;case 7:return u.type="cuePoint",u.text=i.readString(d),u;case 32:if(u.type="channelPrefix",d!=1)throw"Expected length for channelPrefix event is 1, got "+d;return u.channel=i.readUInt8(),u;case 33:if(u.type="portPrefix",d!=1)throw"Expected length for portPrefix event is 1, got "+d;return u.port=i.readUInt8(),u;case 47:if(u.type="endOfTrack",d!=0)throw"Expected length for endOfTrack event is 0, got "+d;return u;case 81:if(u.type="setTempo",d!=3)throw"Expected length for setTempo event is 3, got "+d;return u.microsecondsPerBeat=i.readUInt24(),u;case 84:if(u.type="smpteOffset",d!=5)throw"Expected length for smpteOffset event is 5, got "+d;var p=i.readUInt8(),g={0:24,32:25,64:29,96:30};return u.frameRate=g[p&96],u.hour=p&31,u.min=i.readUInt8(),u.sec=i.readUInt8(),u.frame=i.readUInt8(),u.subFrame=i.readUInt8(),u;case 88:if(u.type="timeSignature",d!=2&&d!=4)throw"Expected length for timeSignature event is 4 or 2, got "+d;return u.numerator=i.readUInt8(),u.denominator=1<<i.readUInt8(),d===4?(u.metronome=i.readUInt8(),u.thirtyseconds=i.readUInt8()):(u.metronome=36,u.thirtyseconds=8),u;case 89:if(u.type="keySignature",d!=2)throw"Expected length for keySignature event is 2, got "+d;return u.key=i.readInt8(),u.scale=i.readUInt8(),u;case 127:return u.type="sequencerSpecific",u.data=i.readBytes(d),u;default:return u.type="unknownMeta",u.data=i.readBytes(d),u.metatypeByte=f,u}}else if(h==240){u.type="sysEx";var d=i.readVarInt();return u.data=i.readBytes(d),u}else if(h==247){u.type="endSysEx";var d=i.readVarInt();return u.data=i.readBytes(d),u}else throw"Unrecognised MIDI event type byte: "+h;else{var m;if(h&128)m=i.readUInt8(),c=h;else{if(c===null)throw"Running status byte encountered before status byte";m=h,h=c,u.running=!0}var _=h>>4;switch(u.channel=h&15,_){case 8:return u.type="noteOff",u.noteNumber=m,u.velocity=i.readUInt8(),u;case 9:var w=i.readUInt8();return u.type=w===0?"noteOff":"noteOn",u.noteNumber=m,u.velocity=w,w===0&&(u.byte9=!0),u;case 10:return u.type="noteAftertouch",u.noteNumber=m,u.amount=i.readUInt8(),u;case 11:return u.type="controller",u.controllerType=m,u.value=i.readUInt8(),u;case 12:return u.type="programChange",u.programNumber=m,u;case 13:return u.type="channelAftertouch",u.amount=m,u;case 14:return u.type="pitchBend",u.value=m+(i.readUInt8()<<7)-8192,u;default:throw"Unrecognised MIDI event type: "+_}}}}function s(r){this.buffer=r,this.bufferLen=this.buffer.length,this.pos=0}return s.prototype.eof=function(){return this.pos>=this.bufferLen},s.prototype.readUInt8=function(){var r=this.buffer[this.pos];return this.pos+=1,r},s.prototype.readInt8=function(){var r=this.readUInt8();return r&128?r-256:r},s.prototype.readUInt16=function(){var r=this.readUInt8(),i=this.readUInt8();return(r<<8)+i},s.prototype.readInt16=function(){var r=this.readUInt16();return r&32768?r-65536:r},s.prototype.readUInt24=function(){var r=this.readUInt8(),i=this.readUInt8(),o=this.readUInt8();return(r<<16)+(i<<8)+o},s.prototype.readInt24=function(){var r=this.readUInt24();return r&8388608?r-16777216:r},s.prototype.readUInt32=function(){var r=this.readUInt8(),i=this.readUInt8(),o=this.readUInt8(),a=this.readUInt8();return(r<<24)+(i<<16)+(o<<8)+a},s.prototype.readBytes=function(r){var i=this.buffer.slice(this.pos,this.pos+r);return this.pos+=r,i},s.prototype.readString=function(r){var i=this.readBytes(r);return String.fromCharCode.apply(null,i)},s.prototype.readVarInt=function(){for(var r=0;!this.eof();){var i=this.readUInt8();if(i&128)r+=i&127,r<<=7;else return r+i}return r},s.prototype.readChunk=function(){var r=this.readString(4),i=this.readUInt32(),o=this.readBytes(i);return{id:r,length:i,data:o}},Pa=t,Pa}var ka,Ch;function aS(){if(Ch)return ka;Ch=1;function t(i,o){if(typeof i!="object")throw"Invalid MIDI data";o=o||{};var a=i.header||{},c=i.tracks||[],l,u=c.length,h=new r;for(e(h,a,u),l=0;l<u;l++)n(h,c[l],o);return h.buffer}function e(i,o,a){var c=o.format==null?1:o.format,l=128;o.timeDivision?l=o.timeDivision:o.ticksPerFrame&&o.framesPerSecond?l=-(o.framesPerSecond&255)<<8|o.ticksPerFrame&255:o.ticksPerBeat&&(l=o.ticksPerBeat&32767);var u=new r;u.writeUInt16(c),u.writeUInt16(a),u.writeUInt16(l),i.writeChunk("MThd",u.buffer)}function n(i,o,a){var c=new r,l,u=o.length,h=null;for(l=0;l<u;l++)(a.running===!1||!a.running&&!o[l].running)&&(h=null),h=s(c,o[l],h,a.useByte9ForNoteOff);i.writeChunk("MTrk",c.buffer)}function s(i,o,a,c){var l=o.type,u=o.deltaTime,h=o.text||"",f=o.data||[],d=null;switch(i.writeVarInt(u),l){case"sequenceNumber":i.writeUInt8(255),i.writeUInt8(0),i.writeVarInt(2),i.writeUInt16(o.number);break;case"text":i.writeUInt8(255),i.writeUInt8(1),i.writeVarInt(h.length),i.writeString(h);break;case"copyrightNotice":i.writeUInt8(255),i.writeUInt8(2),i.writeVarInt(h.length),i.writeString(h);break;case"trackName":i.writeUInt8(255),i.writeUInt8(3),i.writeVarInt(h.length),i.writeString(h);break;case"instrumentName":i.writeUInt8(255),i.writeUInt8(4),i.writeVarInt(h.length),i.writeString(h);break;case"lyrics":i.writeUInt8(255),i.writeUInt8(5),i.writeVarInt(h.length),i.writeString(h);break;case"marker":i.writeUInt8(255),i.writeUInt8(6),i.writeVarInt(h.length),i.writeString(h);break;case"cuePoint":i.writeUInt8(255),i.writeUInt8(7),i.writeVarInt(h.length),i.writeString(h);break;case"channelPrefix":i.writeUInt8(255),i.writeUInt8(32),i.writeVarInt(1),i.writeUInt8(o.channel);break;case"portPrefix":i.writeUInt8(255),i.writeUInt8(33),i.writeVarInt(1),i.writeUInt8(o.port);break;case"endOfTrack":i.writeUInt8(255),i.writeUInt8(47),i.writeVarInt(0);break;case"setTempo":i.writeUInt8(255),i.writeUInt8(81),i.writeVarInt(3),i.writeUInt24(o.microsecondsPerBeat);break;case"smpteOffset":i.writeUInt8(255),i.writeUInt8(84),i.writeVarInt(5);var p={24:0,25:32,29:64,30:96},g=o.hour&31|p[o.frameRate];i.writeUInt8(g),i.writeUInt8(o.min),i.writeUInt8(o.sec),i.writeUInt8(o.frame),i.writeUInt8(o.subFrame);break;case"timeSignature":i.writeUInt8(255),i.writeUInt8(88),i.writeVarInt(4),i.writeUInt8(o.numerator);var m=Math.floor(Math.log(o.denominator)/Math.LN2)&255;i.writeUInt8(m),i.writeUInt8(o.metronome),i.writeUInt8(o.thirtyseconds||8);break;case"keySignature":i.writeUInt8(255),i.writeUInt8(89),i.writeVarInt(2),i.writeInt8(o.key),i.writeUInt8(o.scale);break;case"sequencerSpecific":i.writeUInt8(255),i.writeUInt8(127),i.writeVarInt(f.length),i.writeBytes(f);break;case"unknownMeta":o.metatypeByte!=null&&(i.writeUInt8(255),i.writeUInt8(o.metatypeByte),i.writeVarInt(f.length),i.writeBytes(f));break;case"sysEx":i.writeUInt8(240),i.writeVarInt(f.length),i.writeBytes(f);break;case"endSysEx":i.writeUInt8(247),i.writeVarInt(f.length),i.writeBytes(f);break;case"noteOff":var _=c!==!1&&o.byte9||c&&o.velocity==0?144:128;d=_|o.channel,d!==a&&i.writeUInt8(d),i.writeUInt8(o.noteNumber),i.writeUInt8(o.velocity);break;case"noteOn":d=144|o.channel,d!==a&&i.writeUInt8(d),i.writeUInt8(o.noteNumber),i.writeUInt8(o.velocity);break;case"noteAftertouch":d=160|o.channel,d!==a&&i.writeUInt8(d),i.writeUInt8(o.noteNumber),i.writeUInt8(o.amount);break;case"controller":d=176|o.channel,d!==a&&i.writeUInt8(d),i.writeUInt8(o.controllerType),i.writeUInt8(o.value);break;case"programChange":d=192|o.channel,d!==a&&i.writeUInt8(d),i.writeUInt8(o.programNumber);break;case"channelAftertouch":d=208|o.channel,d!==a&&i.writeUInt8(d),i.writeUInt8(o.amount);break;case"pitchBend":d=224|o.channel,d!==a&&i.writeUInt8(d);var w=8192+o.value,A=w&127,b=w>>7&127;i.writeUInt8(A),i.writeUInt8(b);break;default:throw"Unrecognized event type: "+l}return d}function r(){this.buffer=[]}return r.prototype.writeUInt8=function(i){this.buffer.push(i&255)},r.prototype.writeInt8=r.prototype.writeUInt8,r.prototype.writeUInt16=function(i){var o=i>>8&255,a=i&255;this.writeUInt8(o),this.writeUInt8(a)},r.prototype.writeInt16=r.prototype.writeUInt16,r.prototype.writeUInt24=function(i){var o=i>>16&255,a=i>>8&255,c=i&255;this.writeUInt8(o),this.writeUInt8(a),this.writeUInt8(c)},r.prototype.writeInt24=r.prototype.writeUInt24,r.prototype.writeUInt32=function(i){var o=i>>24&255,a=i>>16&255,c=i>>8&255,l=i&255;this.writeUInt8(o),this.writeUInt8(a),this.writeUInt8(c),this.writeUInt8(l)},r.prototype.writeInt32=r.prototype.writeUInt32,r.prototype.writeBytes=function(i){this.buffer=this.buffer.concat(Array.prototype.slice.call(i,0))},r.prototype.writeString=function(i){var o,a=i.length,c=[];for(o=0;o<a;o++)c.push(i.codePointAt(o));this.writeBytes(c)},r.prototype.writeVarInt=function(i){if(i<0)throw"Cannot write negative variable-length integer";if(i<=127)this.writeUInt8(i);else{var o=i,a=[];for(a.push(o&127),o>>=7;o;){var c=o&127|128;a.push(c),o>>=7}this.writeBytes(a.reverse())}},r.prototype.writeChunk=function(i,o){this.writeString(i),this.writeUInt32(o.length),this.writeBytes(o)},ka=t,ka}var xh;function Xp(){return xh||(xh=1,Ia.parseMidi=oS(),Ia.writeMidi=aS()),Ia}var Ih={},fs={},Ph;function em(){if(Ph)return fs;Ph=1,Object.defineProperty(fs,"__esModule",{value:!0}),fs.insert=fs.search=void 0;function t(n,s,r){r===void 0&&(r="ticks");var i=0,o=n.length,a=o;if(o>0&&n[o-1][r]<=s)return o-1;for(;i<a;){var c=Math.floor(i+(a-i)/2),l=n[c],u=n[c+1];if(l[r]===s){for(var h=c;h<n.length;h++){var f=n[h];f[r]===s&&(c=h)}return c}else{if(l[r]<s&&u[r]>s)return c;l[r]>s?a=c:l[r]<s&&(i=c+1)}}return-1}fs.search=t;function e(n,s,r){if(r===void 0&&(r="ticks"),n.length){var i=t(n,s[r],r);n.splice(i+1,0,s)}else n.push(s)}return fs.insert=e,fs}var kh;function gc(){return kh||(kh=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Header=t.keySignatureKeys=void 0;var e=em(),n=new WeakMap;t.keySignatureKeys=["Cb","Gb","Db","Ab","Eb","Bb","F","C","G","D","A","E","B","F#","C#"];var s=function(){function r(i){var o=this;if(this.tempos=[],this.timeSignatures=[],this.keySignatures=[],this.meta=[],this.name="",n.set(this,480),i){n.set(this,i.header.ticksPerBeat),i.tracks.forEach(function(c){c.forEach(function(l){l.meta&&(l.type==="timeSignature"?o.timeSignatures.push({ticks:l.absoluteTime,timeSignature:[l.numerator,l.denominator]}):l.type==="setTempo"?o.tempos.push({bpm:6e7/l.microsecondsPerBeat,ticks:l.absoluteTime}):l.type==="keySignature"&&o.keySignatures.push({key:t.keySignatureKeys[l.key+7],scale:l.scale===0?"major":"minor",ticks:l.absoluteTime}))})});var a=0;i.tracks[0].forEach(function(c){a+=c.deltaTime,c.meta&&(c.type==="trackName"?o.name=c.text:(c.type==="text"||c.type==="cuePoint"||c.type==="marker"||c.type==="lyrics")&&o.meta.push({text:c.text,ticks:a,type:c.type}))}),this.update()}}return r.prototype.update=function(){var i=this,o=0,a=0;this.tempos.sort(function(c,l){return c.ticks-l.ticks}),this.tempos.forEach(function(c,l){var u=l>0?i.tempos[l-1].bpm:i.tempos[0].bpm,h=c.ticks/i.ppq-a,f=60/u*h;c.time=f+o,o=c.time,a+=h}),this.timeSignatures.sort(function(c,l){return c.ticks-l.ticks}),this.timeSignatures.forEach(function(c,l){var u=l>0?i.timeSignatures[l-1]:i.timeSignatures[0],h=(c.ticks-u.ticks)/i.ppq,f=h/u.timeSignature[0]/(u.timeSignature[1]/4);u.measures=u.measures||0,c.measures=f+u.measures})},r.prototype.ticksToSeconds=function(i){var o=(0,e.search)(this.tempos,i);if(o!==-1){var a=this.tempos[o],c=a.time,l=(i-a.ticks)/this.ppq;return c+60/a.bpm*l}else{var u=i/this.ppq;return 60/120*u}},r.prototype.ticksToMeasures=function(i){var o=(0,e.search)(this.timeSignatures,i);if(o!==-1){var a=this.timeSignatures[o],c=(i-a.ticks)/this.ppq;return a.measures+c/(a.timeSignature[0]/a.timeSignature[1])/4}else return i/this.ppq/4},Object.defineProperty(r.prototype,"ppq",{get:function(){return n.get(this)},enumerable:!1,configurable:!0}),r.prototype.secondsToTicks=function(i){var o=(0,e.search)(this.tempos,i,"time");if(o!==-1){var a=this.tempos[o],c=a.time,l=i-c,u=l/(60/a.bpm);return Math.round(a.ticks+u*this.ppq)}else{var h=i/.5;return Math.round(h*this.ppq)}},r.prototype.toJSON=function(){return{keySignatures:this.keySignatures,meta:this.meta,name:this.name,ppq:this.ppq,tempos:this.tempos.map(function(i){return{bpm:i.bpm,ticks:i.ticks}}),timeSignatures:this.timeSignatures}},r.prototype.fromJSON=function(i){this.name=i.name,this.tempos=i.tempos.map(function(o){return Object.assign({},o)}),this.timeSignatures=i.timeSignatures.map(function(o){return Object.assign({},o)}),this.keySignatures=i.keySignatures.map(function(o){return Object.assign({},o)}),this.meta=i.meta.map(function(o){return Object.assign({},o)}),n.set(this,i.ppq),this.update()},r.prototype.setTempo=function(i){this.tempos=[{bpm:i,ticks:0}],this.update()},r}();t.Header=s}(Ih)),Ih}var Sr={},Oh={},Rh;function tm(){return Rh||(Rh=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ControlChange=t.controlChangeIds=t.controlChangeNames=void 0,t.controlChangeNames={1:"modulationWheel",2:"breath",4:"footController",5:"portamentoTime",7:"volume",8:"balance",10:"pan",64:"sustain",65:"portamentoTime",66:"sostenuto",67:"softPedal",68:"legatoFootswitch",84:"portamentoControl"},t.controlChangeIds=Object.keys(t.controlChangeNames).reduce(function(r,i){return r[t.controlChangeNames[i]]=i,r},{});var e=new WeakMap,n=new WeakMap,s=function(){function r(i,o){e.set(this,o),n.set(this,i.controllerType),this.ticks=i.absoluteTime,this.value=i.value}return Object.defineProperty(r.prototype,"number",{get:function(){return n.get(this)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"name",{get:function(){return t.controlChangeNames[this.number]?t.controlChangeNames[this.number]:null},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"time",{get:function(){var i=e.get(this);return i.ticksToSeconds(this.ticks)},set:function(i){var o=e.get(this);this.ticks=o.secondsToTicks(i)},enumerable:!1,configurable:!0}),r.prototype.toJSON=function(){return{number:this.number,ticks:this.ticks,time:this.time,value:this.value}},r}();t.ControlChange=s}(Oh)),Oh}var Er={},Dh;function cS(){if(Dh)return Er;Dh=1,Object.defineProperty(Er,"__esModule",{value:!0}),Er.createControlChanges=void 0;var t=tm();function e(){return new Proxy({},{get:function(n,s){if(n[s])return n[s];if(t.controlChangeIds.hasOwnProperty(s))return n[t.controlChangeIds[s]]},set:function(n,s,r){return t.controlChangeIds.hasOwnProperty(s)?n[t.controlChangeIds[s]]=r:n[s]=r,!0}})}return Er.createControlChanges=e,Er}var Nr={},Fh;function lS(){if(Fh)return Nr;Fh=1,Object.defineProperty(Nr,"__esModule",{value:!0}),Nr.PitchBend=void 0;var t=new WeakMap,e=function(){function n(s,r){t.set(this,r),this.ticks=s.absoluteTime,this.value=s.value}return Object.defineProperty(n.prototype,"time",{get:function(){var s=t.get(this);return s.ticksToSeconds(this.ticks)},set:function(s){var r=t.get(this);this.ticks=r.secondsToTicks(s)},enumerable:!1,configurable:!0}),n.prototype.toJSON=function(){return{ticks:this.ticks,time:this.time,value:this.value}},n}();return Nr.PitchBend=e,Nr}var Cr={},Qn={},Bh;function uS(){return Bh||(Bh=1,Object.defineProperty(Qn,"__esModule",{value:!0}),Qn.DrumKitByPatchID=Qn.InstrumentFamilyByID=Qn.instrumentByPatchID=void 0,Qn.instrumentByPatchID=["acoustic grand piano","bright acoustic piano","electric grand piano","honky-tonk piano","electric piano 1","electric piano 2","harpsichord","clavi","celesta","glockenspiel","music box","vibraphone","marimba","xylophone","tubular bells","dulcimer","drawbar organ","percussive organ","rock organ","church organ","reed organ","accordion","harmonica","tango accordion","acoustic guitar (nylon)","acoustic guitar (steel)","electric guitar (jazz)","electric guitar (clean)","electric guitar (muted)","overdriven guitar","distortion guitar","guitar harmonics","acoustic bass","electric bass (finger)","electric bass (pick)","fretless bass","slap bass 1","slap bass 2","synth bass 1","synth bass 2","violin","viola","cello","contrabass","tremolo strings","pizzicato strings","orchestral harp","timpani","string ensemble 1","string ensemble 2","synthstrings 1","synthstrings 2","choir aahs","voice oohs","synth voice","orchestra hit","trumpet","trombone","tuba","muted trumpet","french horn","brass section","synthbrass 1","synthbrass 2","soprano sax","alto sax","tenor sax","baritone sax","oboe","english horn","bassoon","clarinet","piccolo","flute","recorder","pan flute","blown bottle","shakuhachi","whistle","ocarina","lead 1 (square)","lead 2 (sawtooth)","lead 3 (calliope)","lead 4 (chiff)","lead 5 (charang)","lead 6 (voice)","lead 7 (fifths)","lead 8 (bass + lead)","pad 1 (new age)","pad 2 (warm)","pad 3 (polysynth)","pad 4 (choir)","pad 5 (bowed)","pad 6 (metallic)","pad 7 (halo)","pad 8 (sweep)","fx 1 (rain)","fx 2 (soundtrack)","fx 3 (crystal)","fx 4 (atmosphere)","fx 5 (brightness)","fx 6 (goblins)","fx 7 (echoes)","fx 8 (sci-fi)","sitar","banjo","shamisen","koto","kalimba","bag pipe","fiddle","shanai","tinkle bell","agogo","steel drums","woodblock","taiko drum","melodic tom","synth drum","reverse cymbal","guitar fret noise","breath noise","seashore","bird tweet","telephone ring","helicopter","applause","gunshot"],Qn.InstrumentFamilyByID=["piano","chromatic percussion","organ","guitar","bass","strings","ensemble","brass","reed","pipe","synth lead","synth pad","synth effects","world","percussive","sound effects"],Qn.DrumKitByPatchID={0:"standard kit",8:"room kit",16:"power kit",24:"electronic kit",25:"tr-808 kit",32:"jazz kit",40:"brush kit",48:"orchestra kit",56:"sound fx kit"}),Qn}var Vh;function hS(){if(Vh)return Cr;Vh=1,Object.defineProperty(Cr,"__esModule",{value:!0}),Cr.Instrument=void 0;var t=uS(),e=new WeakMap,n=function(){function s(r,i){if(this.number=0,e.set(this,i),this.number=0,r){var o=r.find(function(a){return a.type==="programChange"});o&&(this.number=o.programNumber)}}return Object.defineProperty(s.prototype,"name",{get:function(){return this.percussion?t.DrumKitByPatchID[this.number]:t.instrumentByPatchID[this.number]},set:function(r){var i=t.instrumentByPatchID.indexOf(r);i!==-1&&(this.number=i)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"family",{get:function(){return this.percussion?"drums":t.InstrumentFamilyByID[Math.floor(this.number/8)]},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"percussion",{get:function(){var r=e.get(this);return r.channel===9},enumerable:!1,configurable:!0}),s.prototype.toJSON=function(){return{family:this.family,number:this.number,name:this.name}},s.prototype.fromJSON=function(r){this.number=r.number},s}();return Cr.Instrument=n,Cr}var xr={},Lh;function fS(){if(Lh)return xr;Lh=1,Object.defineProperty(xr,"__esModule",{value:!0}),xr.Note=void 0;function t(o){var a=Math.floor(o/12)-1;return e(o)+a.toString()}function e(o){var a=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],c=o%12;return a[c]}function n(o){var a=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];return a.indexOf(o)}var s=function(){var o=/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i,a={cbb:-2,cb:-1,c:0,"c#":1,cx:2,dbb:0,db:1,d:2,"d#":3,dx:4,ebb:2,eb:3,e:4,"e#":5,ex:6,fbb:3,fb:4,f:5,"f#":6,fx:7,gbb:5,gb:6,g:7,"g#":8,gx:9,abb:7,ab:8,a:9,"a#":10,ax:11,bbb:9,bb:10,b:11,"b#":12,bx:13};return function(c){var l=o.exec(c),u=l[1],h=l[2],f=a[u.toLowerCase()];return f+(parseInt(h,10)+1)*12}}(),r=new WeakMap,i=function(){function o(a,c,l){r.set(this,l),this.midi=a.midi,this.velocity=a.velocity,this.noteOffVelocity=c.velocity,this.ticks=a.ticks,this.durationTicks=c.ticks-a.ticks}return Object.defineProperty(o.prototype,"name",{get:function(){return t(this.midi)},set:function(a){this.midi=s(a)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"octave",{get:function(){return Math.floor(this.midi/12)-1},set:function(a){var c=a-this.octave;this.midi+=c*12},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"pitch",{get:function(){return e(this.midi)},set:function(a){this.midi=12*(this.octave+1)+n(a)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"duration",{get:function(){var a=r.get(this);return a.ticksToSeconds(this.ticks+this.durationTicks)-a.ticksToSeconds(this.ticks)},set:function(a){var c=r.get(this),l=c.secondsToTicks(this.time+a);this.durationTicks=l-this.ticks},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"time",{get:function(){var a=r.get(this);return a.ticksToSeconds(this.ticks)},set:function(a){var c=r.get(this);this.ticks=c.secondsToTicks(a)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"bars",{get:function(){var a=r.get(this);return a.ticksToMeasures(this.ticks)},enumerable:!1,configurable:!0}),o.prototype.toJSON=function(){return{duration:this.duration,durationTicks:this.durationTicks,midi:this.midi,name:this.name,ticks:this.ticks,time:this.time,velocity:this.velocity}},o}();return xr.Note=i,xr}var Uh;function jh(){if(Uh)return Sr;Uh=1,Object.defineProperty(Sr,"__esModule",{value:!0}),Sr.Track=void 0;var t=em(),e=tm(),n=cS(),s=lS(),r=hS(),i=fS(),o=new WeakMap,a=function(){function c(l,u){var h=this;if(this.name="",this.notes=[],this.controlChanges=(0,n.createControlChanges)(),this.pitchBends=[],o.set(this,u),l){var f=l.find(function(b){return b.type==="trackName"});this.name=f?f.text:""}if(this.instrument=new r.Instrument(l,this),this.channel=0,l){for(var d=l.filter(function(b){return b.type==="noteOn"}),p=l.filter(function(b){return b.type==="noteOff"}),g=function(){var b=d.shift();m.channel=b.channel;var y=p.findIndex(function(C){return C.noteNumber===b.noteNumber&&C.absoluteTime>=b.absoluteTime});if(y!==-1){var M=p.splice(y,1)[0];m.addNote({durationTicks:M.absoluteTime-b.absoluteTime,midi:b.noteNumber,noteOffVelocity:M.velocity/127,ticks:b.absoluteTime,velocity:b.velocity/127})}},m=this;d.length;)g();var _=l.filter(function(b){return b.type==="controller"});_.forEach(function(b){h.addCC({number:b.controllerType,ticks:b.absoluteTime,value:b.value/127})});var w=l.filter(function(b){return b.type==="pitchBend"});w.forEach(function(b){h.addPitchBend({ticks:b.absoluteTime,value:b.value/Math.pow(2,13)})});var A=l.find(function(b){return b.type==="endOfTrack"});this.endOfTrackTicks=A!==void 0?A.absoluteTime:void 0}}return c.prototype.addNote=function(l){var u=o.get(this),h=new i.Note({midi:0,ticks:0,velocity:1},{ticks:0,velocity:0},u);return Object.assign(h,l),(0,t.insert)(this.notes,h,"ticks"),this},c.prototype.addCC=function(l){var u=o.get(this),h=new e.ControlChange({controllerType:l.number},u);return delete l.number,Object.assign(h,l),Array.isArray(this.controlChanges[h.number])||(this.controlChanges[h.number]=[]),(0,t.insert)(this.controlChanges[h.number],h,"ticks"),this},c.prototype.addPitchBend=function(l){var u=o.get(this),h=new s.PitchBend({},u);return Object.assign(h,l),(0,t.insert)(this.pitchBends,h,"ticks"),this},Object.defineProperty(c.prototype,"duration",{get:function(){if(!this.notes.length)return 0;for(var l=this.notes[this.notes.length-1].time+this.notes[this.notes.length-1].duration,u=0;u<this.notes.length-1;u++){var h=this.notes[u].time+this.notes[u].duration;l<h&&(l=h)}return l},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"durationTicks",{get:function(){if(!this.notes.length)return 0;for(var l=this.notes[this.notes.length-1].ticks+this.notes[this.notes.length-1].durationTicks,u=0;u<this.notes.length-1;u++){var h=this.notes[u].ticks+this.notes[u].durationTicks;l<h&&(l=h)}return l},enumerable:!1,configurable:!0}),c.prototype.fromJSON=function(l){var u=this;this.name=l.name,this.channel=l.channel,this.instrument=new r.Instrument(void 0,this),this.instrument.fromJSON(l.instrument),l.endOfTrackTicks!==void 0&&(this.endOfTrackTicks=l.endOfTrackTicks);for(var h in l.controlChanges)l.controlChanges[h]&&l.controlChanges[h].forEach(function(f){u.addCC({number:f.number,ticks:f.ticks,value:f.value})});l.notes.forEach(function(f){u.addNote({durationTicks:f.durationTicks,midi:f.midi,ticks:f.ticks,velocity:f.velocity})})},c.prototype.toJSON=function(){for(var l={},u=0;u<127;u++)this.controlChanges.hasOwnProperty(u)&&(l[u]=this.controlChanges[u].map(function(f){return f.toJSON()}));var h={channel:this.channel,controlChanges:l,pitchBends:this.pitchBends.map(function(f){return f.toJSON()}),instrument:this.instrument.toJSON(),name:this.name,notes:this.notes.map(function(f){return f.toJSON()})};return this.endOfTrackTicks!==void 0&&(h.endOfTrackTicks=this.endOfTrackTicks),h},c}();return Sr.Track=a,Sr}var ds={};function dS(t){var e=[];return nm(t,e),e}function nm(t,e){for(var n=0;n<t.length;n++){var s=t[n];Array.isArray(s)?nm(s,e):e.push(s)}}const pS=Object.freeze(Object.defineProperty({__proto__:null,flatten:dS},Symbol.toStringTag,{value:"Module"})),mS=jT(pS);var qh;function gS(){if(qh)return ds;qh=1;var t=ds&&ds.__spreadArray||function(_,w,A){if(A||arguments.length===2)for(var b=0,y=w.length,M;b<y;b++)(M||!(b in w))&&(M||(M=Array.prototype.slice.call(w,0,b)),M[b]=w[b]);return _.concat(M||Array.prototype.slice.call(w))};Object.defineProperty(ds,"__esModule",{value:!0}),ds.encode=void 0;var e=Xp(),n=gc(),s=mS;function r(_,w){return[{absoluteTime:_.ticks,channel:w,deltaTime:0,noteNumber:_.midi,type:"noteOn",velocity:Math.floor(_.velocity*127)},{absoluteTime:_.ticks+_.durationTicks,channel:w,deltaTime:0,noteNumber:_.midi,type:"noteOff",velocity:Math.floor(_.noteOffVelocity*127)}]}function i(_){return(0,s.flatten)(_.notes.map(function(w){return r(w,_.channel)}))}function o(_,w){return{absoluteTime:_.ticks,channel:w,controllerType:_.number,deltaTime:0,type:"controller",value:Math.floor(_.value*127)}}function a(_){for(var w=[],A=0;A<127;A++)_.controlChanges.hasOwnProperty(A)&&_.controlChanges[A].forEach(function(b){w.push(o(b,_.channel))});return w}function c(_,w){return{absoluteTime:_.ticks,channel:w,deltaTime:0,type:"pitchBend",value:_.value}}function l(_){var w=[];return _.pitchBends.forEach(function(A){w.push(c(A,_.channel))}),w}function u(_){return{absoluteTime:0,channel:_.channel,deltaTime:0,programNumber:_.instrument.number,type:"programChange"}}function h(_){return{absoluteTime:0,deltaTime:0,meta:!0,text:_,type:"trackName"}}function f(_){return{absoluteTime:_.ticks,deltaTime:0,meta:!0,microsecondsPerBeat:Math.floor(6e7/_.bpm),type:"setTempo"}}function d(_){return{absoluteTime:_.ticks,deltaTime:0,denominator:_.timeSignature[1],meta:!0,metronome:24,numerator:_.timeSignature[0],thirtyseconds:8,type:"timeSignature"}}function p(_){var w=n.keySignatureKeys.indexOf(_.key);return{absoluteTime:_.ticks,deltaTime:0,key:w+7,meta:!0,scale:_.scale==="major"?0:1,type:"keySignature"}}function g(_){return{absoluteTime:_.ticks,deltaTime:0,meta:!0,text:_.text,type:_.type}}function m(_){var w={header:{format:1,numTracks:_.tracks.length+1,ticksPerBeat:_.header.ppq},tracks:t([t(t(t(t([{absoluteTime:0,deltaTime:0,meta:!0,text:_.header.name,type:"trackName"}],_.header.keySignatures.map(function(A){return p(A)}),!0),_.header.meta.map(function(A){return g(A)}),!0),_.header.tempos.map(function(A){return f(A)}),!0),_.header.timeSignatures.map(function(A){return d(A)}),!0)],_.tracks.map(function(A){return t(t(t([h(A.name),u(A)],i(A),!0),a(A),!0),l(A),!0)}),!0)};return w.tracks=w.tracks.map(function(A){A=A.sort(function(y,M){return y.absoluteTime-M.absoluteTime});var b=0;return A.forEach(function(y){y.deltaTime=y.absoluteTime-b,b=y.absoluteTime,delete y.absoluteTime}),A.push({deltaTime:0,meta:!0,type:"endOfTrack"}),A}),new Uint8Array((0,e.writeMidi)(w))}return ds.encode=m,ds}var $h;function _S(){return $h||($h=1,function(t){var e=Bs&&Bs.__awaiter||function(h,f,d,p){function g(m){return m instanceof d?m:new d(function(_){_(m)})}return new(d||(d=Promise))(function(m,_){function w(y){try{b(p.next(y))}catch(M){_(M)}}function A(y){try{b(p.throw(y))}catch(M){_(M)}}function b(y){y.done?m(y.value):g(y.value).then(w,A)}b((p=p.apply(h,f||[])).next())})},n=Bs&&Bs.__generator||function(h,f){var d={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},p,g,m,_;return _={next:w(0),throw:w(1),return:w(2)},typeof Symbol=="function"&&(_[Symbol.iterator]=function(){return this}),_;function w(b){return function(y){return A([b,y])}}function A(b){if(p)throw new TypeError("Generator is already executing.");for(;d;)try{if(p=1,g&&(m=b[0]&2?g.return:b[0]?g.throw||((m=g.return)&&m.call(g),0):g.next)&&!(m=m.call(g,b[1])).done)return m;switch(g=0,m&&(b=[b[0]&2,m.value]),b[0]){case 0:case 1:m=b;break;case 4:return d.label++,{value:b[1],done:!1};case 5:d.label++,g=b[1],b=[0];continue;case 7:b=d.ops.pop(),d.trys.pop();continue;default:if(m=d.trys,!(m=m.length>0&&m[m.length-1])&&(b[0]===6||b[0]===2)){d=0;continue}if(b[0]===3&&(!m||b[1]>m[0]&&b[1]<m[3])){d.label=b[1];break}if(b[0]===6&&d.label<m[1]){d.label=m[1],m=b;break}if(m&&d.label<m[2]){d.label=m[2],d.ops.push(b);break}m[2]&&d.ops.pop(),d.trys.pop();continue}b=f.call(h,d)}catch(y){b=[6,y],g=0}finally{p=m=0}if(b[0]&5)throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}};Object.defineProperty(t,"__esModule",{value:!0}),t.Header=t.Track=t.Midi=void 0;var s=Xp(),r=gc(),i=jh(),o=gS(),a=function(){function h(f){var d=this,p=null;if(f){var g=f instanceof ArrayBuffer?new Uint8Array(f):f;p=(0,s.parseMidi)(g),p.tracks.forEach(function(m){var _=0;m.forEach(function(w){_+=w.deltaTime,w.absoluteTime=_})}),p.tracks=u(p.tracks)}this.header=new r.Header(p),this.tracks=[],f&&(this.tracks=p.tracks.map(function(m){return new i.Track(m,d.header)}),p.header.format===1&&this.tracks[0].duration===0&&this.tracks.shift())}return h.fromUrl=function(f){return e(this,void 0,void 0,function(){var d,p;return n(this,function(g){switch(g.label){case 0:return[4,fetch(f)];case 1:return d=g.sent(),d.ok?[4,d.arrayBuffer()]:[3,3];case 2:return p=g.sent(),[2,new h(p)];case 3:throw new Error("Could not load '".concat(f,"'"))}})})},Object.defineProperty(h.prototype,"name",{get:function(){return this.header.name},set:function(f){this.header.name=f},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"duration",{get:function(){var f=this.tracks.map(function(d){return d.duration});return Math.max.apply(Math,f)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"durationTicks",{get:function(){var f=this.tracks.map(function(d){return d.durationTicks});return Math.max.apply(Math,f)},enumerable:!1,configurable:!0}),h.prototype.addTrack=function(){var f=new i.Track(void 0,this.header);return this.tracks.push(f),f},h.prototype.toArray=function(){return(0,o.encode)(this)},h.prototype.toJSON=function(){return{header:this.header.toJSON(),tracks:this.tracks.map(function(f){return f.toJSON()})}},h.prototype.fromJSON=function(f){var d=this;this.header=new r.Header,this.header.fromJSON(f.header),this.tracks=f.tracks.map(function(p){var g=new i.Track(void 0,d.header);return g.fromJSON(p),g})},h.prototype.clone=function(){var f=new h;return f.fromJSON(this.toJSON()),f},h}();t.Midi=a;var c=jh();Object.defineProperty(t,"Track",{enumerable:!0,get:function(){return c.Track}});var l=gc();Object.defineProperty(t,"Header",{enumerable:!0,get:function(){return l.Header}});function u(h){for(var f=[],d=0;d<h.length;d++)for(var p=f.length,g=new Map,m=Array(16).fill(0),_=0,w=h[d];_<w.length;_++){var A=w[_],b=p,y=A.channel;if(y!==void 0){A.type==="programChange"&&(m[y]=A.programNumber);var M=m[y],C="".concat(M," ").concat(y);g.has(C)?b=g.get(C):(b=p+g.size,g.set(C,b))}f[b]||f.push([]),f[b].push(A)}return f}}(Bs)),Bs}_S();He([]);He({initiated:!1,open:!1,opened:!1,recording:!0,monitor:!1,meter:0,volume:Tn(Mt("mic-vol",1),0,5),gate:Tn(Mt("mic-gate",-60),-100,-40)});const yS=He([]);pe(()=>Math.max(...yS.map(t=>t.meter.over/t.meter.under)));const bS=4096,vS=512,sm=440,wS=69;Xs($s,3);const Wh=He({initiated:!1,initiating:!1,stream:null,middleA:sm,semitone:wS,note:{name:"A",value:69,cents:0,octave:4,frequency:440,color:AS(440),silent:!1},span:64,bufferSize:bS,tempoBufferSize:vS,running:!1,frame:0,beat:0,bpm:0,confidence:0,listenBeat:!1,prevBeat:0,blink:!1,chroma:new Array(12).fill(0),spec:[],rms:0,aChroma:pe(()=>Xs(Wh.chroma,-3)),chromaAvg:pe(()=>Wh.chroma.reduce((t,e)=>t+e,0)/12)});function AS(t){const e=TS(t);if(typeof e!="number")return"#333";const n=Math.floor(e/12)+2;return yn(e,n)}function TS(t){return 12*(Math.log(t/sm)/Math.log(2))%12}function rm(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Oa,Gh;function MS(){return Gh||(Gh=1,Oa=function(e,n,s,r){var i=s?s.call(r,e,n):void 0;if(i!==void 0)return!!i;if(e===n)return!0;if(typeof e!="object"||!e||typeof n!="object"||!n)return!1;var o=Object.keys(e),a=Object.keys(n);if(o.length!==a.length)return!1;for(var c=Object.prototype.hasOwnProperty.bind(n),l=0;l<o.length;l++){var u=o[l];if(!c(u))return!1;var h=e[u],f=n[u];if(i=s?s.call(r,h,f,u):void 0,i===!1||i===void 0&&h!==f)return!1}return!0}),Oa}var SS=MS();const ES=rm(SS);var Ra,Hh;function NS(){if(Hh)return Ra;Hh=1;var t=function(e,n,s,r,i,o,a,c){if(!e){var l;if(n===void 0)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[s,r,i,o,a,c],h=0;l=new Error(n.replace(/%s/g,function(){return u[h++]})),l.name="Invariant Violation"}throw l.framesToPop=1,l}};return Ra=t,Ra}var CS=NS();const xS=rm(CS);var Da={exports:{}},zh;function IS(){return zh||(zh=1,function(t){var e=Object.prototype.hasOwnProperty,n="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(n=!1));function r(c,l,u){this.fn=c,this.context=l,this.once=u||!1}function i(c,l,u,h,f){if(typeof u!="function")throw new TypeError("The listener must be a function");var d=new r(u,h||c,f),p=n?n+l:l;return c._events[p]?c._events[p].fn?c._events[p]=[c._events[p],d]:c._events[p].push(d):(c._events[p]=d,c._eventsCount++),c}function o(c,l){--c._eventsCount===0?c._events=new s:delete c._events[l]}function a(){this._events=new s,this._eventsCount=0}a.prototype.eventNames=function(){var l=[],u,h;if(this._eventsCount===0)return l;for(h in u=this._events)e.call(u,h)&&l.push(n?h.slice(1):h);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(u)):l},a.prototype.listeners=function(l){var u=n?n+l:l,h=this._events[u];if(!h)return[];if(h.fn)return[h.fn];for(var f=0,d=h.length,p=new Array(d);f<d;f++)p[f]=h[f].fn;return p},a.prototype.listenerCount=function(l){var u=n?n+l:l,h=this._events[u];return h?h.fn?1:h.length:0},a.prototype.emit=function(l,u,h,f,d,p){var g=n?n+l:l;if(!this._events[g])return!1;var m=this._events[g],_=arguments.length,w,A;if(m.fn){switch(m.once&&this.removeListener(l,m.fn,void 0,!0),_){case 1:return m.fn.call(m.context),!0;case 2:return m.fn.call(m.context,u),!0;case 3:return m.fn.call(m.context,u,h),!0;case 4:return m.fn.call(m.context,u,h,f),!0;case 5:return m.fn.call(m.context,u,h,f,d),!0;case 6:return m.fn.call(m.context,u,h,f,d,p),!0}for(A=1,w=new Array(_-1);A<_;A++)w[A-1]=arguments[A];m.fn.apply(m.context,w)}else{var b=m.length,y;for(A=0;A<b;A++)switch(m[A].once&&this.removeListener(l,m[A].fn,void 0,!0),_){case 1:m[A].fn.call(m[A].context);break;case 2:m[A].fn.call(m[A].context,u);break;case 3:m[A].fn.call(m[A].context,u,h);break;case 4:m[A].fn.call(m[A].context,u,h,f);break;default:if(!w)for(y=1,w=new Array(_-1);y<_;y++)w[y-1]=arguments[y];m[A].fn.apply(m[A].context,w)}}return!0},a.prototype.on=function(l,u,h){return i(this,l,u,h,!1)},a.prototype.once=function(l,u,h){return i(this,l,u,h,!0)},a.prototype.removeListener=function(l,u,h,f){var d=n?n+l:l;if(!this._events[d])return this;if(!u)return o(this,d),this;var p=this._events[d];if(p.fn)p.fn===u&&(!f||p.once)&&(!h||p.context===h)&&o(this,d);else{for(var g=0,m=[],_=p.length;g<_;g++)(p[g].fn!==u||f&&!p[g].once||h&&p[g].context!==h)&&m.push(p[g]);m.length?this._events[d]=m.length===1?m[0]:m:o(this,d)}return this},a.prototype.removeAllListeners=function(l){var u;return l?(u=n?n+l:l,this._events[u]&&o(this,u)):(this._events=new s,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a}(Da)),Da.exports}IS();var im=Object.defineProperty,PS=Object.defineProperties,kS=Object.getOwnPropertyDescriptors,Qh=Object.getOwnPropertySymbols,OS=Object.prototype.hasOwnProperty,RS=Object.prototype.propertyIsEnumerable,Yh=(t,e,n)=>e in t?im(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,$e=(t,e)=>{for(var n in e||(e={}))OS.call(e,n)&&Yh(t,n,e[n]);if(Qh)for(var n of Qh(e))RS.call(e,n)&&Yh(t,n,e[n]);return t},DS=(t,e)=>PS(t,kS(e)),Cn=(t,e)=>{for(var n in e)im(t,n,{get:e[n],enumerable:!0})},om={};Cn(om,{_1:()=>am,_2:()=>cm,_3:()=>um,_4:()=>hm,_5:()=>fm,_6:()=>dm,_7:()=>pm,_8:()=>mm,__1:()=>$l,__2:()=>lm,__3:()=>FS,__4:()=>BS,__5:()=>VS,__6:()=>LS,__7:()=>US,__8:()=>jS,app:()=>_e});function Kh(t,e,n){for(var s=new Array(n),r=0,i=e;r<n;)s[r]=t[i],r=r+1|0,i=i+1|0;return s}function _e(t,e){for(;;){var n=e,s=t,r=s.length,i=r===0?1:r,o=n.length,a=i-o|0;if(a===0)return s.apply(null,n);if(a>=0)return function(c,l){return function(u){return _e(c,l.concat([u]))}}(s,n);e=Kh(n,i,-a|0),t=s.apply(null,Kh(n,0,i))}}function am(t,e){var n=t.length;if(n===1)return t(e);switch(n){case 1:return t(e);case 2:return function(s){return t(e,s)};case 3:return function(s,r){return t(e,s,r)};case 4:return function(s,r,i){return t(e,s,r,i)};case 5:return function(s,r,i,o){return t(e,s,r,i,o)};case 6:return function(s,r,i,o,a){return t(e,s,r,i,o,a)};case 7:return function(s,r,i,o,a,c){return t(e,s,r,i,o,a,c)};default:return _e(t,[e])}}function $l(t){var e=t.length;return e===1?t:function(n){return am(t,n)}}function cm(t,e,n){var s=t.length;if(s===2)return t(e,n);switch(s){case 1:return _e(t(e),[n]);case 2:return t(e,n);case 3:return function(r){return t(e,n,r)};case 4:return function(r,i){return t(e,n,r,i)};case 5:return function(r,i,o){return t(e,n,r,i,o)};case 6:return function(r,i,o,a){return t(e,n,r,i,o,a)};case 7:return function(r,i,o,a,c){return t(e,n,r,i,o,a,c)};default:return _e(t,[e,n])}}function lm(t){var e=t.length;return e===2?t:function(n,s){return cm(t,n,s)}}function um(t,e,n,s){var r=t.length;if(r===3)return t(e,n,s);switch(r){case 1:return _e(t(e),[n,s]);case 2:return _e(t(e,n),[s]);case 3:return t(e,n,s);case 4:return function(i){return t(e,n,s,i)};case 5:return function(i,o){return t(e,n,s,i,o)};case 6:return function(i,o,a){return t(e,n,s,i,o,a)};case 7:return function(i,o,a,c){return t(e,n,s,i,o,a,c)};default:return _e(t,[e,n,s])}}function FS(t){var e=t.length;return e===3?t:function(n,s,r){return um(t,n,s,r)}}function hm(t,e,n,s,r){var i=t.length;if(i===4)return t(e,n,s,r);switch(i){case 1:return _e(t(e),[n,s,r]);case 2:return _e(t(e,n),[s,r]);case 3:return _e(t(e,n,s),[r]);case 4:return t(e,n,s,r);case 5:return function(o){return t(e,n,s,r,o)};case 6:return function(o,a){return t(e,n,s,r,o,a)};case 7:return function(o,a,c){return t(e,n,s,r,o,a,c)};default:return _e(t,[e,n,s,r])}}function BS(t){var e=t.length;return e===4?t:function(n,s,r,i){return hm(t,n,s,r,i)}}function fm(t,e,n,s,r,i){var o=t.length;if(o===5)return t(e,n,s,r,i);switch(o){case 1:return _e(t(e),[n,s,r,i]);case 2:return _e(t(e,n),[s,r,i]);case 3:return _e(t(e,n,s),[r,i]);case 4:return _e(t(e,n,s,r),[i]);case 5:return t(e,n,s,r,i);case 6:return function(a){return t(e,n,s,r,i,a)};case 7:return function(a,c){return t(e,n,s,r,i,a,c)};default:return _e(t,[e,n,s,r,i])}}function VS(t){var e=t.length;return e===5?t:function(n,s,r,i,o){return fm(t,n,s,r,i,o)}}function dm(t,e,n,s,r,i,o){var a=t.length;if(a===6)return t(e,n,s,r,i,o);switch(a){case 1:return _e(t(e),[n,s,r,i,o]);case 2:return _e(t(e,n),[s,r,i,o]);case 3:return _e(t(e,n,s),[r,i,o]);case 4:return _e(t(e,n,s,r),[i,o]);case 5:return _e(t(e,n,s,r,i),[o]);case 6:return t(e,n,s,r,i,o);case 7:return function(c){return t(e,n,s,r,i,o,c)};default:return _e(t,[e,n,s,r,i,o])}}function LS(t){var e=t.length;return e===6?t:function(n,s,r,i,o,a){return dm(t,n,s,r,i,o,a)}}function pm(t,e,n,s,r,i,o,a){var c=t.length;if(c===7)return t(e,n,s,r,i,o,a);switch(c){case 1:return _e(t(e),[n,s,r,i,o,a]);case 2:return _e(t(e,n),[s,r,i,o,a]);case 3:return _e(t(e,n,s),[r,i,o,a]);case 4:return _e(t(e,n,s,r),[i,o,a]);case 5:return _e(t(e,n,s,r,i),[o,a]);case 6:return _e(t(e,n,s,r,i,o),[a]);case 7:return t(e,n,s,r,i,o,a);default:return _e(t,[e,n,s,r,i,o,a])}}function US(t){var e=t.length;return e===7?t:function(n,s,r,i,o,a,c){return pm(t,n,s,r,i,o,a,c)}}function mm(t,e,n,s,r,i,o,a,c){var l=t.length;if(l===8)return t(e,n,s,r,i,o,a,c);switch(l){case 1:return _e(t(e),[n,s,r,i,o,a,c]);case 2:return _e(t(e,n),[s,r,i,o,a,c]);case 3:return _e(t(e,n,s),[r,i,o,a,c]);case 4:return _e(t(e,n,s,r),[i,o,a,c]);case 5:return _e(t(e,n,s,r,i),[o,a,c]);case 6:return _e(t(e,n,s,r,i,o),[a,c]);case 7:return _e(t(e,n,s,r,i,o,a),[c]);default:return _e(t,[e,n,s,r,i,o,a,c])}}function jS(t){var e=t.length;return e===8?t:function(n,s,r,i,o,a,c,l){return mm(t,n,s,r,i,o,a,c,l)}}var gm={};Cn(gm,{$$Map:()=>lE,$$Set:()=>uE,RenderDelegate:()=>hE,mount:()=>Sm,renderWithDelegate:()=>fE,stepGarbageCollector:()=>dE,visit:()=>Em});var _m={};Cn(_m,{create:()=>Tm,isNode:()=>aE,shallowCopy:()=>Mm,symbol:()=>Wl});function Zh(t){var e=typeof t;return e==="undefined"?3:t===null?2:e==="number"?{TAG:0,_0:t}:e==="bigint"?{TAG:5,_0:t}:e==="string"?{TAG:1,_0:t}:e==="boolean"?t===!0?1:0:e==="symbol"?{TAG:4,_0:t}:e==="function"?{TAG:2,_0:t}:{TAG:3,_0:t}}function qS(t,e){switch(e){case 0:return typeof t>"u";case 1:return t===null;case 2:return typeof t=="boolean";case 3:return typeof t=="number";case 4:return typeof t=="string";case 5:return typeof t=="function";case 6:return typeof t=="object";case 7:return typeof t=="symbol";case 8:return typeof t=="bigint"}}function $S(t){return t===void 0?{BS_PRIVATE_NESTED_SOME_NONE:0}:t!==null&&t.BS_PRIVATE_NESTED_SOME_NONE!==void 0?{BS_PRIVATE_NESTED_SOME_NONE:t.BS_PRIVATE_NESTED_SOME_NONE+1|0}:t}function WS(t){if(!(t!==null&&t.BS_PRIVATE_NESTED_SOME_NONE!==void 0))return t;var e=t.BS_PRIVATE_NESTED_SOME_NONE;if(e!==0)return{BS_PRIVATE_NESTED_SOME_NONE:e-1|0}}function GS(t,e){return{hd:e,tl:t}}function HS(t,e){for(;;){var n=e,s=t;if(!s)return n;var r={hd:s.hd,tl:0};n.tl=r,e=r,t=s.tl}}function zS(t,e,n){for(;;){var s=e,r=t;if(!r)return;var i={hd:n(r.hd),tl:0};s.tl=i,e=i,t=r.tl}}function QS(t,e,n,s){for(;;){var r=s,i=n,o=e;if(!i)return;var a={hd:t(o,i.hd),tl:0};r.tl=a,s=a,n=i.tl,e=o+1|0}}function YS(t,e){if(!t)return e;var n={hd:t.hd,tl:0};return HS(t.tl,n).tl=e,n}function KS(t,e){if(!t)return 0;var n={hd:e(t.hd),tl:0};return zS(t.tl,n,e),n}function ym(t,e){return KS(t,$l(e))}function ZS(t,e){if(!t)return 0;var n={hd:e(0,t.hd),tl:0};return QS(e,1,t.tl,n),n}function JS(t,e){return ZS(t,lm(e))}function bm(t){for(var e=t,n=0;;){var s=n,r=e;if(!r)return s;n=s+1|0,e=r.tl}}function XS(t,e,n){for(;;){var s=n,r=e;if(!s)return;t[r]=s.hd,n=s.tl,e=r+1|0}}function vm(t){for(var e=t.length-1|0,n=0;;){var s=n,r=e;if(r<0)return s;n={hd:t[r],tl:s},e=r-1|0}}function eE(t){var e=bm(t),n=new Array(e);return XS(n,0,t),n}function tE(t,e){for(;;){var n=t;if(!n)return;e(n.hd),t=n.tl}}function wm(t,e){tE(t,$l(e))}function nE(t,e,n){for(;;){var s=e,r=t;if(!r)return s;e=n(s,r.hd),t=r.tl}}function sE(t,e,n,s){for(let r in s)if(s.hasOwnProperty(r)){const i=s[r];(!n.hasOwnProperty(r)||!ES(n[r],i))&&((typeof i>"u"||i===null||typeof i=="number"&&isNaN(i)||typeof i=="number"&&!isFinite(i))&&console.warn(`Warning: applying a potentially erroneous property value. ${r}: ${i}`),t.setProperty(e,r,i),n[r]=i)}}function rE(t,e){if(e in t)return $S(t[e])}function iE(t){if(t!==void 0)return WS(t);throw new Error("getExn")}function Jh(t,e,n,s){sE(t,e,n,s)}function Am(t,e){return Math.imul(t^e,16777619)}function Fa(t,e){for(var n=t,s=0,r=e.length;s<=r;++s)n=Am(n,e.charCodeAt(s)|0);return n}function oE(t,e,n){var s=Fa(-2128831035,t),r=rE(e,"key"),i=r!==void 0&&qS(r,4)?Fa(s,r):Fa(s,iE(JSON.stringify(e)));return nE(n,i,Am)&2147483647}var Wl="__ELEM_NODE__";function Tm(t,e,n){var s=vm(n),r=ym(s,function(i){return i.hash});return{symbol:Wl,hash:oE(t,e,r),kind:t,props:e,children:s}}function aE(t){var e=Zh(t);if(typeof e=="number"||e.TAG!==3)return!1;var n=Zh(t.symbol);return typeof n=="number"||n.TAG!==1?!1:n._0===Wl}function Mm(t){return{symbol:t.symbol,hash:t.hash,kind:t.kind,props:Object.assign({},t.props),generation:{contents:0}}}function cE(t){return Array.from(t.values())}var lE={valuesArray:cE},uE={},hE={};function Sm(t,e){var n=t.getNodeMap();if(n.has(e.hash)){var s=n.get(e.hash);Jh(t,s.hash,s.props,e.props),s.generation.contents=0;return}t.createNode(e.hash,e.kind),Jh(t,e.hash,{},e.props),wm(e.children,function(r){t.appendChild(e.hash,r.hash)}),n.set(e.hash,Mm(e))}function Em(t,e,n){for(;;){var s=n,r=function(a){e.add(a.hash)};if(!s)return;var i=s.tl,o=s.hd;if(e.has(o.hash)){n=i;continue}r(o),Sm(t,o),n=YS(o.children,i)}}function fE(t,e){var n=new Set,s=JS(vm(e),function(r,i){return Tm("root",{channel:r},[i])});Em(t,n,s),t.activateRoots(eE(ym(s,function(r){return r.hash}))),t.commitUpdates()}function dE(t){var e=t.getNodeMap(),n=t.getTerminalGeneration(),s=Array.from(e.values()).reduce(function(r,i){return i.generation.contents=i.generation.contents+1|0,i.generation.contents>=n?(t.deleteNode(i.hash),GS(r,i)):r},0);if(bm(s)>0)return t.commitUpdates(),wm(s,function(r){e.delete(r.hash)})}var pE=gm;pE.stepGarbageCollector;var mE=om,Gl=_m,Nm=function(t,e,n){return mE._3(Gl.create,t,e,n)},gE=Gl.isNode;Gl.shallowCopy;function N(t){return typeof t=="number"?Nm("const",{value:t},[]):(xS(z(t),`Whoops, expecting a Node type here! Got: ${typeof t}`),t)}function z(t){return gE(t)}function P(t,e,n){return Nm(t,e,n.map(N))}var Ps={};Cn(Ps,{accum:()=>vE,biquad:()=>HE,capture:()=>XE,constant:()=>Cm,convolve:()=>IE,counter:()=>bE,delay:()=>UE,env:()=>VE,fft:()=>JE,latch:()=>TE,maxhold:()=>ME,meter:()=>YE,metro:()=>NE,mm1p:()=>$E,once:()=>SE,phasor:()=>wE,pole:()=>BE,prewarp:()=>qE,rand:()=>EE,sample:()=>CE,sampleseq:()=>DE,sampleseq2:()=>FE,scope:()=>ZE,sdelay:()=>jE,seq:()=>PE,seq2:()=>kE,snapshot:()=>KE,sparseq:()=>OE,sparseq2:()=>RE,sr:()=>_E,svf:()=>WE,svfshelf:()=>GE,syncphasor:()=>AE,table:()=>xE,tapIn:()=>zE,tapOut:()=>QE,time:()=>yE,z:()=>LE});function Cm(t){return P("const",t,[])}function _E(){return P("sr",{},[])}function yE(){return P("time",{},[])}function bE(t,e){return typeof t=="number"||z(t)?P("counter",{},[N(t)]):P("counter",t,[N(e)])}function vE(t,e,n){return typeof t=="number"||z(t)?P("accum",{},[N(t),N(e)]):P("accum",t,[N(e),N(n)])}function wE(t,e){return typeof t=="number"||z(t)?P("phasor",{},[N(t)]):P("phasor",t,[N(e)])}function AE(t,e,n){return typeof t=="number"||z(t)?P("sphasor",{},[N(t),N(e)]):P("sphasor",t,[N(e),N(n)])}function TE(t,e,n){return typeof t=="number"||z(t)?P("latch",{},[N(t),N(e)]):P("latch",t,[N(e),N(n)])}function ME(t,e,n){return typeof t=="number"||z(t)?P("maxhold",{},[N(t),N(e)]):P("maxhold",t,[N(e),N(n)])}function SE(t,e){return typeof t=="number"||z(t)?P("once",{},[N(t)]):P("once",t,[N(e)])}function EE(t){return typeof t<"u"?P("rand",t,[]):P("rand",{},[])}function NE(t){return typeof t<"u"?P("metro",t,[]):P("metro",{},[])}function CE(t,e,n){return P("sample",t,[N(e),N(n)])}function xE(t,e){return P("table",t,[N(e)])}function IE(t,e){return P("convolve",t,[N(e)])}function PE(t,e,n){return P("seq",t,[N(e),N(n)])}function kE(t,e,n){return P("seq2",t,[N(e),N(n)])}function OE(t,e,n){return P("sparseq",t,[N(e),N(n)])}function RE(t,e){return P("sparseq2",t,[N(e)])}function DE(t,e){return P("sampleseq",t,[N(e)])}function FE(t,e){return P("sampleseq2",t,[N(e)])}function BE(t,e,n){return typeof t=="number"||z(t)?P("pole",{},[N(t),N(e)]):P("pole",t,[N(e),N(n)])}function VE(t,e,n,s){return typeof t=="number"||z(t)?P("env",{},[N(t),N(e),N(n)]):P("env",t,[N(e),N(n),N(s)])}function LE(t,e){return typeof t=="number"||z(t)?P("z",{},[N(t)]):P("z",t,[N(e)])}function UE(t,e,n,s){return typeof t=="number"||z(t)?P("delay",{},[N(t),N(e),N(n)]):P("delay",t,[N(e),N(n),N(s)])}function jE(t,e){return P("sdelay",t,[N(e)])}function qE(t){return P("prewarp",{},[t])}function $E(t,e,n){return typeof t=="number"||z(t)?P("mm1p",{},[N(t),N(e)]):P("mm1p",t,[N(e),N(n)])}function WE(t,e,n,s){return typeof t=="number"||z(t)?P("svf",{},[N(t),N(e),N(n)]):P("svf",t,[N(e),N(n),N(s)])}function GE(t,e,n,s,r){return typeof t=="number"||z(t)?P("svfshelf",{},[N(t),N(e),N(n),N(s)]):P("svfshelf",t,[N(e),N(n),N(s),N(r)])}function HE(t,e,n,s,r,i,o){return typeof t=="number"||z(t)?P("biquad",{},[N(t),N(e),N(n),N(s),N(r),N(i)]):P("biquad",t,[N(e),N(n),N(s),N(r),N(i),N(o)])}function zE(t){return P("tapIn",t,[])}function QE(t,e){return P("tapOut",t,[N(e)])}function YE(t,e){return typeof t=="number"||z(t)?P("meter",{},[N(t)]):P("meter",t,[N(e)])}function KE(t,e,n){return typeof t=="number"||z(t)?P("snapshot",{},[N(t),N(e)]):P("snapshot",t,[N(e),N(n)])}function ZE(t,...e){return typeof t=="number"||z(t)?P("scope",{},[t,...e].map(N)):P("scope",t,e.map(N))}function JE(t,e){return typeof t=="number"||z(t)?P("fft",{},[N(t)]):P("fft",t,[N(e)])}function XE(t,e,n){return typeof t=="number"||z(t)?P("capture",{},[N(t),N(e)]):P("capture",t,[N(e),N(n)])}var xm={};Cn(xm,{compress:()=>RN,skcompress:()=>DN});var ks={};Cn(ks,{abs:()=>dN,add:()=>AN,and:()=>vN,asinh:()=>rN,ceil:()=>cN,cos:()=>tN,div:()=>SN,eq:()=>bN,exp:()=>fN,floor:()=>lN,ge:()=>gN,geq:()=>_N,identity:()=>Im,le:()=>pN,leq:()=>mN,ln:()=>iN,log:()=>oN,log2:()=>aN,max:()=>CN,min:()=>NN,mod:()=>EN,mul:()=>MN,or:()=>wN,pow:()=>yN,round:()=>uN,sin:()=>eN,sqrt:()=>hN,sub:()=>TN,tan:()=>nN,tanh:()=>sN});function Im(t,e){return typeof t=="number"||z(t)?P("in",{},[N(t)]):typeof e=="number"||z(e)?P("in",t,[N(e)]):P("in",t,[])}function eN(t,e){return typeof t=="number"||z(t)?P("sin",{},[N(t)]):P("sin",t,[N(e)])}function tN(t,e){return typeof t=="number"||z(t)?P("cos",{},[N(t)]):P("cos",t,[N(e)])}function nN(t,e){return typeof t=="number"||z(t)?P("tan",{},[N(t)]):P("tan",t,[N(e)])}function sN(t,e){return typeof t=="number"||z(t)?P("tanh",{},[N(t)]):P("tanh",t,[N(e)])}function rN(t,e){return typeof t=="number"||z(t)?P("asinh",{},[N(t)]):P("asinh",t,[N(e)])}function iN(t,e){return typeof t=="number"||z(t)?P("ln",{},[N(t)]):P("ln",t,[N(e)])}function oN(t,e){return typeof t=="number"||z(t)?P("log",{},[N(t)]):P("log",t,[N(e)])}function aN(t,e){return typeof t=="number"||z(t)?P("log2",{},[N(t)]):P("log2",t,[N(e)])}function cN(t,e){return typeof t=="number"||z(t)?P("ceil",{},[N(t)]):P("ceil",t,[N(e)])}function lN(t,e){return typeof t=="number"||z(t)?P("floor",{},[N(t)]):P("floor",t,[N(e)])}function uN(t,e){return typeof t=="number"||z(t)?P("round",{},[N(t)]):P("round",t,[N(e)])}function hN(t,e){return typeof t=="number"||z(t)?P("sqrt",{},[N(t)]):P("sqrt",t,[N(e)])}function fN(t,e){return typeof t=="number"||z(t)?P("exp",{},[N(t)]):P("exp",t,[N(e)])}function dN(t,e){return typeof t=="number"||z(t)?P("abs",{},[N(t)]):P("abs",t,[N(e)])}function pN(t,e,n){return typeof t=="number"||z(t)?P("le",{},[N(t),N(e)]):P("le",t,[N(e),N(n)])}function mN(t,e,n){return typeof t=="number"||z(t)?P("leq",{},[N(t),N(e)]):P("leq",t,[N(e),N(n)])}function gN(t,e,n){return typeof t=="number"||z(t)?P("ge",{},[N(t),N(e)]):P("ge",t,[N(e),N(n)])}function _N(t,e,n){return typeof t=="number"||z(t)?P("geq",{},[N(t),N(e)]):P("geq",t,[N(e),N(n)])}function yN(t,e,n){return typeof t=="number"||z(t)?P("pow",{},[N(t),N(e)]):P("pow",t,[N(e),N(n)])}function bN(t,e,n){return typeof t=="number"||z(t)?P("eq",{},[N(t),N(e)]):P("eq",t,[N(e),N(n)])}function vN(t,e,n){return typeof t=="number"||z(t)?P("and",{},[N(t),N(e)]):P("and",t,[N(e),N(n)])}function wN(t,e,n){return typeof t=="number"||z(t)?P("or",{},[N(t),N(e)]):P("or",t,[N(e),N(n)])}function AN(t,...e){return typeof t=="number"||z(t)?P("add",{},[t,...e].map(N)):P("add",t,e.map(N))}function TN(t,...e){return typeof t=="number"||z(t)?P("sub",{},[t,...e].map(N)):P("sub",t,e.map(N))}function MN(t,...e){return typeof t=="number"||z(t)?P("mul",{},[t,...e].map(N)):P("mul",t,e.map(N))}function SN(t,...e){return typeof t=="number"||z(t)?P("div",{},[t,...e].map(N)):P("div",t,e.map(N))}function EN(t,...e){return typeof t=="number"||z(t)?P("mod",{},[t,...e].map(N)):P("mod",t,e.map(N))}function NN(t,...e){return typeof t=="number"||z(t)?P("min",{},[t,...e].map(N)):P("min",t,e.map(N))}function CN(t,...e){return typeof t=="number"||z(t)?P("max",{},[t,...e].map(N)):P("max",t,e.map(N))}var gi={};Cn(gi,{db2gain:()=>PN,gain2db:()=>kN,hann:()=>ON,ms2samps:()=>xN,select:()=>Pm,tau2pole:()=>IN});var Ge=$e($e({},Ps),ks);function xN(t){return Ge.mul(Ge.sr(),Ge.div(t,1e3))}function IN(t){return Ge.exp(Ge.div(-1,Ge.mul(t,Ge.sr())))}function PN(t){return Ge.pow(10,Ge.mul(t,1/20))}function kN(t){return Pm(Ge.ge(t,0),Ge.max(-120,Ge.mul(20,Ge.log(t))),-120)}function Pm(t,e,n){return Ge.add(Ge.mul(t,e),Ge.mul(Ge.sub(1,t),n))}function ON(t){return Ge.mul(.5,Ge.sub(1,Ge.cos(Ge.mul(2*Math.PI,t))))}var me=$e($e($e({},Ps),ks),gi);function RN(t,e,n,s,r,i){const o=me.env(me.tau2pole(me.mul(.001,t)),me.tau2pole(me.mul(.001,e)),r),a=me.gain2db(o),c=me.sub(1,me.div(1,s)),l=me.mul(c,me.sub(n,a)),u=me.min(0,l),h=me.db2gain(u);return me.mul(i,h)}function DN(t,e,n,s,r,i,o){const a=me.env(me.tau2pole(me.mul(.001,t)),me.tau2pole(me.mul(.001,e)),i),c=me.gain2db(a),l=me.sub(n,me.div(r,2)),u=me.add(n,me.div(r,2)),h=me.and(me.geq(c,l),me.leq(c,u)),f=me.sub(1,me.div(1,s)),d=me.select(h,me.mul(me.div(f,2),me.mul(me.div(me.sub(c,l),r),me.sub(l,c))),me.mul(f,me.sub(n,c))),p=me.min(0,d),g=me.db2gain(p);return me.mul(o,g)}var km={};Cn(km,{adsr:()=>QN});var Jo={};Cn(Jo,{allpass:()=>$N,bandpass:()=>jN,dcblock:()=>BN,df11:()=>VN,highpass:()=>UN,highshelf:()=>HN,lowpass:()=>LN,lowshelf:()=>GN,notch:()=>qN,peak:()=>WN,pink:()=>zN,sm:()=>FN,smooth:()=>_c,zero:()=>Hl});var he=$e($e($e({},Ps),ks),gi);function _c(t,e,n){return typeof t=="number"||z(t)?he.pole(t,he.mul(he.sub(1,t),e)):he.pole(t,e,he.mul(he.sub(1,e),n))}function FN(t,e){return typeof t=="number"||z(t)?_c(he.tau2pole(.02),t):_c(t,he.tau2pole(.02),e)}function Hl(t,e,n,s){let[r,i,o]=typeof t=="number"||z(t)?[t,e,n]:[e,n,s];return he.sub(he.mul(r,o),he.mul(i,he.z(o)))}function BN(t,e){let n=typeof t=="number"||z(t)?t:e;return he.pole(.995,Hl(1,1,n))}function VN(t,e,n,s,r){let[i,o,a,c]=typeof t=="number"||z(t)?[t,e,n,s]:[e,n,s,r];return he.pole(a,Hl(i,o,c))}function LN(t,e,n,s){return typeof t=="number"||z(t)?he.svf({mode:"lowpass"},t,e,n):he.svf(Object.assign({},t,{mode:"lowpass"}),e,n,s)}function UN(t,e,n,s){return typeof t=="number"||z(t)?he.svf({mode:"highpass"},t,e,n):he.svf(Object.assign({},t,{mode:"highpass"}),e,n,s)}function jN(t,e,n,s){return typeof t=="number"||z(t)?he.svf({mode:"bandpass"},t,e,n):he.svf(Object.assign({},t,{mode:"bandpass"}),e,n,s)}function qN(t,e,n,s){return typeof t=="number"||z(t)?he.svf({mode:"notch"},t,e,n):he.svf(Object.assign({},t,{mode:"notch"}),e,n,s)}function $N(t,e,n,s){return typeof t=="number"||z(t)?he.svf({mode:"allpass"},t,e,n):he.svf(Object.assign({},t,{mode:"allpass"}),e,n,s)}function WN(t,e,n,s,r){return typeof t=="number"||z(t)?he.svfshelf({mode:"peak"},t,e,n,s):he.svfshelf(Object.assign({},t,{mode:"peak"}),e,n,s,r)}function GN(t,e,n,s,r){return typeof t=="number"||z(t)?he.svfshelf({mode:"lowshelf"},t,e,n,s):he.svfshelf(Object.assign({},t,{mode:"lowshelf"}),e,n,s,r)}function HN(t,e,n,s,r){return typeof t=="number"||z(t)?he.svfshelf({mode:"highshelf"},t,e,n,s):he.svfshelf(Object.assign({},t,{mode:"highshelf"}),e,n,s,r)}function zN(t,e){let n=typeof t=="number"||z(t)?t:e;return((r,i,o)=>he.min(i,he.max(r,o)))(-1,1,he.mul(he.db2gain(-30),he.add(he.pole(.99765,he.mul(n,.099046)),he.pole(.963,he.mul(n,.2965164)),he.pole(.57,he.mul(n,1.0526913)),he.mul(.1848,n))))}var Jt=$e($e($e($e({},Ps),ks),Jo),gi);function QN(t,e,n,s,r,i){let o=typeof t=="number"||z(t)?[t,e,n,s,r]:[e,n,s,r,i],[a,c,l,u,h]=o,f=Jt.mul(a,Jt.sr()),d=Jt.le(Jt.counter(h),f),p=Jt.select(h,Jt.select(d,1,l),0),g=Jt.select(h,Jt.select(d,a,c),u),m=Jt.tau2pole(Jt.div(g,6.91));return Jt.smooth(m,p)}var Om={};Cn(Om,{blepsaw:()=>JN,blepsquare:()=>XN,bleptriangle:()=>eC,cycle:()=>YN,noise:()=>vc,pinknoise:()=>tC,saw:()=>bc,square:()=>KN,train:()=>yc,triangle:()=>ZN});var we=$e($e($e({},Ps),ks),Jo);function yc(t,e){return typeof t=="number"||z(t)?we.le(we.phasor(t,0),.5):we.le(we.phasor(t,e,0),.5)}function YN(t,e){return typeof t=="number"||z(t)?we.sin(we.mul(2*Math.PI,we.phasor(t,0))):we.sin(we.mul(2*Math.PI,we.phasor(t,e,0)))}function bc(t,e){return typeof t=="number"||z(t)?we.sub(we.mul(2,we.phasor(t,0)),1):we.sub(we.mul(2,we.phasor(t,e,0)),1)}function KN(t,e){return typeof t=="number"||z(t)?we.sub(we.mul(2,yc(t)),1):we.sub(we.mul(2,yc(t,e)),1)}function ZN(t,e){return typeof t=="number"||z(t)?we.mul(2,we.sub(.5,we.abs(bc(t)))):we.mul(2,we.sub(.5,we.abs(bc(t,e))))}function JN(t,e){let s=!(typeof t=="number"||z(t))?e:t;return P("blepsaw",{},[s])}function XN(t,e){let s=!(typeof t=="number"||z(t))?e:t;return P("blepsquare",{},[s])}function eC(t,e){let s=!(typeof t=="number"||z(t))?e:t;return P("bleptriangle",{},[s])}function vc(t){return typeof t>"u"?we.sub(we.mul(2,we.rand()),1):we.sub(we.mul(2,we.rand(t)),1)}function tC(t){return typeof t>"u"?we.pink(vc()):we.pink(vc(t))}DS($e($e($e($e($e($e($e({},Ps),xm),km),Jo),ks),Om),gi),{const:Cm,in:Im});Mt("sound-font","marimba");He([]);Ze(!1);Ze(!1);Tn(Mt("sound-font-volume",1),0,1);Mt("sound-font-enabled",!0);Mn({initiating:!1,initiated:!1,started:!1,running:!1,ctx:null,core:null,node:null});Mn({});He({});He({});He({});Mn({isOpen:!1,stream:null,streamSource:null,gain:Tn(1,0,10),gainRef:null,gainSetter:null});const nC=(t,e)=>{const n=t.__vccOpts||t;for(const[s,r]of e)n[s]=r;return n},sC=["fill"],rC={class:"white"},iC=["transform","onMousedown"],oC=["fill"],aC=["fill"],cC=["fill"],lC=["font-weight"],uC={class:"black"},hC=["transform","onMousedown"],fC=["fill","data-check"],dC=["fill","stroke"],pC=["fill","font-weight"],mC={y:"111",x:"45"},gC={y:"40",x:"45"},_C={class:"absolute right-4"},yC={class:"font-bold text-lg flex-1 text-center"},bC={__name:"ChromaKeys",props:{chroma:{type:String,default:"100000000000"},letters:{type:Boolean,default:!0},pitch:{type:Number,default:0},scale:{type:String},roman:{type:String,default:""},title:{type:Boolean,default:!0},playAll:{type:Boolean,default:!1}},emits:["update:pitch"],setup(t,{emit:e}){const n=t,s=He({white:[3,5,7,8,10,0,2],black:[4,6,null,9,11,1],chroma:pe(()=>Xs(n.chroma.split(""),-n.pitch)),scale:pe(()=>Xs(yt.chroma.split(""),-n.pitch)),color:pe(()=>sS(Xs(n.chroma.split(""),-n.pitch).join(""),n.pitch,.3,12)),title:pe(()=>{var l,u;return(l=ih(n.chroma))!=null&&l.empty?(u=Jr(n.chroma))!=null&&u.empty?"":Jr(n.chroma).aliases[0]:ih(n.chroma).aliases[0]})}),{midi:r,activeChroma:i}=eM();function o(l){return l!=null&&s.chroma[l]=="1"}function a(l){return n.scale&&l!=null&&s.chroma[l]=="1"}function c(l,u){return l==null?"transparent":l==n.pitch?Fe(yn(l,4)).toHex():o(l)&&!u?Fe(yn(l,3.5)).toHex():$s[l].length!=2?"#eee":"#999"}return(l,u)=>(Xe(),_t("div",{class:"flex flex-col rounded-lg cursor-pointer transition-all duration-300 ease relative select-none touch-none",onPointerdown:u[0]||(u[0]=h=>t.playAll&&gs(Ne(AM)(t.chroma,t.pitch))),onPointerup:u[1]||(u[1]=h=>t.playAll&&gs(Ne(ga)(t.chroma,t.pitch))),onPointerleave:u[2]||(u[2]=h=>t.playAll&&gs(Ne(ga)(t.chroma,t.pitch))),onPointerout:u[3]||(u[3]=h=>t.playAll&&gs(Ne(ga)(t.chroma,t.pitch)))},[(Xe(),_t("svg",{class:Xr(["w-full",{letters:t.letters}]),id:"chroma-keys",version:"1.1",baseProfile:"full",viewBox:"-10 -20 720 250",xmlns:"http://www.w3.org/2000/svg","font-family":"Commissioner, sans-serif","font-weight":"200","font-size":"40","text-anchor":"middle","dominant-baseline":"middle"},[u[4]||(u[4]=oe("defs",null,[oe("filter",{id:"shadowButton",x:"-50%",height:"200%",width:"300%"},[oe("feDropShadow",{dx:"0",dy:"3",stdDeviation:"4","flood-color":"#2225"})])],-1)),oe("rect",{width:"710",height:"150",x:"-5",y:"-20",rx:"20",fill:s.color.lch,style:{filter:"url(#shadowButton)"}},null,8,sC),oe("g",rC,[(Xe(!0),_t(tt,null,ms(s.white,(h,f)=>(Xe(),_t("g",{class:"key",key:h,transform:`translate(${f*100+5} 30)`,onMousedown:d=>l.$emit("update:pitch",h)},[oe("rect",{class:"transition-all duration-300 ease-out",width:"90",height:"190",rx:"45",fill:c(h,!0),style:{filter:"url(#shadowButton)"}},null,8,oC),oe("circle",{class:"transition-all duration-300 ease-out",cy:"145",cx:"45",r:"45",fill:c(h)},null,8,aC),Xl(oe("text",{class:"pointer-events-none",y:"152",x:"45",fill:Ne(Fe)(Ne(yn)(h)).isDark()?"white":"black"},[oe("tspan",{"font-weight":h==t.pitch?800:200},Wt(Ne($s)[h]),9,lC)],8,cC),[[du,o(h)&&t.letters]]),oe("circle",{style:it({opacity:Ne(i)[h]==1?1:0}),cy:"145",cx:"45",r:"18",fill:"#3339"},null,4)],40,iC))),128))]),oe("g",uC,[(Xe(!0),_t(tt,null,ms(s.black,(h,f)=>(Xe(),_t("g",{class:"key",key:h,transform:`translate(${f*100+55} -10)`,onMousedown:d=>l.$emit("update:pitch",h)},[h?(Xe(),_t("rect",{key:0,class:"transition-all duration-300 ease-out",width:"90",height:"150",rx:"45",style:{filter:"url(#shadowButton)"},fill:c(h,!0),"data-check":h},null,8,fC)):ki("",!0),h?(Xe(),_t("circle",{key:1,class:"transition-all duration-300 ease-out",cy:"105",cx:"45",r:"45",fill:c(h),"stroke-width":"8",stroke:a(h)?Ne(yn)(h,3):"transparent"},null,8,dC)):ki("",!0),Xl(oe("text",{class:"pointer-events-none",fill:Ne(Fe)(Ne(yn)(h)).isDark()?"white":"black","font-weight":h==t.pitch?800:200},[oe("tspan",mC,Wt(Ne($s)[h]),1),oe("tspan",gC,Wt(Ne(Up)[h]),1)],8,pC),[[du,o(h)&&t.letters]]),oe("circle",{style:it({opacity:Ne(i)[h]==1?1:0}),cy:"75",cx:"45",r:"18",fill:"#3339"},null,4)],40,hC))),128))])],2)),Bg(l.$slots,"default",{},()=>[t.title?(Xe(),_t("div",{key:0,class:"flex justify-center my-2 px-2",style:it({color:Ne(Fe)(Ne(yn)(t.pitch,2,1,1)).isDark()?"white":"black"})},[oe("div",_C,Wt(t.roman),1),oe("div",yC,Wt(Ne($s)[t.pitch])+Wt(s.title),1)],4)):ki("",!0)])],32))}},vC=nC(bC,[["__scopeId","data-v-1a60c69b"]]),wC={class:"bg-light-900 dark-bg-dark-800",id:"screen"},AC={class:"flex w-full items-center"},TC={class:"flex flex-wrap items-stretch justify-between gap-4"},MC={class:"text-6xl py-2 font-thin"},SC={key:0,class:"flex flex-wrap gap-4 text-center relative items-stretch justify-stretch flex-1 rounded-lg bg-light-900 p-2"},EC={class:"flex flex-col gap-2 w-full"},NC={class:"flex flex-col gap-2 w-full h-full"},CC={class:"flex gap-2 w-full",style:{flex:"1 0 .25em"}},xC={class:"flex gap-2 w-full",style:{flex:"1 0 .5em"}},IC={class:"flex gap-2 w-full",style:{flex:"1 0 .75em"}},PC={class:"flex gap-2 w-full",style:{flex:"1 0 1em"}},kC={class:"flex gap-2 w-full",style:{flex:"1 0 1.25em"}},OC={class:"flex items-baseline gap-1"},RC={class:"text-6xl font-thin m-4"},DC={class:"absolute left-2 z-10 top-2"},FC={class:"absolute right-2 z-10 top-2"},BC={__name:"App",setup(t){const e=rS();var n=102,s=20;function r(M,C){let E=1-Math.random(),B=1-Math.random();var x=Math.sqrt(-2*Math.log(E))*Math.cos(2*Math.PI*B);return M+C*x}const i=mA(()=>e.bpm,{duration:1e3,transition:fA.easeInOutCubic}),o=Ze(!1),a=Ze(Date.now()),c=Tn(256,64,1024);function l(){o.value||(e.stopped=!0,o.value=!0,e.bpm=Math.round(r(n,s)),yt.chroma=Math.random()>.7?"101011010101":"101101011010",yt.tonic=Math.round(Math.random()*12),setTimeout(()=>{o.value=!1,e.playing=!0,a.value=Date.now()},1e3))}const u=pe(()=>{var M;return(M=e==null?void 0:e.position)==null?void 0:M.split(":").map(Number)}),h=pe(()=>{var M;return((M=u.value)==null?void 0:M[0])/c.value}),f=pe(()=>Fe(yn(e.pitch,2,.6)).lighten(.3).desaturate(.2).toHex()),d=pe(()=>Fe(yn(yt.tonic,2,.6)).lighten(.3).desaturate(.2).toHex()),p=pe(()=>Fe(f.value).mix(d.value).toHex()),g=M=>[Math.floor(M),Math.round((M-Math.floor(M))*60)],m=M=>Math.round(M*60*1e3);pe(()=>g(c.value*4/(e==null?void 0:e.bpm)));const _=pe(()=>m(c.value*4/(e==null?void 0:e.bpm))),w=pe(()=>a.value+_.value),A=yp(),b=pe(()=>[Math.floor((A.value-a.value)/(1e3*60)),Math.round((A.value-a.value)%(1e3*60)/1e3)]),y=pe(()=>[Math.floor((w.value-A.value)/(1e3*60)),Math.round((w.value-A.value)%(1e3*60)/1e3)]);return et(A,M=>{M>w.value&&l()}),Ze(!1),(M,C)=>{var E,B;return Xe(),_t("div",wC,[oe("div",{class:"flex flex-col gap-4 p-4 justify-stretch relative items-stretch min-h-100vh transition duration-1000",style:it({backgroundImage:`linear-gradient(${Ne(Fe)(p.value).alpha(.1).toHex()}, ${Ne(Fe)(p.value).alpha(.9).toHex()})`})},[oe("div",AC,[C[2]||(C[2]=oe("div",{class:"flex flex-col"},[oe("a",{class:"no-underline text-sm font-bold op-40 hover-op-100 transition",href:"https://chromatone.center/",target:"_blank"},"Chromatone"),oe("div",{class:"text-4xl font-thin"},"RANDOM JAM")],-1)),C[3]||(C[3]=oe("div",{class:"flex-1"},null,-1)),oe("button",{class:"transition duration-1000 bg-dark-400 p-4 rounded-full shadow-xl flex gap-2",onClick:C[0]||(C[0]=x=>l()),style:it({backgroundColor:p.value}),title:"Randomize","aria-label":"Randomize"},[oe("div",{class:Xr(["p-0",{"animate-spin":o.value}])},C[1]||(C[1]=[oe("div",{class:"i-system-uicons-reset -scale-y-100 text-4xl"},null,-1)]),2)],4)]),oe("div",TC,[oe("div",{class:"tabular-nums rounded-xl p-2 shadow flex flex-col gap-2",style:it([{flex:"1 0 300px"},{backgroundColor:f.value}])},[oe("div",MC,[td(Wt(Ne(i).toFixed())+" BPM",1),oe("span",{class:"transition",style:it({opacity:Ne(e).blink?"1":"0"})},"•",4)]),u.value?(Xe(),_t("div",SC,[oe("div",EC,[oe("div",NC,[oe("div",CC,[(Xe(),_t(tt,null,ms(4,x=>oe("div",{class:"bit",style:it({backgroundColor:x-1==u.value[1]?f.value:"#3332"})},null,4)),64))]),oe("div",xC,[(Xe(),_t(tt,null,ms(4,x=>oe("div",{class:"bit",style:it({backgroundColor:x-1==u.value[0]%4?f.value:"#3332"})},null,4)),64))]),oe("div",IC,[(Xe(),_t(tt,null,ms(4,x=>oe("div",{class:"bit",style:it({backgroundColor:x-1==Math.floor(u.value[0]/4)%4?f.value:"#3332"})},null,4)),64))]),oe("div",PC,[(Xe(),_t(tt,null,ms(4,x=>oe("div",{class:"bit",style:it({backgroundColor:x-1==Math.floor(u.value[0]/4/4)%4?f.value:"#3332"})},null,4)),64))]),oe("div",kC,[(Xe(),_t(tt,null,ms(4,x=>oe("div",{class:"bit",style:it({backgroundColor:x-1==Math.floor(u.value[0]/4/4/4)%4?f.value:"#3332"})},null,4)),64))])])])])):ki("",!0)],4),oe("div",{class:"rounded-2xl shadow flex flex-col",style:it([{flex:"1 0 300px"},{backgroundColor:d.value}])},[oe("div",OC,[oe("div",RC,Wt(Ne(yt).note.name)+" "+Wt((B=(E=Ne(yt))==null?void 0:E.set)==null?void 0:B.name),1)]),C[4]||(C[4]=oe("div",{class:"flex-1"},null,-1)),on(vC,{class:"m-2",title:!1,chroma:Ne(yt).chroma,pitch:Ne(yt).tonic},null,8,["chroma","pitch"])],4)]),oe("div",{class:"overflow-clip rounded-2xl flex items-center border-8 relative bg-light-900 bg-op-40 py-6 text-4xl font-thin flex-1",style:it({borderColor:p.value})},[oe("div",DC,Wt(b.value.filter(Boolean).join(" m ")||0)+" s",1),oe("div",FC,"-"+Wt(y.value.filter(Boolean).join(" m ")||0)+" s",1),oe("div",{class:"bg-dark-400 transition duration-300 top-0 bottom-0 left-0 absolute flex items-center",style:it({backgroundColor:Ne(Fe)(p.value).darken(.1).toHex(),width:`${h.value*100}%`})},null,4)],4),C[5]||(C[5]=oe("div",{class:"flex-1"},null,-1))],4)])}}};Q0(BC).mount("#app");</script>
  <style rel="stylesheet" crossorigin>*,:before,:after{box-sizing:border-box;border-width:0;border-style:solid;border-color:var(--un-default-border-color, #e5e7eb)}:before,:after{--un-content: ""}html,:host{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;tab-size:4;font-family:ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,"Noto Color Emoji";font-feature-settings:normal;font-variation-settings:normal;-webkit-tap-highlight-color:transparent}body{margin:0;line-height:inherit}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,samp,pre{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-feature-settings:normal;font-variation-settings:normal;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}button,input,optgroup,select,textarea{font-family:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;font-weight:inherit;line-height:inherit;color:inherit;margin:0;padding:0}button,select{text-transform:none}button,[type=button],[type=reset],[type=submit]{-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dl,dd,h1,h2,h3,h4,h5,h6,hr,figure,p,pre{margin:0}fieldset{margin:0;padding:0}legend{padding:0}ol,ul,menu{list-style:none;margin:0;padding:0}dialog{padding:0}textarea{resize:vertical}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}button,[role=button]{cursor:pointer}:disabled{cursor:default}img,svg,video,canvas,audio,iframe,embed,object{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}[hidden]:where(:not([hidden=until-found])){display:none}*,:before,:after{--un-rotate:0;--un-rotate-x:0;--un-rotate-y:0;--un-rotate-z:0;--un-scale-x:1;--un-scale-y:1;--un-scale-z:1;--un-skew-x:0;--un-skew-y:0;--un-translate-x:0;--un-translate-y:0;--un-translate-z:0;--un-pan-x: ;--un-pan-y: ;--un-pinch-zoom: ;--un-scroll-snap-strictness:proximity;--un-ordinal: ;--un-slashed-zero: ;--un-numeric-figure: ;--un-numeric-spacing: ;--un-numeric-fraction: ;--un-border-spacing-x:0;--un-border-spacing-y:0;--un-ring-offset-shadow:0 0 rgb(0 0 0 / 0);--un-ring-shadow:0 0 rgb(0 0 0 / 0);--un-shadow-inset: ;--un-shadow:0 0 rgb(0 0 0 / 0);--un-ring-inset: ;--un-ring-offset-width:0px;--un-ring-offset-color:#fff;--un-ring-width:0px;--un-ring-color:rgb(147 197 253 / .5);--un-blur: ;--un-brightness: ;--un-contrast: ;--un-drop-shadow: ;--un-grayscale: ;--un-hue-rotate: ;--un-invert: ;--un-saturate: ;--un-sepia: ;--un-backdrop-blur: ;--un-backdrop-brightness: ;--un-backdrop-contrast: ;--un-backdrop-grayscale: ;--un-backdrop-hue-rotate: ;--un-backdrop-invert: ;--un-backdrop-opacity: ;--un-backdrop-saturate: ;--un-backdrop-sepia: }::backdrop{--un-rotate:0;--un-rotate-x:0;--un-rotate-y:0;--un-rotate-z:0;--un-scale-x:1;--un-scale-y:1;--un-scale-z:1;--un-skew-x:0;--un-skew-y:0;--un-translate-x:0;--un-translate-y:0;--un-translate-z:0;--un-pan-x: ;--un-pan-y: ;--un-pinch-zoom: ;--un-scroll-snap-strictness:proximity;--un-ordinal: ;--un-slashed-zero: ;--un-numeric-figure: ;--un-numeric-spacing: ;--un-numeric-fraction: ;--un-border-spacing-x:0;--un-border-spacing-y:0;--un-ring-offset-shadow:0 0 rgb(0 0 0 / 0);--un-ring-shadow:0 0 rgb(0 0 0 / 0);--un-shadow-inset: ;--un-shadow:0 0 rgb(0 0 0 / 0);--un-ring-inset: ;--un-ring-offset-width:0px;--un-ring-offset-color:#fff;--un-ring-width:0px;--un-ring-color:rgb(147 197 253 / .5);--un-blur: ;--un-brightness: ;--un-contrast: ;--un-drop-shadow: ;--un-grayscale: ;--un-hue-rotate: ;--un-invert: ;--un-saturate: ;--un-sepia: ;--un-backdrop-blur: ;--un-backdrop-brightness: ;--un-backdrop-contrast: ;--un-backdrop-grayscale: ;--un-backdrop-hue-rotate: ;--un-backdrop-invert: ;--un-backdrop-opacity: ;--un-backdrop-saturate: ;--un-backdrop-sepia: }.i-system-uicons-reset{--un-icon:url("data:image/svg+xml;utf8,%3Csvg viewBox='0 0 21 21' vertical-align='middle' width='1.2em' height='1.2em' xmlns='http://www.w3.org/2000/svg' %3E%3Cg fill='none' fill-rule='evenodd' stroke='currentColor' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M3.578 6.487A8 8 0 1 1 2.5 10.5'/%3E%3Cpath d='M7.5 6.5h-4v-4'/%3E%3C/g%3E%3C/svg%3E");-webkit-mask:var(--un-icon) no-repeat;mask:var(--un-icon) no-repeat;-webkit-mask-size:100% 100%;mask-size:100% 100%;background-color:currentColor;color:inherit;vertical-align:middle;width:1.2em;height:1.2em}.pointer-events-none{pointer-events:none}.absolute{position:absolute}.relative{position:relative}.bottom-0{bottom:0}.left-0{left:0}.left-2{left:.5rem}.right-2{right:.5rem}.right-4{right:1rem}.top-0{top:0}.top-2{top:.5rem}.z-10{z-index:10}.m-2{margin:.5rem}.m-4{margin:1rem}.my-2{margin-top:.5rem;margin-bottom:.5rem}.hidden{display:none}.h-100svh{height:100svh}.h-full{height:100%}.min-h-100vh{min-height:100vh}.w-full{width:100%}.flex{display:flex}.flex-1{flex:1 1 0%}.flex-col{flex-direction:column}.flex-wrap{flex-wrap:wrap}.-scale-y-100{--un-scale-y:-1;transform:translate(var(--un-translate-x)) translateY(var(--un-translate-y)) translateZ(var(--un-translate-z)) rotate(var(--un-rotate)) rotateX(var(--un-rotate-x)) rotateY(var(--un-rotate-y)) rotate(var(--un-rotate-z)) skew(var(--un-skew-x)) skewY(var(--un-skew-y)) scaleX(var(--un-scale-x)) scaleY(var(--un-scale-y)) scaleZ(var(--un-scale-z))}@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.animate-spin{animation:spin 1s linear infinite}.cursor-pointer{cursor:pointer}.touch-none{touch-action:none}.select-none{-webkit-user-select:none;user-select:none}.items-center{align-items:center}.items-baseline{align-items:baseline}.items-stretch{align-items:stretch}.justify-center{justify-content:center}.justify-between{justify-content:space-between}.justify-stretch{justify-content:stretch}.gap-1{gap:.25rem}.gap-2{gap:.5rem}.gap-4{gap:1rem}.overflow-clip{overflow:clip}.border-0{border-width:0px}.border-8{border-width:8px}.border-dark-100{--un-border-opacity:1;border-color:rgb(60 60 60 / var(--un-border-opacity))}.dark .dark-border-light-900{--un-border-opacity:1;border-color:rgb(221 225 227 / var(--un-border-opacity))}.border-op-20{--un-border-opacity:.2}.dark .dark-border-op-30{--un-border-opacity:.3}.rounded{border-radius:.25rem}.rounded-2xl{border-radius:1rem}.rounded-full{border-radius:9999px}.rounded-lg{border-radius:.5rem}.rounded-xl{border-radius:.75rem}.bg-dark-400{--un-bg-opacity:1;background-color:rgb(34 34 34 / var(--un-bg-opacity))}.bg-light-900{--un-bg-opacity:1;background-color:rgb(221 225 227 / var(--un-bg-opacity))}.dark .dark-bg-dark-800{--un-bg-opacity:1;background-color:rgb(24 24 24 / var(--un-bg-opacity))}.bg-op-40{--un-bg-opacity:.4}.p-0{padding:0}.p-2{padding:.5rem}.p-4{padding:1rem}.px-2{padding-left:.5rem;padding-right:.5rem}.py-2{padding-top:.5rem;padding-bottom:.5rem}.py-6{padding-top:1.5rem;padding-bottom:1.5rem}.text-center{text-align:center}.text-4xl{font-size:2.25rem;line-height:2.5rem}.text-6xl{font-size:3.75rem;line-height:1}.text-lg{font-size:1.125rem;line-height:1.75rem}.text-sm{font-size:.875rem;line-height:1.25rem}.font-bold{font-weight:700}.font-thin{font-weight:100}.tabular-nums{--un-numeric-spacing:tabular-nums;font-variant-numeric:var(--un-ordinal) var(--un-slashed-zero) var(--un-numeric-figure) var(--un-numeric-spacing) var(--un-numeric-fraction)}.underline{text-decoration-line:underline}.no-underline{text-decoration:none}.antialiased{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.op-40{opacity:.4}.hover-op-100:hover{opacity:1}.shadow{--un-shadow:var(--un-shadow-inset) 0 1px 3px 0 var(--un-shadow-color, rgb(0 0 0 / .1)),var(--un-shadow-inset) 0 1px 2px -1px var(--un-shadow-color, rgb(0 0 0 / .1));box-shadow:var(--un-ring-offset-shadow),var(--un-ring-shadow),var(--un-shadow)}.shadow-xl{--un-shadow:var(--un-shadow-inset) 0 20px 25px -5px var(--un-shadow-color, rgb(0 0 0 / .1)),var(--un-shadow-inset) 0 8px 10px -6px var(--un-shadow-color, rgb(0 0 0 / .1));box-shadow:var(--un-ring-offset-shadow),var(--un-ring-shadow),var(--un-shadow)}.grayscale{--un-grayscale:grayscale(1);filter:var(--un-blur) var(--un-brightness) var(--un-contrast) var(--un-drop-shadow) var(--un-grayscale) var(--un-hue-rotate) var(--un-invert) var(--un-saturate) var(--un-sepia)}.transition{transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-all{transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.duration-1000{transition-duration:1s}.duration-300{transition-duration:.3s}.ease,.ease-in-out{transition-timing-function:cubic-bezier(.4,0,.2,1)}.ease-out{transition-timing-function:cubic-bezier(0,0,.2,1)}.key text[data-v-1a60c69b]{transition:all .3s ease}.letters .key .text[data-v-1a60c69b]{opacity:1}.key:hover text[data-v-1a60c69b]{opacity:1}.bit{flex:1 1 0%;border-width:0px;--un-border-opacity:1;border-color:rgb(60 60 60 / var(--un-border-opacity));--un-border-opacity:.2;border-radius:.25rem;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-duration:.15s;transition-timing-function:cubic-bezier(.4,0,.2,1)}.dark .bit{--un-border-opacity:1;border-color:rgb(221 225 227 / var(--un-border-opacity));--un-border-opacity:.3}#app{width:100%;height:100%}a{text-decoration-line:underline}body{height:100svh;display:flex;align-items:stretch;justify-content:stretch;background-color:#000;width:100%;min-width:320px;min-height:100vh;line-height:1.3;font-family:Commissioner,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-size:1em;font-weight:400;color:var(--c-text);direction:ltr;font-synthesis:none;text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;overscroll-behavior:none;overflow:hidden}</style>
</head>

<body>
  <div id="app"></div>
</body>

</html>